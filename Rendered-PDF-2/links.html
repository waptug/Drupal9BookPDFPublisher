<!DOCTYPE html>
<html lang="en-US"><head><meta charset="utf-8"/><meta content="IE=Edge" http-equiv="X-UA-Compatible"/><link href="https://selwynpolit.github.io/d9book/assets/css/just-the-docs-default.css" rel="stylesheet"/> <script async="" src="https://www.googletagmanager.com/gtag/js?id=8V22RQEJ71"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', '8V22RQEJ71', { 'anonymize_ip': true }); </script> <script src="https://selwynpolit.github.io/d9book/assets/js/vendor/lunr.min.js"></script> <script src="https://selwynpolit.github.io/d9book/assets/js/just-the-docs.js"></script><meta content="width=device-width, initial-scale=1" name="viewport"/><link href="https://selwynpolit.github.io/d9book/assets/images/favicon.ico" rel="icon" type="image/x-icon"/><title>Links | Drupal Book</title><meta content="Jekyll v4.3.2" name="generator"><meta content="Links" property="og:title"><meta content="en_US" property="og:locale"><meta content="Drupal at your fingertips" name="description"/><meta content="Drupal at your fingertips" property="og:description"/><link href="https://selwynpolit.github.io/d9book/d9book/links" rel="canonical"><meta content="https://selwynpolit.github.io/d9book/d9book/links" property="og:url"/><meta content="Drupal Book" property="og:site_name"/><meta content="website" property="og:type"/><meta content="summary" name="twitter:card"/><meta content="Links" property="twitter:title"/> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Drupal at your fingertips","headline":"Links","url":"https://selwynpolit.github.io/d9book/d9book/links"}</script><body> <a class="skip-to-main" href="https://selwynpolit.github.io/d9book/links#main-content">Skip to main content</a> <svg class="d-none" xmlns="http://www.w3.org/2000/svg"> <symbol id="svg-link" viewbox="0 0 24 24"><title>Link</title><svg class="feather feather-link" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewbox="0 0 24 24"><title>Menu</title><svg class="feather feather-menu" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><line x1="3" x2="21" y1="12" y2="12"></line><line x1="3" x2="21" y1="6" y2="6"></line><line x1="3" x2="21" y1="18" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewbox="0 0 24 24"><title>Expand</title><svg class="feather feather-chevron-right" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol class="feather feather-external-link" fill="none" height="24" id="svg-external-link" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24"><title id="svg-external-link-title">(external link)</title><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" x2="21" y1="14" y2="3"></line> </symbol> <symbol id="svg-doc" viewbox="0 0 24 24"><title>Document</title><svg class="feather feather-file" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewbox="0 0 24 24"><title>Search</title><svg class="feather feather-search" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"> <circle cx="11" cy="11" r="8"></circle><line x1="21" x2="16.65" y1="21" y2="16.65"></line> </svg> </symbol> <symbol id="svg-copy" viewbox="0 0 16 16"><title>Copy</title><svg class="bi bi-clipboard" fill="currentColor" height="16" viewbox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"></path><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"></path> </svg> </symbol> <symbol id="svg-copied" viewbox="0 0 16 16"><title>Copied</title><svg class="bi bi-clipboard-check-fill" fill="currentColor" height="16" viewbox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"></path><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"></path> </svg> </symbol> </svg><div class="side-bar"><div class="site-header"> <a class="site-title lh-tight" href="https://selwynpolit.github.io/d9book/"> Drupal Book </a> <a class="site-button" href="https://selwynpolit.github.io/d9book/links" id="menu-button"> <svg class="icon" viewbox="0 0 24 24"><use xlink:href="#svg-menu"></use></svg> </a></div><nav aria-label="Main" class="site-nav" id="site-nav"><ul class="nav-list"><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/">Home</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/actions">Actions</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/attribution">Attribution</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/bq">Batch and Queue</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/blocks">Blocks</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/caching">Caching</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/composer">Composer</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/config">Config</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/cron">Cron</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/dates">Dates and Times</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/debugging">Debugging</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/development">Development</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/drush">Drush</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/email">Email</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/entities">Entities</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/forms">Forms</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/general">General</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/off-island">Getting off the Island</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/hooks">Hooks</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/learn">Learning</a><li class="nav-list-item active"><a class="nav-list-link active" href="https://selwynpolit.github.io/d9book/links">Links</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/logging">Logging</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/menus">Menus</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/migrate">Migrate</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/modals">Modals</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/nodes-and-fields">Nodes and Fields</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/queries">Queries</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/redirects">Redirects</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/render">Render Arrays</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/routes">Routes</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/security">Security</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/services">Services</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/state">State</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/taxonomy">Taxonomy</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/dtt">Tests</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/twig">Twig</a></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></ul><ul class="nav-list"><li class="nav-list-item external"> <a class="nav-list-link external" href="https://github.com/selwynpolit/d9book/fork"> Fork me on GitHub <svg aria-labelledby="svg-external-link-title" viewbox="0 0 24 24"><use xlink:href="#svg-external-link"></use></svg> </a></li></ul></nav><footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</footer></div><div class="main" id="top"><div class="main-header" id="main-header"><div class="search"><div class="search-input-wrap"> <input aria-label="Search Drupal Book" autocomplete="off" class="search-input" id="search-input" placeholder="Search Drupal Book" tabindex="0" type="text"/> <label class="search-label" for="search-input"><svg class="search-icon" viewbox="0 0 24 24"><use xlink:href="#svg-search"></use></svg></label></div><div class="search-results" id="search-results"></div></div><nav aria-label="Auxiliary" class="aux-nav"><ul class="aux-nav-list"><li class="aux-nav-list-item"> <a class="site-button" href="https://twitter.com/selwynpolit" rel="noopener noreferrer" target="_blank"> <img alt="Twitter logo" src="https://atuin.ru/demo/simple-icons/icons/twitter.svg" style="width: 30px; height: 30px;" title="Author in Twitter"/> </a><li class="aux-nav-list-item"> <a class="site-button" href="https://github.com/selwynpolit/d9book/tree/gh-pages" rel="noopener noreferrer" target="_blank"> <img alt="GitHub logo" src="https://atuin.ru/demo/simple-icons/icons/github.svg" style="width: 30px; height: 30px;" title="D9Book on GitHub"/> </a></li></li></ul></nav></div><div class="main-content-wrap" id="main-content-wrap"><div class="main-content" id="main-content" role="main"><h1 class="no_toc fw-500" id="links-aliases-and-urls"> <a aria-labelledby="links-aliases-and-urls" class="anchor-heading" href="https://selwynpolit.github.io/d9book/links#links-aliases-and-urls"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Links, Aliases and URLs</h1><h2 class="no_toc text-delta" id="table-of-contents"> <a aria-labelledby="table-of-contents" class="anchor-heading" href="https://selwynpolit.github.io/d9book/links#table-of-contents"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Table of contents</h2><ul id="markdown-toc"><li><a href="https://selwynpolit.github.io/d9book/links#create-an-external-url" id="markdown-toc-create-an-external-url">Create an external url</a><li><a href="https://selwynpolit.github.io/d9book/links#create-an-internal-url" id="markdown-toc-create-an-internal-url">Create an internal url</a><li><a href="https://selwynpolit.github.io/d9book/links#the-drupal-core-url-class" id="markdown-toc-the-drupal-core-url-class">The Drupal Core Url Class</a><li><a href="https://selwynpolit.github.io/d9book/links#the-drupal-core-link-class" id="markdown-toc-the-drupal-core-link-class">The Drupal Core Link Class</a><ul><li><a href="https://selwynpolit.github.io/d9book/links#create-a-link-to-a-node" id="markdown-toc-create-a-link-to-a-node">Create a link to a node</a><li><a href="https://selwynpolit.github.io/d9book/links#create-a-link-to-a-path-with-parameters" id="markdown-toc-create-a-link-to-a-path-with-parameters">Create a link to a path with parameters</a></li></li></ul><li><a href="https://selwynpolit.github.io/d9book/links#another-way-to-create-a-link-to-a-node" id="markdown-toc-another-way-to-create-a-link-to-a-node">Another way to create a link to a node:</a><li><a href="https://selwynpolit.github.io/d9book/links#create-a-link-from-an-internal-url" id="markdown-toc-create-a-link-from-an-internal-url">Create a link from an internal URL</a><li><a href="https://selwynpolit.github.io/d9book/links#check-if-a-link-field-is-empty" id="markdown-toc-check-if-a-link-field-is-empty">Check if a link field is empty</a><li><a href="https://selwynpolit.github.io/d9book/links#retrieve-a-link-field-from-a-node-or-a-paragraph" id="markdown-toc-retrieve-a-link-field-from-a-node-or-a-paragraph">Retrieve a link field from a node or a paragraph</a><li><a href="https://selwynpolit.github.io/d9book/links#retrieve-a-url-field" id="markdown-toc-retrieve-a-url-field">Retrieve a URL field</a><ul><li><a href="https://selwynpolit.github.io/d9book/links#external-links" id="markdown-toc-external-links">External links</a><li><a href="https://selwynpolit.github.io/d9book/links#internal-links" id="markdown-toc-internal-links">Internal links</a></li></li></ul><li><a href="https://selwynpolit.github.io/d9book/links#get-the-nid-from-a-url-alias" id="markdown-toc-get-the-nid-from-a-url-alias">Get the NID from a URL Alias</a><li><a href="https://selwynpolit.github.io/d9book/links#get-the-taxonomy-term-id-from-a-url-alias" id="markdown-toc-get-the-taxonomy-term-id-from-a-url-alias">Get the Taxonomy Term ID from a URL alias</a><li><a href="https://selwynpolit.github.io/d9book/links#get-url-alias-for-a-taxonomy-term" id="markdown-toc-get-url-alias-for-a-taxonomy-term">Get URL alias for a taxonomy term</a><li><a href="https://selwynpolit.github.io/d9book/links#get-the-user-id-from-a-url-alias" id="markdown-toc-get-the-user-id-from-a-url-alias">Get the User ID from a URL alias</a><li><a href="https://selwynpolit.github.io/d9book/links#get-the-url-alias-for-a-node" id="markdown-toc-get-the-url-alias-for-a-node">Get the URL alias for a node</a><li><a href="https://selwynpolit.github.io/d9book/links#create-a-node-alias" id="markdown-toc-create-a-node-alias">Create a Node Alias</a><li><a href="https://selwynpolit.github.io/d9book/links#get-the-current-path" id="markdown-toc-get-the-current-path">Get the current Path</a><li><a href="https://selwynpolit.github.io/d9book/links#get-current-nid-node-type-and-title" id="markdown-toc-get-current-nid-node-type-and-title">Get current nid, node type and title</a><li><a href="https://selwynpolit.github.io/d9book/links#how-to-get-current-route-name" id="markdown-toc-how-to-get-current-route-name">How to get current Route name</a><li><a href="https://selwynpolit.github.io/d9book/links#get-current-document-root-path" id="markdown-toc-get-current-document-root-path">Get current Document root path</a><li><a href="https://selwynpolit.github.io/d9book/links#retrieve-url-argument-parameters" id="markdown-toc-retrieve-url-argument-parameters">Retrieve URL argument parameters</a><li><a href="https://selwynpolit.github.io/d9book/links#retrieve-query-and-get-or-post-parameters-_post-and-_get" id="markdown-toc-retrieve-query-and-get-or-post-parameters-_post-and-_get">Retrieve query and GET or POST parameters ($_POST and $_GET)</a><li><a href="https://selwynpolit.github.io/d9book/links#modify-url-aliases-programmatically-with-hook_pathauto_alias_alter" id="markdown-toc-modify-url-aliases-programmatically-with-hook_pathauto_alias_alter">Modify URL Aliases programmatically with hook_pathauto_alias_alter</a><li><a href="https://selwynpolit.github.io/d9book/links#drupal-l-is-deprecated" id="markdown-toc-drupal-l-is-deprecated">Drupal l() is deprecated</a><li><a href="https://selwynpolit.github.io/d9book/links#reference-links" id="markdown-toc-reference-links">Reference links</a></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></ul><p><img alt="views" src="https://api.visitor.plantree.me/visitor-badge/pv?label=views&amp;color=informational&amp;namespace=d9book&amp;key=links.md"/></p><hr/><h2 id="create-an-external-url"> <a aria-labelledby="create-an-external-url" class="anchor-heading" href="https://selwynpolit.github.io/d9book/links#create-an-external-url"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Create an external url</h2><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">use</span> <span class="nc">Drupal\Core\Url</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromUri</span><span class="p">(</span><span class="s1">'http://testsite.com/go/here'</span><span class="p">);</span>
</code></pre></div></div><h2 id="create-an-internal-url"> <a aria-labelledby="create-an-internal-url" class="anchor-heading" href="https://selwynpolit.github.io/d9book/links#create-an-internal-url"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Create an internal url</h2><p>First a simple URL:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">use</span> <span class="nc">Drupal\Core\Url</span>

<span class="nv">$url</span> <span class="o">=</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromUri</span><span class="p">(</span><span class="s1">'internal:/reports/search'</span><span class="p">);</span>

<span class="c1">// Or. </span>

<span class="nv">$url</span> <span class="o">=</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromUri</span><span class="p">(</span><span class="s1">'internal:/dashboard/achievements'</span><span class="p">)</span>

<span class="c1">// Or Using link generator to create a GeneratedLink.</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="o">=</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromUri</span><span class="p">(</span><span class="s1">'internal:/node/1'</span><span class="p">);</span>
<span class="nv">$link</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">service</span><span class="p">(</span><span class="s1">'link_generator'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">generate</span><span class="p">(</span><span class="s1">'My link'</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>

<span class="c1">// OR</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromUri</span><span class="p">(</span><span class="s1">'internal:/'</span><span class="p">);</span>
<span class="c1">// OR</span>
<span class="s1">'url'</span> <span class="o">=&gt;</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromRoute</span><span class="p">(</span><span class="s1">'&lt;front&gt;'</span><span class="p">),</span>
<span class="c1">// OR</span>
<span class="s1">'url'</span> <span class="o">=&gt;</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromRoute</span><span class="p">(</span><span class="s1">'hello_world.hello'</span><span class="p">),</span>
</code></pre></div></div><p>Then something more complicated like this URL to <code class="language-plaintext highlighter-rouge">/reports/search?user=admin</code></p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">$option</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">'query'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'user'</span> <span class="o">=&gt;</span> <span class="s1">'admin'</span><span class="p">],</span>
  <span class="p">];</span>
  <span class="nv">$url</span> <span class="o">=</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromUri</span><span class="p">(</span><span class="s1">'internal:/reports/search'</span><span class="p">,</span> <span class="nv">$option</span><span class="p">);</span>
</code></pre></div></div><h2 id="the-drupal-core-url-class"> <a aria-labelledby="the-drupal-core-url-class" class="anchor-heading" href="https://selwynpolit.github.io/d9book/links#the-drupal-core-url-class"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> The Drupal Core Url Class</h2><p>The <code class="language-plaintext highlighter-rouge">Drupal\Core\Url</code> class is often used to create URL’s. Two important methods are:</p><p><code class="language-plaintext highlighter-rouge">Url::fromRoute()</code> which takes a route name and parameters and</p><p><code class="language-plaintext highlighter-rouge">Url::fromUri()</code> which takes an internal or external URL</p><p>See how these are used in some of the examples below.</p><h2 id="the-drupal-core-link-class"> <a aria-labelledby="the-drupal-core-link-class" class="anchor-heading" href="https://selwynpolit.github.io/d9book/links#the-drupal-core-link-class"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> The Drupal Core Link Class</h2><p>Closely related and often used in conjunction with the Drupal Core URL class is the Drupal\Core\Link class.</p><p>You can generate links several different ways.</p><h3 id="create-a-link-to-a-node"> <a aria-labelledby="create-a-link-to-a-node" class="anchor-heading" href="https://selwynpolit.github.io/d9book/links#create-a-link-to-a-node"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Create a link to a node</h3><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//Using link generator to create a GeneratedLink.</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromUri</span><span class="p">(</span><span class="s1">'internal:/node/1'</span><span class="p">);</span>
<span class="nv">$link</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">service</span><span class="p">(</span><span class="s1">'link_generator'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">generate</span><span class="p">(</span><span class="s1">'My link'</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
</code></pre></div></div><h3 id="create-a-link-to-a-path-with-parameters"> <a aria-labelledby="create-a-link-to-a-path-with-parameters" class="anchor-heading" href="https://selwynpolit.github.io/d9book/links#create-a-link-to-a-path-with-parameters"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Create a link to a path with parameters</h3><p>To create a link to a path like <code class="language-plaintext highlighter-rouge">/reports/search?user=admin</code> use this code.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$option</span> <span class="o">=</span> <span class="p">[</span>
 <span class="s1">'query'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'user'</span> <span class="o">=&gt;</span> <span class="s1">'admin'</span><span class="p">],</span>
<span class="p">];</span>
<span class="nv">$url</span> <span class="o">=</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromUri</span><span class="p">(</span><span class="s1">'internal:/reports/search'</span><span class="p">,</span> <span class="nv">$option</span><span class="p">);</span>

<span class="c1">// use the Link class.</span>
<span class="nv">$link</span> <span class="o">=</span> <span class="nc">Link</span><span class="o">::</span><span class="nf">fromTextAndUrl</span><span class="p">(</span><span class="s1">'My link'</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nv">$renderable_array</span> <span class="o">=</span> <span class="nv">$link</span><span class="o">-&gt;</span><span class="nf">toRenderable</span><span class="p">();</span>
<span class="k">return</span> <span class="nv">$renderable_array</span><span class="p">;</span>
</code></pre></div></div><h2 id="another-way-to-create-a-link-to-a-node"> <a aria-labelledby="another-way-to-create-a-link-to-a-node" class="anchor-heading" href="https://selwynpolit.github.io/d9book/links#another-way-to-create-a-link-to-a-node"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Another way to create a link to a node:</h2><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$nid</span> <span class="o">=</span> <span class="nv">$item</span><span class="o">-&gt;</span><span class="nf">id</span><span class="p">();</span>
<span class="nv">$options</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'relative'</span> <span class="o">=&gt;</span> <span class="kc">TRUE</span><span class="p">];</span>  <span class="c1">//could be absolute instead of relative.</span>

<span class="nv">$url</span> <span class="o">=</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromRoute</span><span class="p">(</span><span class="s1">'entity.node.canonical'</span><span class="p">,[</span><span class="s1">'node'</span> <span class="o">=&gt;</span> <span class="nv">$nid</span><span class="p">],</span> <span class="nv">$options</span><span class="p">);</span>
<span class="nv">$link</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">service</span><span class="p">(</span><span class="s1">'link_generator'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">generate</span><span class="p">(</span><span class="s1">'My link'</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>
</code></pre></div></div><h2 id="create-a-link-from-an-internal-url"> <a aria-labelledby="create-a-link-from-an-internal-url" class="anchor-heading" href="https://selwynpolit.github.io/d9book/links#create-a-link-from-an-internal-url"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Create a link from an internal URL</h2><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">use</span> <span class="nc">Drupal\Core\Url</span>

<span class="nv">$url</span> <span class="o">=</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromUri</span><span class="p">(</span><span class="s1">'internal:/reports/search'</span><span class="p">);</span>
<span class="nv">$link</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">service</span><span class="p">(</span><span class="s1">'link_generator'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">generate</span><span class="p">(</span><span class="s1">'My link'</span><span class="p">,</span> <span class="nv">$url</span><span class="p">);</span>

<span class="c1">// -&gt;toString() will extract the string of the URL.</span>
<span class="nv">$url_string</span> <span class="o">=</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromUri</span><span class="p">(</span><span class="s1">'internal:/node/'</span> <span class="mf">.</span> <span class="nv">$id</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">toString</span><span class="p">();</span>
</code></pre></div></div><h2 id="check-if-a-link-field-is-empty"> <a aria-labelledby="check-if-a-link-field-is-empty" class="anchor-heading" href="https://selwynpolit.github.io/d9book/links#check-if-a-link-field-is-empty"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Check if a link field is empty</h2><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$citation_node</span><span class="o">-&gt;</span><span class="n">field_link</span><span class="o">-&gt;</span><span class="n">uri</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Empty.</span>
<span class="p">}</span>
</code></pre></div></div><h2 id="retrieve-a-link-field-from-a-node-or-a-paragraph"> <a aria-labelledby="retrieve-a-link-field-from-a-node-or-a-paragraph" class="anchor-heading" href="https://selwynpolit.github.io/d9book/links#retrieve-a-link-field-from-a-node-or-a-paragraph"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Retrieve a link field from a node or a paragraph</h2><p>The link field <code class="language-plaintext highlighter-rouge">field_link</code> is extracted from the node and a valid uri is extracted from that field.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$correction_node</span> <span class="o">=</span> <span class="nc">Node</span><span class="o">::</span><span class="nf">load</span><span class="p">(</span><span class="nv">$nid</span><span class="p">);</span>
<span class="nv">$current_url</span> <span class="o">=</span> <span class="nv">$correction_node</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s1">'field_link'</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">uri</span><span class="p">;</span>
</code></pre></div></div><p>Or from a paragraph field</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">use</span> <span class="nc">Drupal\paragraphs\Entity\Paragraph</span><span class="p">;</span>

<span class="nv">$para</span> <span class="o">=</span> <span class="nc">Paragraph</span><span class="o">::</span><span class="nf">load</span><span class="p">(</span><span class="nv">$target_id</span><span class="p">);</span>
<span class="nv">$link</span> <span class="o">=</span> <span class="nv">$para</span><span class="o">-&gt;</span><span class="n">field_link</span><span class="p">;</span>
<span class="nv">$link_uri</span> <span class="o">=</span> <span class="nv">$para</span><span class="o">-&gt;</span><span class="n">field_link</span><span class="o">-&gt;</span><span class="n">uri</span><span class="p">;</span>
</code></pre></div></div><p>Or a more convoluted example that extracts the url string for display from a link field.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nv">$sf_contract</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// first() returns a Drupal\link\Plugin\FieldType\LinkItem</span>
  <span class="nv">$vendor_url</span> <span class="o">=</span> <span class="nv">$sf_contract</span><span class="o">-&gt;</span><span class="n">field_vendor_url</span><span class="o">-&gt;</span><span class="nf">first</span><span class="p">();</span>
  <span class="k">if</span> <span class="p">(</span><span class="nv">$vendor_url</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// returns a Drupal\Core\Url.</span>
    <span class="nv">$vendor_url</span> <span class="o">=</span> <span class="nv">$vendor_url</span><span class="o">-&gt;</span><span class="nf">getUrl</span><span class="p">();</span>  
    <span class="nv">$vendor_url_string</span> <span class="o">=</span> <span class="nv">$vendor_url</span><span class="o">-&gt;</span><span class="nf">toString</span><span class="p">();</span>
  <span class="p">}</span>
</code></pre></div></div><p>Removing <code class="language-plaintext highlighter-rouge">-&gt;first()</code> as in:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$vendor_url</span> <span class="o">=</span> <span class="nv">$sf_contract</span><span class="o">-&gt;</span><span class="n">field_vendor_url</span><span class="p">;</span>
</code></pre></div></div><p>returns a <code class="language-plaintext highlighter-rouge">Drupal\Core\Field\FieldItemList</code> which is a list of fields so you then would have to pull out the first field and extract the URI out of that. I’m not sure why Drupal considers it multiple values instead of just one. This was not set up as a multivalue field.</p><h2 id="retrieve-a-url-field"> <a aria-labelledby="retrieve-a-url-field" class="anchor-heading" href="https://selwynpolit.github.io/d9book/links#retrieve-a-url-field"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Retrieve a URL field</h2><h3 id="external-links"> <a aria-labelledby="external-links" class="anchor-heading" href="https://selwynpolit.github.io/d9book/links#external-links"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> External links</h3><p>You can get the URL (for external links) and then just the text part.</p><p>Note this doesn’t work for internal links. Note also this slightly convoluted example has a reference field field_sf_contract_ref which has a link to another entity and the field_vendor_url-&gt;first()-&gt;getUrl() is the important part. Also note, this is a single-value field (not a multivalue field – so the first() call may be a little disturbing to those who expect things to be a little clearer.)</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$vendor_url</span> <span class="o">=</span> <span class="nv">$node</span><span class="o">-&gt;</span><span class="n">field_sf_contract_ref</span><span class="o">-&gt;</span><span class="n">entity</span><span class="o">-&gt;</span><span class="n">field_vendor_url</span><span class="o">-&gt;</span><span class="nf">first</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">getUrl</span><span class="p">();</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$vendor_url</span><span class="p">)</span> <span class="p">{</span>
  <span class="nv">$vendor_url</span> <span class="o">=</span> <span class="nv">$vendor_url</span><span class="o">-&gt;</span><span class="nf">getUri</span><span class="p">();</span>
  <span class="c1">//OR</span>
  <span class="nv">$vendor_url</span> <span class="o">=</span> <span class="nv">$vendor_url</span><span class="o">-&gt;</span><span class="nf">toString</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div><p>A slightly simpler example from a form</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$citation_link</span> <span class="o">=</span> <span class="nv">$citation</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s1">'field_link'</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nv">$citation_link</span><span class="o">-&gt;</span><span class="nf">isEmpty</span><span class="p">())</span> <span class="p">{</span>
  <span class="nv">$citation_link</span> <span class="o">=</span> <span class="nv">$citation</span><span class="o">-&gt;</span><span class="n">field_link</span><span class="o">-&gt;</span><span class="nf">first</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">getUrl</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">toString</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div><h3 id="internal-links"> <a aria-labelledby="internal-links" class="anchor-heading" href="https://selwynpolit.github.io/d9book/links#internal-links"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Internal links</h3><p>For internal links, use getUrl()for the URL and -&gt;title for the title.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$instructions_node</span> <span class="o">=</span> <span class="nc">Node</span><span class="o">::</span><span class="nf">load</span><span class="p">(</span><span class="nv">$order_type_instructions_nid</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$instructions_node</span><span class="p">)</span> <span class="p">{</span>
  <span class="nv">$order_link</span> <span class="o">=</span> <span class="nv">$instructions_node</span><span class="o">-&gt;</span><span class="n">field_link</span><span class="o">-&gt;</span><span class="nf">first</span><span class="p">();</span>
  <span class="k">if</span> <span class="p">(</span><span class="nv">$order_link</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$uri</span> <span class="o">=</span> <span class="nv">$order_link</span><span class="o">-&gt;</span><span class="n">uri</span><span class="p">;</span>
    <span class="nv">$variables</span><span class="p">[</span><span class="s1">'order_link_title'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$order_link</span><span class="o">-&gt;</span><span class="n">title</span><span class="p">;</span>
    <span class="nv">$order_url</span> <span class="o">=</span> <span class="nv">$order_link</span><span class="o">-&gt;</span><span class="nf">getUrl</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$order_url</span><span class="p">)</span> <span class="p">{</span>
      <span class="nv">$variables</span><span class="p">[</span><span class="s1">'order_type_link'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$order_url</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div><h2 id="get-the-nid-from-a-url-alias"> <a aria-labelledby="get-the-nid-from-a-url-alias" class="anchor-heading" href="https://selwynpolit.github.io/d9book/links#get-the-nid-from-a-url-alias"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Get the NID from a URL Alias</h2><p>To get the nid for a node, you can pass the URL alias to getPathByAlias.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Given "/test-node, returns "/node/32".</span>
<span class="nv">$alias</span> <span class="o">=</span> <span class="s2">"/test-node"</span><span class="p">;</span>
<span class="nv">$path</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">service</span><span class="p">(</span><span class="s1">'path_alias.manager'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">getPathByAlias</span><span class="p">(</span><span class="nv">$alias</span><span class="p">);</span>
</code></pre></div></div><p>OR</p><p>If you have a URL for a node and you want its nid</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$route</span> <span class="o">=</span> <span class="nv">$url</span><span class="o">-&gt;</span><span class="nf">getRouteParameters</span><span class="p">();</span>
<span class="c1">// first check if it's a node.</span>
<span class="k">if</span> <span class="p">(</span><span class="k">isset</span><span class="p">(</span><span class="nv">$route</span><span class="p">[</span><span class="s1">'node'</span><span class="p">]))</span> <span class="p">{</span>
  <span class="nv">$nid</span> <span class="o">=</span> <span class="nv">$route</span><span class="p">[</span><span class="s2">"node"</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div></div><h2 id="get-the-taxonomy-term-id-from-a-url-alias"> <a aria-labelledby="get-the-taxonomy-term-id-from-a-url-alias" class="anchor-heading" href="https://selwynpolit.github.io/d9book/links#get-the-taxonomy-term-id-from-a-url-alias"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Get the Taxonomy Term ID from a URL alias</h2><p>Returns taxonomy/term/5</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$term_path_with_tid</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">service</span><span class="p">(</span><span class="s1">'path_alias.manager'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">getPathByAlias</span><span class="p">(</span><span class="s1">'/hunger-strike'</span><span class="p">);</span>
</code></pre></div></div><h2 id="get-url-alias-for-a-taxonomy-term"> <a aria-labelledby="get-url-alias-for-a-taxonomy-term" class="anchor-heading" href="https://selwynpolit.github.io/d9book/links#get-url-alias-for-a-taxonomy-term"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Get URL alias for a taxonomy term</h2><p>This returns term/5 if no alias is set, otherwise it returns the alias.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$term5_url</span> <span class="o">=</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromRoute</span><span class="p">(</span><span class="s1">'entity.taxonomy_term.canonical'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'taxonomy_term'</span> <span class="o">=&gt;</span> <span class="mi">5</span><span class="p">],</span> <span class="nv">$options</span><span class="p">);</span>
<span class="nv">$term5_alias</span> <span class="o">=</span> <span class="nv">$term5_url</span><span class="o">-&gt;</span><span class="nf">toString</span><span class="p">();</span>
</code></pre></div></div><h2 id="get-the-user-id-from-a-url-alias"> <a aria-labelledby="get-the-user-id-from-a-url-alias" class="anchor-heading" href="https://selwynpolit.github.io/d9book/links#get-the-user-id-from-a-url-alias"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Get the User ID from a URL alias</h2><p>Returns "/user/2"</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//User</span>
<span class="nv">$user_path_with_uid</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">service</span><span class="p">(</span><span class="s1">'path_alias.manager'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">getPathByAlias</span><span class="p">(</span><span class="s1">'/selwyn-the-chap'</span><span class="p">);</span>
</code></pre></div></div><h2 id="get-the-url-alias-for-a-node"> <a aria-labelledby="get-the-url-alias-for-a-node" class="anchor-heading" href="https://selwynpolit.github.io/d9book/links#get-the-url-alias-for-a-node"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Get the URL alias for a node</h2><p>If no alias is set, this will return "/node/32". Note. If there are multiple aliases, you will get the most recently created one.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$node_path</span> <span class="o">=</span> <span class="s1">'/node/32'</span><span class="p">;</span>
<span class="nv">$node32_alias</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">service</span><span class="p">(</span><span class="s1">'path_alias.manager'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">getAliasByPath</span><span class="p">(</span><span class="nv">$node_path</span><span class="p">);</span>
</code></pre></div></div><p>Use this code if you need the absolute URL . If node/32 has a URL alias set to "/test-node" it returns "https://d9book2.ddev.site/test-node" . If you specify <code class="language-plaintext highlighter-rouge">absolute =&gt; FALSE</code>, it returns "/test-node" .</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">use</span> <span class="nc">Drupal\Core\Url</span><span class="p">;</span>

<span class="c1">// Note. If a pathauto url alias is not set, it returns '/node/32'</span>
<span class="nv">$nid</span> <span class="o">=</span> <span class="mi">32</span><span class="p">;</span>
<span class="nv">$options</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'absolute'</span> <span class="o">=&gt;</span> <span class="kc">TRUE</span><span class="p">];</span> 
<span class="nv">$url</span> <span class="o">=</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromRoute</span><span class="p">(</span><span class="s1">'entity.node.canonical'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'node'</span> <span class="o">=&gt;</span> <span class="nv">$nid</span><span class="p">],</span> <span class="nv">$options</span><span class="p">);</span>
<span class="c1">// make a string</span>
<span class="nv">$url_string</span> <span class="o">=</span> <span class="nv">$url</span><span class="o">-&gt;</span><span class="nf">toString</span><span class="p">();</span> 
</code></pre></div></div><h2 id="create-a-node-alias"> <a aria-labelledby="create-a-node-alias" class="anchor-heading" href="https://selwynpolit.github.io/d9book/links#create-a-node-alias"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Create a Node Alias</h2><p>URL aliases are entities so you create them like you would any entity. Be sure to save() them.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$node_path</span> <span class="o">=</span> <span class="s2">"/node/32"</span><span class="p">;</span>
<span class="nv">$new_alias</span> <span class="o">=</span> <span class="s2">"/test-node"</span><span class="p">;</span>

<span class="cd">/** @var \Drupal\path_alias\PathAliasInterface $path_alias */</span>
<span class="nv">$my_node_alias</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">entityTypeManager</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">getStorage</span><span class="p">(</span><span class="s1">'path_alias'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">create</span><span class="p">([</span>
  <span class="s1">'path'</span> <span class="o">=&gt;</span> <span class="nv">$node_path</span><span class="p">,</span>
  <span class="s1">'alias'</span> <span class="o">=&gt;</span> <span class="nv">$new_alias</span><span class="p">,</span>
  <span class="s1">'langcode'</span> <span class="o">=&gt;</span> <span class="s1">'en'</span><span class="p">,</span>
<span class="p">]);</span>
<span class="nv">$my_node_alias</span><span class="o">-&gt;</span><span class="nf">save</span><span class="p">();</span>
</code></pre></div></div><h2 id="get-the-current-path"> <a aria-labelledby="get-the-current-path" class="anchor-heading" href="https://selwynpolit.github.io/d9book/links#get-the-current-path"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Get the current Path</h2><p>This returns the current relative path. For node pages, the return value will be in the form "/node/32" For taxonomy "taxonomy/term/5", for user "user/2" if it exists otherwise it will return the current request URI.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$currentPath</span>  <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">service</span><span class="p">(</span><span class="s1">'path.current'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">getPath</span><span class="p">();</span>
<span class="c1">// Or with alias and query string.</span>
<span class="nv">$alias</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">request</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">getRequestUri</span><span class="p">();</span>
<span class="c1">// Or </span>
<span class="nv">$url_string</span> <span class="o">=</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromRoute</span><span class="p">(</span><span class="s1">'&lt;current&gt;'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">toString</span><span class="p">();</span>
</code></pre></div></div><h2 id="get-current-nid-node-type-and-title"> <a aria-labelledby="get-current-nid-node-type-and-title" class="anchor-heading" href="https://selwynpolit.github.io/d9book/links#get-current-nid-node-type-and-title"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Get current nid, node type and title</h2><p>There are two ways to retrieve the current node – via the request or via the route</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$node</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">request</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">attributes</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s1">'node'</span><span class="p">);</span>
<span class="nv">$nid</span> <span class="o">=</span> <span class="nv">$node</span><span class="o">-&gt;</span><span class="nf">id</span><span class="p">();</span>
</code></pre></div></div><p>OR</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$node</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">routeMatch</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">getParameter</span><span class="p">(</span><span class="s1">'node'</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$node</span> <span class="k">instanceof</span> <span class="nc">\Drupal\node\NodeInterface</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// You can get nid and anything else you need from the node object.</span>
  <span class="nv">$nid</span> <span class="o">=</span> <span class="nv">$node</span><span class="o">-&gt;</span><span class="nf">id</span><span class="p">();</span>
  <span class="nv">$nodeType</span> <span class="o">=</span> <span class="nv">$node</span><span class="o">-&gt;</span><span class="nf">bundle</span><span class="p">();</span>
  <span class="nv">$nodeTitle</span> <span class="o">=</span> <span class="nv">$node</span><span class="o">-&gt;</span><span class="nf">getTitle</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div><p>If you need to use the node object in <code class="language-plaintext highlighter-rouge">hook_preprocess_page()</code> on the preview page, you need to use the "node_preview" parameter, instead of the "node" parameter:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">mymodule_preprocess_page</span><span class="p">(</span><span class="o">&amp;</span><span class="nv">$vars</span><span class="p">)</span> <span class="p">{</span>

  <span class="nv">$route_name</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">routeMatch</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">getRouteName</span><span class="p">();</span>

  <span class="k">if</span> <span class="p">(</span><span class="nv">$route_name</span> <span class="o">==</span> <span class="s1">'entity.node.canonical'</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$node</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">routeMatch</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">getParameter</span><span class="p">(</span><span class="s1">'node'</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">elseif</span> <span class="p">(</span><span class="nv">$route_name</span> <span class="o">==</span> <span class="s1">'entity.node.preview'</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$node</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">routeMatch</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">getParameter</span><span class="p">(</span><span class="s1">'node_preview'</span><span class="p">);</span>
  <span class="p">}</span>
</code></pre></div></div><p>And from <a href="https://drupal.stackexchange.com/questions/145823/how-do-i-get-the-current-node-id">https://drupal.stackexchange.com/questions/145823/how-do-i-get-the-current-node-id</a> when you are using or creating a custom block then you have to follow this code to get current node id. Not sure if it is correct</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">use</span> <span class="nc">Drupal\Core\Cache\Cache</span><span class="p">;</span>

<span class="nv">$node</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">routeMatch</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">getParameter</span><span class="p">(</span><span class="s1">'node'</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$node</span> <span class="k">instanceof</span> <span class="nc">\Drupal\node\NodeInterface</span><span class="p">)</span> <span class="p">{</span>
  <span class="nv">$nid</span> <span class="o">=</span> <span class="nv">$node</span><span class="o">-&gt;</span><span class="nf">id</span><span class="p">();</span>
<span class="p">}</span>

<span class="c1">// for cache</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">getCacheTags</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">//With this when your node changes your block will rebuild</span>
  <span class="k">if</span> <span class="p">(</span><span class="nv">$node</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">routeMatch</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">getParameter</span><span class="p">(</span><span class="s1">'node'</span><span class="p">))</span> <span class="p">{</span>
    <span class="c1">//if there is node add its cachetag</span>
    <span class="k">return</span> <span class="nc">Cache</span><span class="o">::</span><span class="nf">mergeTags</span><span class="p">(</span><span class="k">parent</span><span class="o">::</span><span class="nf">getCacheTags</span><span class="p">(),</span> <span class="p">[</span><span class="s1">'node:'</span> <span class="mf">.</span> <span class="nv">$node</span><span class="o">-&gt;</span><span class="nf">id</span><span class="p">()]);</span>
  <span class="p">}</span> 
  <span class="k">else</span> <span class="p">{</span>
    <span class="c1">//Return default tags instead.</span>
    <span class="k">return</span> <span class="k">parent</span><span class="o">::</span><span class="nf">getCacheTags</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">function</span> <span class="n">getCacheContexts</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">//if you depend on \Drupal::routeMatch()</span>
  <span class="c1">//you must set context of this block with 'route' context tag.</span>
  <span class="c1">//Every new route this block will rebuild</span>
  <span class="k">return</span> <span class="nc">Cache</span><span class="o">::</span><span class="nf">mergeContexts</span><span class="p">(</span><span class="k">parent</span><span class="o">::</span><span class="nf">getCacheContexts</span><span class="p">(),</span> <span class="p">[</span><span class="s1">'route'</span><span class="p">]);</span>
<span class="p">}</span>
</code></pre></div></div><h2 id="how-to-get-current-route-name"> <a aria-labelledby="how-to-get-current-route-name" class="anchor-heading" href="https://selwynpolit.github.io/d9book/links#how-to-get-current-route-name"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> How to get current Route name</h2><p>A Drupal route is returned in the form of a string e.g. view.files_browser.page_1</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$current_route</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">routeMatch</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">getRouteName</span><span class="p">();</span>
</code></pre></div></div><p>It returns "entity.node.canonical" for the nodes, "system.404" for the 404 pages, "entity.taxonomy_term.canonical" for the taxonomy pages, "entity.user.canonical" for the users and custom route name that we define in <code class="language-plaintext highlighter-rouge">modulename.routing.yml</code> file.</p><h2 id="get-current-document-root-path"> <a aria-labelledby="get-current-document-root-path" class="anchor-heading" href="https://selwynpolit.github.io/d9book/links#get-current-document-root-path"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Get current Document root path</h2><p>This will return the current document root path like "/var/www/html/project1".</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$image_path</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">service</span><span class="p">(</span><span class="s1">'file_system'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nb">realpath</span><span class="p">();</span>
</code></pre></div></div><h2 id="retrieve-url-argument-parameters"> <a aria-labelledby="retrieve-url-argument-parameters" class="anchor-heading" href="https://selwynpolit.github.io/d9book/links#retrieve-url-argument-parameters"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Retrieve URL argument parameters</h2><p>You can extract the url arguments with</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$current_path</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">service</span><span class="p">(</span><span class="s1">'path.current'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">getPath</span><span class="p">();</span>
<span class="nv">$path_args</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="nv">$current_path</span><span class="p">);</span>
<span class="nv">$term_name</span> <span class="o">=</span> <span class="nv">$path_args</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
</code></pre></div></div><p>For <a href="https://txg.ddev.site/newsroom/search/?country=1206">https://txg.ddev.site/newsroom/search/?country=1206</a></p><p><img alt="Image path arguments" src="https://selwynpolit.github.io/d9book/assets/images/media/image-path-args.png"/></p><h2 id="retrieve-query-and-get-or-post-parameters-_post-and-_get"> <a aria-labelledby="retrieve-query-and-get-or-post-parameters-_post-and-_get" class="anchor-heading" href="https://selwynpolit.github.io/d9book/links#retrieve-query-and-get-or-post-parameters-_post-and-_get"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Retrieve query and GET or POST parameters ($_POST and $_GET)</h2><p>For get variables</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$query</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">request</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">query</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s1">'name'</span><span class="p">);</span>
<span class="nv">$name</span>  <span class="o">=</span> <span class="nv">$_GET</span><span class="p">[</span><span class="s1">'abc'</span><span class="p">];</span>
</code></pre></div></div><p>For POST variables:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$name</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">request</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">request</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s1">'name'</span><span class="p">);</span>
<span class="c1">//or </span>
<span class="nv">$name</span>  <span class="o">=</span> <span class="nv">$_POST</span><span class="p">[</span><span class="s1">'abc'</span><span class="p">];</span>
</code></pre></div></div><p>For all items in a GET:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$query</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">request</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">query</span><span class="o">-&gt;</span><span class="nf">all</span><span class="p">();</span>
<span class="nv">$search_term</span> <span class="o">=</span> <span class="nv">$query</span><span class="p">[</span><span class="s1">'query'</span><span class="p">];</span>
<span class="nv">$collection</span> <span class="o">=</span> <span class="nv">$query</span><span class="p">[</span><span class="s1">'collection'</span><span class="p">];</span>
</code></pre></div></div><p>Be wary about caching. From <a href="https://drupal.stackexchange.com/questions/231953/get-in-drupal-8/231954#231954">https://drupal.stackexchange.com/questions/231953/get-in-drupal-8/231954#231954</a> the code provided only works the first time so it is important to add a ‘#cache’ context in the markup.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">namespace</span> <span class="nn">Drupal\newday\Controller</span><span class="p">;</span>

<span class="kn">use</span> <span class="nc">Drupal\Core\Controller\ControllerBase</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">NewdayController</span> <span class="kd">extends</span> <span class="nc">ControllerBase</span> <span class="p">{</span>
    <span class="k">public</span> <span class="k">function</span> <span class="n">new</span><span class="p">()</span> <span class="p">{</span>
      <span class="nv">$day</span><span class="o">=</span> <span class="p">[</span>
        <span class="s2">"#markup"</span> <span class="o">=&gt;</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">request</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">query</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s1">'id'</span><span class="p">),</span>
       <span class="p">];</span>
      <span class="k">return</span> <span class="nv">$day</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div><p>The request is being cached, you need to tell the system to vary by the query arguments:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$day</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">'#markup'</span> <span class="o">=&gt;</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">request</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">query</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s1">'id'</span><span class="p">),</span>
    <span class="s1">'#cache'</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">'contexts'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'url.query_args:id'</span><span class="p">],</span>
    <span class="p">],</span>
<span class="p">];</span>
</code></pre></div></div><p>More about caching render arrays: <a href="https://www.drupal.org/docs/8/api/render-api/cacheability-of-render-arrays">https://www.drupal.org/docs/8/api/render-api/cacheability-of-render-arrays</a></p><h2 id="modify-url-aliases-programmatically-with-hook_pathauto_alias_alter"> <a aria-labelledby="modify-url-aliases-programmatically-with-hook_pathauto_alias_alter" class="anchor-heading" href="https://selwynpolit.github.io/d9book/links#modify-url-aliases-programmatically-with-hook_pathauto_alias_alter"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Modify URL Aliases programmatically with hook_pathauto_alias_alter</h2><p>The <a href="https://www.drupal.org/project/pathauto">pathauto</a> contrib module includes a nice hook that you can use to modify url aliases on the fly.</p><p>You just do your necessary checks (the current entity is stored in <code class="language-plaintext highlighter-rouge">\context['data']</code>) and change the alias that is passed. Pathauto does the rest.</p><p>As implemented in a module file.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cd">/**
 * Implements hook_pathauto_alias_alter().
 *
 * Note. This function is a stopgap measure to handle pathauto
 * token failing to return the parent menu item alias.
 * Using the pattern:
 * [node:menu-link:parent:url:path]/[node:title]
 * never returns the parent alias for some inexplicable reason.
 * This works fine on a fresh Drupal 9 site. Much research
 * yielded no results so this function hijacks pathauto's
 * efforts to create the alias.  It checks for the presence
 * of the parent menu alias.
 * That parent alias is inserted in the path if it isn't found.
 * If the parent alias is correctly inserted, it should not impact
 * the correct functioning of pathauto and token.
 */</span>
<span class="k">function</span> <span class="n">dirt_pathauto_alias_alter</span><span class="p">(</span><span class="o">&amp;</span><span class="nv">$alias</span><span class="p">,</span> <span class="k">array</span> <span class="o">&amp;</span><span class="nv">$context</span><span class="p">)</span> <span class="p">{</span>

  <span class="c1">// Change the alias if it doesn't include the parent item.</span>
  <span class="cd">/** @var Drupal\pathauto\Entity\PathautoPattern $pattern*/</span>
  <span class="nv">$pattern</span> <span class="o">=</span> <span class="nv">$context</span><span class="p">[</span><span class="s2">"pattern"</span><span class="p">];</span>
  <span class="cm">/* The pattern will be something like this
   * [node:menu-link:parent:url:path]/[node:title]
   * so I could test for it
   * but it doesn't seem necessary.
   * Of course, if they change the pattern later this
   * pattern will overwrite it.
   *
   */</span>
  <span class="nv">$bundles</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'page'</span><span class="p">,</span> <span class="s1">'audience'</span><span class="p">,</span> <span class="s1">'overview'</span><span class="p">,</span> <span class="s1">'program_area'</span><span class="p">];</span>
  <span class="k">if</span> <span class="p">(</span><span class="nb">in_array</span><span class="p">(</span><span class="nv">$context</span><span class="p">[</span><span class="s2">"bundle"</span><span class="p">],</span> <span class="nv">$bundles</span><span class="p">))</span> <span class="p">{</span>
    <span class="nv">$op</span> <span class="o">=</span> <span class="nv">$context</span><span class="p">[</span><span class="s1">'op'</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">in_array</span><span class="p">(</span><span class="nv">$op</span><span class="p">,</span> <span class="p">[</span><span class="s1">'insert'</span><span class="p">,</span> <span class="s1">'update'</span><span class="p">,</span> <span class="s1">'bulkupdate'</span><span class="p">]))</span> <span class="p">{</span>
      <span class="nv">$parts</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="nv">$alias</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nb">count</span><span class="p">(</span><span class="nv">$parts</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nv">$parts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s2">""</span><span class="p">)</span> <span class="p">{</span>
          <span class="c1">//Missing the parent link.</span>
          <span class="nv">$id</span> <span class="o">=</span> <span class="nv">$pattern</span><span class="o">-&gt;</span><span class="nf">id</span><span class="p">();</span>
          <span class="c1">//Is this the default pathauto pattern?</span>
          <span class="k">if</span> <span class="p">(</span><span class="nv">$id</span> <span class="o">==</span> <span class="s2">"default"</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">//Is there a parent link?</span>
            <span class="nv">$nid</span> <span class="o">=</span> <span class="nv">$context</span><span class="p">[</span><span class="s2">"data"</span><span class="p">][</span><span class="s2">"node"</span><span class="p">]</span><span class="o">-&gt;</span><span class="nf">id</span><span class="p">();</span>
            <span class="nv">$parent_link</span> <span class="o">=</span> <span class="nf">_findParentMenuItem</span><span class="p">(</span><span class="nv">$nid</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nv">$parent_link</span><span class="p">)</span> <span class="p">{</span>
              <span class="nv">$parent_alias</span> <span class="o">=</span> <span class="nv">$parent_link</span><span class="p">[</span><span class="s1">'#url'</span><span class="p">]</span><span class="o">-&gt;</span><span class="nf">toString</span><span class="p">();</span>
              <span class="c1">//Update the alias to include the parent alias.</span>
              <span class="k">if</span> <span class="p">(</span><span class="nv">$parent_alias</span><span class="p">)</span> <span class="p">{</span>
                <span class="nv">$alias</span> <span class="o">=</span> <span class="nv">$parent_alias</span> <span class="mf">.</span> <span class="nv">$alias</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div><p>Also see an example at <a href="https://makedrupaleasy.com/articles/drupal-version-7-9-how-update-alias-programmatically-using-value-field">https://makedrupaleasy.com/articles/drupal-version-7-9-how-update-alias-programmatically-using-value-field</a></p><h2 id="drupal-l-is-deprecated"> <a aria-labelledby="drupal-l-is-deprecated" class="anchor-heading" href="https://selwynpolit.github.io/d9book/links#drupal-l-is-deprecated"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Drupal l() is deprecated</h2><p class="label label-red">Deprecated</p><p>The l() method (lower case letter L) was a convenience wrapper for the link generator service’s generate() method. So do this instead:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">use</span> <span class="nc">Drupal\Core\Url</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Drupal\Core\Link</span><span class="p">;</span>

<span class="nv">$url</span> <span class="o">=</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromRoute</span><span class="p">(</span><span class="s1">'entity.node.edit_form'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'node'</span> <span class="o">=&gt;</span> <span class="no">NID</span><span class="p">]);</span>
<span class="nv">$project_link</span> <span class="o">=</span> <span class="nc">Link</span><span class="o">::</span><span class="nf">fromTextAndUrl</span><span class="p">(</span><span class="nf">t</span><span class="p">(</span><span class="s1">'Open Project'</span><span class="p">),</span> <span class="nv">$url</span><span class="p">);</span>
<span class="nv">$project_link</span> <span class="o">=</span> <span class="nv">$project_link</span><span class="o">-&gt;</span><span class="nf">toRenderable</span><span class="p">();</span>
<span class="c1">// If you need some attributes.</span>
<span class="nv">$project_link</span><span class="p">[</span><span class="s1">'#attributes'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'class'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'button'</span><span class="p">,</span> <span class="s1">'button-action'</span><span class="p">,</span> <span class="s1">'button--primary'</span><span class="p">,</span> <span class="s1">'button--small'</span><span class="p">]];</span>
<span class="k">print</span> <span class="nf">render</span><span class="p">(</span><span class="nv">$project_link</span><span class="p">);</span>
</code></pre></div></div><h2 id="reference-links"> <a aria-labelledby="reference-links" class="anchor-heading" href="https://selwynpolit.github.io/d9book/links#reference-links"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Reference links</h2><ul><li><a href="https://agaric.coop/blog/creating-links-code-drupal-8">Good reference from 2017 for creating links in Drupal</a><li><a href="https://www.hashbangcode.com/article/drupal-9-programmatically-creating-and-using-urls-and-links">#! code: Drupal 9: Programmatically Creating And Using URLs And Links, March 2022</a></li></li></ul><hr/> <script async="" crossorigin="anonymous" data-category="Q&amp;A" data-category-id="MDE4OkRpc2N1c3Npb25DYXRlZ29yeTMyMjY2NDE4" data-emit-metadata="0" data-input-position="bottom" data-lang="en" data-mapping="title" data-reactions-enabled="1" data-repo="selwynpolit/d9book" data-repo-id="MDEwOlJlcG9zaXRvcnkzMjUxNTQ1Nzg=" data-strict="0" data-theme="preferred_color_scheme" src="https://giscus.app/client.js"> </script><hr/><footer><p><a href="https://selwynpolit.github.io/d9book/links#top" id="back-to-top">Back to top</a></p><p class="text-small text-grey-dk-100 mb-0"><span xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/"> <a href="http://www.selwynpolit.github.io/d9book" property="dct:title" rel="cc:attributionURL">Drupal at your fingertips</a> by <a href="http://www.drupal.org/u/selwynpolit" property="cc:attributionName" rel="cc:attributionURL dct:creator">Selwyn Polit</a> is licensed under <a href="http://creativecommons.org/licenses/by/4.0/" rel="license noopener noreferrer" target="_blank">CC BY 4.0 <img src="https://mirrors.creativecommons.org/presskit/icons/cc.svg" style="height:16px!important;vertical-align:text-bottom;"/> <img src="https://mirrors.creativecommons.org/presskit/icons/by.svg" style="height:16px!important;vertical-align:text-bottom;"/> </a></span></p><div class="d-flex mt-2"><p class="text-small text-grey-dk-000 mb-0 mr-2"> Page last modified: <span class="d-inline-block">Jul 23 2023</span>.</p><p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/selwynpolit/d9book/tree/gh-pages/book/links.md" id="edit-this-page">Edit this page on GitHub</a></p></div></footer></div></div><div class="search-overlay"></div></div>
</body></link></meta></meta></meta></head></html>