<!DOCTYPE html>
<html lang="en-US"><head><meta charset="utf-8"/><meta content="IE=Edge" http-equiv="X-UA-Compatible"/><link href="https://selwynpolit.github.io/d9book/assets/css/just-the-docs-default.css" rel="stylesheet"/> <script async="" src="https://www.googletagmanager.com/gtag/js?id=8V22RQEJ71"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', '8V22RQEJ71', { 'anonymize_ip': true }); </script> <script src="https://selwynpolit.github.io/d9book/assets/js/vendor/lunr.min.js"></script> <script src="https://selwynpolit.github.io/d9book/assets/js/just-the-docs.js"></script><meta content="width=device-width, initial-scale=1" name="viewport"/><link href="https://selwynpolit.github.io/d9book/assets/images/favicon.ico" rel="icon" type="image/x-icon"/><title>Config | Drupal Book</title><meta content="Jekyll v4.3.2" name="generator"><meta content="Config" property="og:title"><meta content="en_US" property="og:locale"><meta content="Drupal at your fingertips" name="description"/><meta content="Drupal at your fingertips" property="og:description"/><link href="https://selwynpolit.github.io/d9book/d9book/config" rel="canonical"><meta content="https://selwynpolit.github.io/d9book/d9book/config" property="og:url"/><meta content="Drupal Book" property="og:site_name"/><meta content="website" property="og:type"/><meta content="summary" name="twitter:card"/><meta content="Config" property="twitter:title"/> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Drupal at your fingertips","headline":"Config","url":"https://selwynpolit.github.io/d9book/d9book/config"}</script><body> <a class="skip-to-main" href="https://selwynpolit.github.io/d9book/config#main-content">Skip to main content</a> <svg class="d-none" xmlns="http://www.w3.org/2000/svg"> <symbol id="svg-link" viewbox="0 0 24 24"><title>Link</title><svg class="feather feather-link" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewbox="0 0 24 24"><title>Menu</title><svg class="feather feather-menu" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><line x1="3" x2="21" y1="12" y2="12"></line><line x1="3" x2="21" y1="6" y2="6"></line><line x1="3" x2="21" y1="18" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewbox="0 0 24 24"><title>Expand</title><svg class="feather feather-chevron-right" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol class="feather feather-external-link" fill="none" height="24" id="svg-external-link" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24"><title id="svg-external-link-title">(external link)</title><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" x2="21" y1="14" y2="3"></line> </symbol> <symbol id="svg-doc" viewbox="0 0 24 24"><title>Document</title><svg class="feather feather-file" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewbox="0 0 24 24"><title>Search</title><svg class="feather feather-search" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"> <circle cx="11" cy="11" r="8"></circle><line x1="21" x2="16.65" y1="21" y2="16.65"></line> </svg> </symbol> <symbol id="svg-copy" viewbox="0 0 16 16"><title>Copy</title><svg class="bi bi-clipboard" fill="currentColor" height="16" viewbox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"></path><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"></path> </svg> </symbol> <symbol id="svg-copied" viewbox="0 0 16 16"><title>Copied</title><svg class="bi bi-clipboard-check-fill" fill="currentColor" height="16" viewbox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"></path><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"></path> </svg> </symbol> </svg><div class="side-bar"><div class="site-header"> <a class="site-title lh-tight" href="https://selwynpolit.github.io/d9book/"> Drupal Book </a> <a class="site-button" href="https://selwynpolit.github.io/d9book/config" id="menu-button"> <svg class="icon" viewbox="0 0 24 24"><use xlink:href="#svg-menu"></use></svg> </a></div><nav aria-label="Main" class="site-nav" id="site-nav"><ul class="nav-list"><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/">Home</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/actions">Actions</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/attribution">Attribution</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/bq">Batch and Queue</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/blocks">Blocks</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/caching">Caching</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/composer">Composer</a><li class="nav-list-item active"><a class="nav-list-link active" href="https://selwynpolit.github.io/d9book/config">Config</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/cron">Cron</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/dates">Dates and Times</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/debugging">Debugging</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/development">Development</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/drush">Drush</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/email">Email</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/entities">Entities</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/forms">Forms</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/general">General</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/off-island">Getting off the Island</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/hooks">Hooks</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/learn">Learning</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/links">Links</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/logging">Logging</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/menus">Menus</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/migrate">Migrate</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/modals">Modals</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/nodes-and-fields">Nodes and Fields</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/queries">Queries</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/redirects">Redirects</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/render">Render Arrays</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/routes">Routes</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/security">Security</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/services">Services</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/state">State</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/taxonomy">Taxonomy</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/dtt">Tests</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/twig">Twig</a></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></ul><ul class="nav-list"><li class="nav-list-item external"> <a class="nav-list-link external" href="https://github.com/selwynpolit/d9book/fork"> Fork me on GitHub <svg aria-labelledby="svg-external-link-title" viewbox="0 0 24 24"><use xlink:href="#svg-external-link"></use></svg> </a></li></ul></nav><footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</footer></div><div class="main" id="top"><div class="main-header" id="main-header"><div class="search"><div class="search-input-wrap"> <input aria-label="Search Drupal Book" autocomplete="off" class="search-input" id="search-input" placeholder="Search Drupal Book" tabindex="0" type="text"/> <label class="search-label" for="search-input"><svg class="search-icon" viewbox="0 0 24 24"><use xlink:href="#svg-search"></use></svg></label></div><div class="search-results" id="search-results"></div></div><nav aria-label="Auxiliary" class="aux-nav"><ul class="aux-nav-list"><li class="aux-nav-list-item"> <a class="site-button" href="https://twitter.com/selwynpolit" rel="noopener noreferrer" target="_blank"> <img alt="Twitter logo" src="https://atuin.ru/demo/simple-icons/icons/twitter.svg" style="width: 30px; height: 30px;" title="Author in Twitter"/> </a><li class="aux-nav-list-item"> <a class="site-button" href="https://github.com/selwynpolit/d9book/tree/gh-pages" rel="noopener noreferrer" target="_blank"> <img alt="GitHub logo" src="https://atuin.ru/demo/simple-icons/icons/github.svg" style="width: 30px; height: 30px;" title="D9Book on GitHub"/> </a></li></li></ul></nav></div><div class="main-content-wrap" id="main-content-wrap"><div class="main-content" id="main-content" role="main"><h1 class="no_toc fw-500" id="configuration-and-settings"> <a aria-labelledby="configuration-and-settings" class="anchor-heading" href="https://selwynpolit.github.io/d9book/config#configuration-and-settings"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Configuration and Settings</h1><h2 class="no_toc text-delta" id="table-of-contents"> <a aria-labelledby="table-of-contents" class="anchor-heading" href="https://selwynpolit.github.io/d9book/config#table-of-contents"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Table of contents</h2><ul id="markdown-toc"><li><a href="https://selwynpolit.github.io/d9book/config#load-some-config" id="markdown-toc-load-some-config">Load some config</a><li><a href="https://selwynpolit.github.io/d9book/config#views" id="markdown-toc-views">Views</a><li><a href="https://selwynpolit.github.io/d9book/config#add-config-to-an-existing-module" id="markdown-toc-add-config-to-an-existing-module">Add config to an existing module</a><li><a href="https://selwynpolit.github.io/d9book/config#import-something-you-changed-in-your-module" id="markdown-toc-import-something-you-changed-in-your-module">Import something you changed in your module</a><li><a href="https://selwynpolit.github.io/d9book/config#config-storage-in-the-database" id="markdown-toc-config-storage-in-the-database">Config Storage in the database</a><li><a href="https://selwynpolit.github.io/d9book/config#add-some-config-to-site-config-form" id="markdown-toc-add-some-config-to-site-config-form">Add some config to site config form</a><li><a href="https://selwynpolit.github.io/d9book/config#override-config-in-settingsphp" id="markdown-toc-override-config-in-settingsphp">Override config in settings.php</a><li><a href="https://selwynpolit.github.io/d9book/config#setup-a-testing-variable-in-config-for-a-project" id="markdown-toc-setup-a-testing-variable-in-config-for-a-project">Setup a testing variable in config for a project</a><li><a href="https://selwynpolit.github.io/d9book/config#getting-and-setting-configuration-with-drush" id="markdown-toc-getting-and-setting-configuration-with-drush">Getting and setting configuration with drush</a><li><a href="https://selwynpolit.github.io/d9book/config#creating-a-module-allowing-users-to-editupdate-some-config" id="markdown-toc-creating-a-module-allowing-users-to-editupdate-some-config">Creating a module allowing users to edit/update some config</a><li><a href="https://selwynpolit.github.io/d9book/config#drush-config-commands" id="markdown-toc-drush-config-commands">Drush config commands</a><ul><li><a href="https://selwynpolit.github.io/d9book/config#view-config" id="markdown-toc-view-config">View config</a><li><a href="https://selwynpolit.github.io/d9book/config#viewing-overridden-config-values" id="markdown-toc-viewing-overridden-config-values">Viewing overridden config values</a><li><a href="https://selwynpolit.github.io/d9book/config#delete-from-config" id="markdown-toc-delete-from-config">Delete from config</a><li><a href="https://selwynpolit.github.io/d9book/config#check-what-has-changed-with-configstatus" id="markdown-toc-check-what-has-changed-with-configstatus">Check what has changed with config:status</a><li><a href="https://selwynpolit.github.io/d9book/config#export-entire-config" id="markdown-toc-export-entire-config">Export entire config</a><li><a href="https://selwynpolit.github.io/d9book/config#import-config-changes" id="markdown-toc-import-config-changes">Import config changes</a></li></li></li></li></li></li></ul></li></li></li></li></li></li></li></li></li></li></li></ul><p><img alt="views" src="https://api.visitor.plantree.me/visitor-badge/pv?label=views&amp;color=informational&amp;namespace=d9book&amp;key=config.md"/></p><hr/><p>Config is stored in yml files so it can be checked into git. It is loaded into the config table of the database for performance. Use <code class="language-plaintext highlighter-rouge">drush config-import</code> (or <code class="language-plaintext highlighter-rouge">drush cim</code>) for this purpose. Config includes database table definitions, views definitions and lots more. You can even use config to store a little setting indicating your site is in a <code class="language-plaintext highlighter-rouge">test</code> mode which can trigger displaying some useful information that only you can see.</p><p>Config files should be stored in a non-web accessible directory and specified in settings.php e.g.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$settings</span><span class="p">[</span><span class="s1">'config_sync_directory'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'../config/sync'</span><span class="p">;</span>
</code></pre></div></div><p><a href="https://www.drupal.org/docs/creating-custom-modules/defining-and-using-your-own-configuration-in-drupal">More about Defining and using your own configuration in Drupal</a></p><h2 id="load-some-config"> <a aria-labelledby="load-some-config" class="anchor-heading" href="https://selwynpolit.github.io/d9book/config#load-some-config"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Load some config</h2><p>This example shows how to load a rest endpoint from config. This is very similar to Drupal 7 <code class="language-plaintext highlighter-rouge">variable_get()</code>.</p><p>Use the Configuration API main entry point <code class="language-plaintext highlighter-rouge">\Drupal::config()</code> to load the config item and then use <code class="language-plaintext highlighter-rouge">get()</code> to retrieve the value you want. Config can have multiple values in a single yml file.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$pizzaEndpoint</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">config</span><span class="p">(</span><span class="s1">'pizza_academy_core.pbx.rest.endpoint'</span><span class="p">);</span>
<span class="nv">$pizza_service_url</span> <span class="o">=</span> <span class="nv">$pizzaEndpoint</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s1">'pizza_rest_endpoint'</span><span class="p">)</span><span class="mf">.</span><span class="nv">$reg_id</span><span class="p">;</span>
</code></pre></div></div><p>When you export the config, this information is stored in a file called <code class="language-plaintext highlighter-rouge">pizza_academy_core.pbx.rest.endpoint.yml</code> with a key <code class="language-plaintext highlighter-rouge">pizza_rest_endpoint</code>.</p><p>The contents of the file are simply:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>pizza_rest_endpoint: 'https://pbx.pizza.com/pbx-profile-service/'
</code></pre></div></div><p>You’ll find this in a file in the config sync directory specified in <code class="language-plaintext highlighter-rouge">settings.php</code> e.g.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>config/sync/pizza_academy_core.pbx.rest.endpoint.yml
</code></pre></div></div><p>The config sync directory location is specified in <code class="language-plaintext highlighter-rouge">settings.php</code> like this</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$settings</span><span class="p">[</span><span class="s1">'config_sync_directory'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'../config/sync'</span><span class="p">;</span>
</code></pre></div></div><p><a href="https://www.drupal.org/docs/creating-custom-modules/defining-and-using-your-own-configuration-in-drupal">More on creating custom modules: Using your own configuration</a></p><p><a href="https://api.drupal.org/api/drupal/core%21lib%21Drupal.php/function/Drupal%3A%3Aconfig/9.2.x">Drupal::config API Reference</a></p><p>You can override config items in a <code class="language-plaintext highlighter-rouge">settings.php</code> or <code class="language-plaintext highlighter-rouge">local.settings.php</code> using the <code class="language-plaintext highlighter-rouge">$config</code> global variable.</p><h2 id="views"> <a aria-labelledby="views" class="anchor-heading" href="https://selwynpolit.github.io/d9book/config#views"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Views</h2><p>For views, the config filenames are be in the form <code class="language-plaintext highlighter-rouge">views.view.infofeeds</code> for a view called <code class="language-plaintext highlighter-rouge">infofeeds</code>.</p><h2 id="add-config-to-an-existing-module"> <a aria-labelledby="add-config-to-an-existing-module" class="anchor-heading" href="https://selwynpolit.github.io/d9book/config#add-config-to-an-existing-module"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Add config to an existing module</h2><p>You simply create a yml file in the module’s <code class="language-plaintext highlighter-rouge">/config/install</code> directory.</p><p>The config file should start with the module name then a period and the thing you want to store the config about. So <code class="language-plaintext highlighter-rouge">modulename.something.yml</code> e.g. <code class="language-plaintext highlighter-rouge">dir_salesforce.cron.yml</code> for cron information, <code class="language-plaintext highlighter-rouge">dir.funnelback.yml</code> for funnelback information or <code class="language-plaintext highlighter-rouge">tea_teks_spr.testing.yml</code> for testing information.</p><p>If the module name is pizza_academy_core and the thing I want to store config about is the pbxpath, I would create a file called <code class="language-plaintext highlighter-rouge">pizza_academy_core.pbxpath.yml</code>.</p><p>The yml filename is passed as a parameter into <code class="language-plaintext highlighter-rouge">\Drupal::config('...')</code> without the <code class="language-plaintext highlighter-rouge">.yml</code> extension. e.g. if the filename is <code class="language-plaintext highlighter-rouge">danamod.header_footer_settings.yml</code> then use:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$config</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">config</span><span class="p">(</span><span class="s1">'danamod.header_footer_settings'</span><span class="p">);</span>
</code></pre></div></div><p>Here we add some configuration to a module called pizza_academy_core:</p><p>In docroot/modules/custom/pizza_academy_core/config/install/pizza_academy_core.pbxpath.yml</p><p>We have a file with the contents:</p><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">url</span><span class="pi">:</span> <span class="s1">'</span><span class="s">https://pbx.pizza.com/'</span>
<span class="na">langcode</span><span class="pi">:</span> <span class="s1">'</span><span class="s">en'</span>
</code></pre></div></div><p>You can copy it to the <code class="language-plaintext highlighter-rouge">config/sync</code> directory, manually paste the contents into the config Drupal u/i or import it into the db with drush. The drush way is the easiest in my opinion.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>drush config-import --source=modules/custom/pizza_academy_core/config/install/ --partial -y
</code></pre></div></div><p>Then you can access it from a controller at <code class="language-plaintext highlighter-rouge">docroot/modules/custom/pizza_academy_core/src/Controller/VerifyCertificationPage.php</code> using the following code:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$pbx_path_config</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">config</span><span class="p">(</span><span class="s1">'pizza_academy_core.pbxpath'</span><span class="p">);</span>
<span class="nv">$pbx_path</span> <span class="o">=</span> <span class="nv">$pbx_path_config</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s1">'url'</span><span class="p">);</span>
<span class="nv">$pbx_achievements_url</span> <span class="o">=</span> <span class="nv">$pbx_path</span> <span class="mf">.</span> <span class="s2">"achievements?regid="</span><span class="mf">.</span><span class="nv">$reg_id</span><span class="p">;</span>
</code></pre></div></div><p>Once you grab the url, you can use it later in your code.</p><h2 id="import-something-you-changed-in-your-module"> <a aria-labelledby="import-something-you-changed-in-your-module" class="anchor-heading" href="https://selwynpolit.github.io/d9book/config#import-something-you-changed-in-your-module"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Import something you changed in your module</h2><p>During module development, you might find you want to add some configuration. This is very useful as part of that workflow.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>drush @dev2 config-import --source=modules/migrate/test1/config/install/ --partial -y
</code></pre></div></div><p>Note. the @dev2 is a site alias. See <a href="https://www.drush.org/latest/site-aliases/">Drush alias docs for more info</a>. These are sooo useful.</p><h2 id="config-storage-in-the-database"> <a aria-labelledby="config-storage-in-the-database" class="anchor-heading" href="https://selwynpolit.github.io/d9book/config#config-storage-in-the-database"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Config Storage in the database</h2><p>Config is also kept in the config table of the database.</p><p>The name field stores the config id e.g. views.view.infofeeds (the definition of a view called infofeeds)</p><p>The data field stores the stuff in the config serialized into a blob</p><h2 id="add-some-config-to-site-config-form"> <a aria-labelledby="add-some-config-to-site-config-form" class="anchor-heading" href="https://selwynpolit.github.io/d9book/config#add-some-config-to-site-config-form"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Add some config to site config form</h2><p>Here we add a phone number to the site config. This is put in a <code class="language-plaintext highlighter-rouge">.module</code> file.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">use</span> <span class="nc">Drupal\Core\Form\FormStateInterface</span><span class="p">;</span>
<span class="cd">/**
 * Implements hook_form_FORM_ID_alter().
 */</span>
<span class="k">function</span> <span class="n">mymodule_form_system_site_information_settings_alter</span><span class="p">(</span><span class="o">&amp;</span><span class="nv">$form</span><span class="p">,</span> <span class="nc">FormStateInterface</span> <span class="nv">$form_state</span><span class="p">)</span> <span class="p">{</span>

  <span class="nv">$form</span><span class="p">[</span><span class="s1">'site_phone'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">'#type'</span> <span class="o">=&gt;</span> <span class="s1">'tel'</span><span class="p">,</span>
    <span class="s1">'#title'</span> <span class="o">=&gt;</span> <span class="nf">t</span><span class="p">(</span><span class="s1">'Site phone'</span><span class="p">),</span>
    <span class="s1">'#default_value'</span> <span class="o">=&gt;</span>
      <span class="nc">Drupal</span><span class="o">::</span><span class="nf">config</span><span class="p">(</span><span class="s1">'system.site'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s1">'phone'</span><span class="p">),</span>
  <span class="p">];</span>

  <span class="nv">$form</span><span class="p">[</span><span class="s1">'#submit'</span><span class="p">][]</span> <span class="o">=</span> <span class="s1">'mymodule_system_site_information_phone_submit'</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div><p>The <code class="language-plaintext highlighter-rouge">$form['#submit']</code> modification adds our callback to the form's submit handlers. This allows our module to interact with the form once it has been submitted. The <code class="language-plaintext highlighter-rouge">mymodule_system_site_information_phone_submit</code> callback is passed the form array and form state. We load the current configuration factory to receive the configuration that can be edited. We then <code class="language-plaintext highlighter-rouge">load system.site</code> and save phone based on the value from the form state.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">mymodule_system_site_information_phone_submit</span><span class="p">(</span><span class="kt">array</span> <span class="o">&amp;</span><span class="nv">$form</span><span class="p">,</span>  <span class="kt">FormStateInterface</span> <span class="nv">$form_state</span><span class="p">)</span> <span class="p">{</span>
  <span class="nv">$config</span> <span class="o">=</span> <span class="nc">Drupal</span><span class="o">::</span><span class="nf">configFactory</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">getEditable</span><span class="p">(</span><span class="s1">'system.site'</span><span class="p">);</span>
  <span class="nv">$config</span><span class="o">-&gt;</span><span class="nf">set</span><span class="p">(</span><span class="s1">'phone'</span><span class="p">,</span> <span class="nv">$form_state</span><span class="o">-&gt;</span><span class="nf">getValue</span><span class="p">(</span><span class="s1">'site_phone'</span><span class="p">))</span>
    <span class="o">-&gt;</span><span class="nf">save</span><span class="p">();</span>
<span class="p">}</span>
</code></pre></div></div><p>Don’t forget there is a <a href="https://www.drupal.org/project/config_pages">module called config pages</a> which might save you some coding if you need to add some config to a site.</p><h2 id="override-config-in-settingsphp"> <a aria-labelledby="override-config-in-settingsphp" class="anchor-heading" href="https://selwynpolit.github.io/d9book/config#override-config-in-settingsphp"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Override config in settings.php</h2><p>This can be useful for local development environment (where you might put these changes into settings.local.php) or on each one of your servers where you might need some configuration to be slightly different. e.g. dev/test/prod.</p><p>Drupal 9 allows global <code class="language-plaintext highlighter-rouge">$config</code> overrides (similar to drupal 7) The configuration system integrates these override values via the <code class="language-plaintext highlighter-rouge">Drupal\Core\Config\ConfigFactory::get()</code> implementation. When you retrieve a value from configuration, the global $config variable gets a chance to change the returned value:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Get system site maintenance message text. This value may be overriden by</span>
<span class="c1">// default from global $config (as well as translations).</span>
<span class="nv">$message</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">config</span><span class="p">(</span><span class="s1">'system.maintenance'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s1">'message'</span><span class="p">);</span>
</code></pre></div></div><p>To override configuration values in global <code class="language-plaintext highlighter-rouge">$config</code> in settings.php, use a line like this (which references the configuration keys:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$config</span><span class="p">[</span><span class="s1">'system.maintenance'</span><span class="p">][</span><span class="s1">'message'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'Sorry, our site is down now.'</span><span class="p">;</span>
</code></pre></div></div><p>For nested values, use nested array keys</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$config</span><span class="p">[</span><span class="s1">'system.performance'</span><span class="p">][</span><span class="s1">'css'</span><span class="p">][</span><span class="s1">'preprocess'</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</code></pre></div></div><p>If you have a configuration change, for example, you have enabled google tag manager. When you export the config <code class="language-plaintext highlighter-rouge">drush cex -y</code> and <code class="language-plaintext highlighter-rouge">git diff</code> to see what changed in config, you’ll see (in the last 2 lines) that status is changed from true to false.</p><div class="language-diff highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ git diff
<span class="err">
</span><span class="gh">diff --git a/config/sync/google_tag.container.default.yml b/config/sync/google_tag.container.default.yml
index 39e498c99..375bfb8af 100644
</span><span class="gd">--- a/config/sync/google_tag.container.default.yml
</span><span class="gi">+++ b/config/sync/google_tag.container.default.yml
</span><span class="p">@@ -1,6 +1,6 @@</span>
 uuid: 5919bbb9-95e3-4d8b-88c8-030e6a58ec6c
 langcode: en
<span class="gd">-status: false
</span><span class="gi">+status: true
</span></code></pre></div></div><p>To put this in <code class="language-plaintext highlighter-rouge">settings.php</code> or <code class="language-plaintext highlighter-rouge">settings.local.php</code>, add a line and set the value to true or false:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$config</span><span class="p">[</span><span class="s1">'google_tag.container.default'</span><span class="p">][</span><span class="s1">'status'</span><span class="p">]</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</code></pre></div></div><h2 id="setup-a-testing-variable-in-config-for-a-project"> <a aria-labelledby="setup-a-testing-variable-in-config-for-a-project" class="anchor-heading" href="https://selwynpolit.github.io/d9book/config#setup-a-testing-variable-in-config-for-a-project"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Setup a testing variable in config for a project</h2><p>First create the yml file in your <code class="language-plaintext highlighter-rouge">module/config/install</code> e.g. <code class="language-plaintext highlighter-rouge">tea_teks_srp.testing.yml</code> with this as the contents:</p><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">test_mode</span><span class="pi">:</span> <span class="s">FALSE</span>
</code></pre></div></div><p>This will be the default state of the app</p><p>In the Drupal U/I under config, devel, configuration synchronization, import, single item i.e. at <code class="language-plaintext highlighter-rouge">/admin/config/development/configuration/single/import</code> select <code class="language-plaintext highlighter-rouge">simple configuration</code>. In the configuration name field, put <code class="language-plaintext highlighter-rouge">tea_teks_srp.testing</code>.</p><p>Paste in the text of the file</p><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">test_mode</span><span class="pi">:</span> <span class="s">FALSE</span>
</code></pre></div></div><p>and import. This will load the new value into the database.</p><p>Then in your <code class="language-plaintext highlighter-rouge">docroot/sites/default/settings.local.php</code> (to enable testing features) add</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$config</span><span class="p">[</span><span class="s1">'tea_teks_srp.testing'</span><span class="p">][</span><span class="s1">'test_mode'</span><span class="p">]</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">;</span>
</code></pre></div></div><p>This will override your config you added above so test_mode is true.</p><p>Then to use the test_mode, you can load it into a controller class (or form class) from the config (and the value in the <code class="language-plaintext highlighter-rouge">settings.local.php</code> will override the default) with the following:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$test_mode</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">config</span><span class="p">(</span><span class="s1">'tea_teks_srp.testing'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s1">'test_mode'</span><span class="p">);</span>
</code></pre></div></div><p>And then just use the <code class="language-plaintext highlighter-rouge">$test_mode</code> variable as needed e.g.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="n">test_mode</span><span class="p">)</span> <span class="p">{</span>
  <span class="nv">$value</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">t</span><span class="p">(</span><span class="s2">"Reject Citation </span><span class="nv">$citation_nid</span><span class="s2">"</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div><h2 id="getting-and-setting-configuration-with-drush"> <a aria-labelledby="getting-and-setting-configuration-with-drush" class="anchor-heading" href="https://selwynpolit.github.io/d9book/config#getting-and-setting-configuration-with-drush"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Getting and setting configuration with drush</h2><p>Here we are fiddling with the shield module settings</p><p>In config, synchronize, we see an item: <code class="language-plaintext highlighter-rouge">shield.settings</code></p><p>So we can load it with drush:</p><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">$ drush cget shield.settings</span>
<span class="na">credential_provider</span><span class="pi">:</span> <span class="s">shield</span>
<span class="na">credentials</span><span class="pi">:</span>
  <span class="na">shield</span><span class="pi">:</span>
    <span class="na">user</span><span class="pi">:</span> <span class="s">nistor</span>
    <span class="na">pass</span><span class="pi">:</span> <span class="s">blahblah</span>
<span class="na">print</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Please</span><span class="nv"> </span><span class="s">provide</span><span class="nv"> </span><span class="s">credentials</span><span class="nv"> </span><span class="s">for</span><span class="nv"> </span><span class="s">access.'</span>
<span class="na">allow_cli</span><span class="pi">:</span> <span class="kc">true</span>
<span class="na">_core</span><span class="pi">:</span>
  <span class="na">default_config_hash</span><span class="pi">:</span> <span class="s">c1dcnGFTXFeMq2-Z8e7H6Qxp6TTJe-ZhSA126E3bQJ4</span>
</code></pre></div></div><p>Drilling down deeper, let’s say we want to view the credentials section. Notice that drush requires a space instead of a colon:</p><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">$ drush cget shield.settings credentials</span>
<span class="s1">'</span><span class="s">shield.settings:credentials'</span><span class="err">:</span>
  <span class="na">shield</span><span class="pi">:</span>
    <span class="na">user</span><span class="pi">:</span> <span class="s">nisor</span>
    <span class="na">pass</span><span class="pi">:</span> <span class="s">blahblah</span>
</code></pre></div></div><p>Now to get down to the user name and password. And we are adding period back in. Huh?</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>drush cget shield.settings credentials.shield
<span class="s1">'shield.settings:credentials.shield'</span>:
    user: nisor
    pass: blahblah
</code></pre></div></div><p>and finally:</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>drush cget shield.settings credentials.shield.pass
<span class="s1">'shield.settings:credentials.shield.pass'</span>: blahblah
</code></pre></div></div><p>So if you want to <strong>set</strong> these:</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>drush cset shield.settings credentials.shield.pass yomama

Do you want to update credentials.shield.pass key <span class="k">in </span>shield.settings
config? <span class="o">(</span>y/n<span class="o">)</span>: y
</code></pre></div></div><p>And</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>drush cset shield.settings credentials.shield.user fred

Do you want to update credentials.shield.pass key <span class="k">in </span>shield.settings
config? <span class="o">(</span>y/n<span class="o">)</span>: y
</code></pre></div></div><p>And there is that message</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>drush cget shield.settings print
<span class="s1">'shield.settings:print'</span>: <span class="s1">'Please provide credentials for access.'</span>
</code></pre></div></div><p>And so</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>drush cset <span class="nt">-y</span> shield.settings print <span class="s2">"Credentials or I won't let you in"</span>
</code></pre></div></div><p>and while we’re here, we could always put these into the <code class="language-plaintext highlighter-rouge">$config</code> object via <code class="language-plaintext highlighter-rouge">settings.php</code> (or <code class="language-plaintext highlighter-rouge">settings.local.php</code> :</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$config</span><span class="p">[</span><span class="s1">'shield.settings'</span><span class="p">][</span><span class="s1">'credentials'</span><span class="p">][</span><span class="s1">'shield'</span><span class="p">][</span><span class="s1">'user'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"nisor"</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">'shield.settings'</span><span class="p">][</span><span class="s1">'credentials'</span><span class="p">][</span><span class="s1">'shield'</span><span class="p">][</span><span class="s1">'pass'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"blahblah"</span><span class="p">;</span>
</code></pre></div></div><p>Similarly, for setting stage_file_proxy origin:</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>drush config-set stage_file_proxy.settings
origin https://www.mudslinger.com
</code></pre></div></div><h2 id="creating-a-module-allowing-users-to-editupdate-some-config"> <a aria-labelledby="creating-a-module-allowing-users-to-editupdate-some-config" class="anchor-heading" href="https://selwynpolit.github.io/d9book/config#creating-a-module-allowing-users-to-editupdate-some-config"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Creating a module allowing users to edit/update some config</h2><p>When you want to add a form to allow the user to update the config, create a module with a form as you would anywhere else. The form will need the standard <code class="language-plaintext highlighter-rouge">buildForm()</code>, <code class="language-plaintext highlighter-rouge">submitForm()</code> and <code class="language-plaintext highlighter-rouge">getFormId()</code> methods.</p><p>e.g. in <code class="language-plaintext highlighter-rouge">docroot/modules/custom/danamod/src/Form/HeaderFooterForm.php</code></p><p>In the buildform, you load the config object, then <code class="language-plaintext highlighter-rouge">get</code> each value from the object, load them into the form (in <code class="language-plaintext highlighter-rouge">#default_value</code> array items) so the user can see the current value.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Load the values from config.</span>
<span class="nv">$config</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">config</span><span class="p">(</span><span class="s1">'danamod.header_footer_settings'</span><span class="p">);</span>

<span class="nv">$address1</span> <span class="o">=</span> <span class="nv">$config</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s1">'footer_address1'</span><span class="p">);</span>
<span class="nv">$address2</span> <span class="o">=</span> <span class="nv">$config</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s1">'footer_address2'</span><span class="p">);</span>
<span class="nv">$address3</span> <span class="o">=</span> <span class="nv">$config</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s1">'footer_address3'</span><span class="p">);</span>
<span class="nv">$email</span> <span class="o">=</span> <span class="nv">$config</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s1">'footer_email'</span><span class="p">);</span>
<span class="nv">$logo_url</span> <span class="o">=</span> <span class="nv">$config</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s1">'logo_url'</span><span class="p">);</span> 

<span class="c1">// And put them into the form render array.</span>

<span class="nv">$form</span><span class="p">[</span><span class="s1">'footer'</span><span class="p">][</span><span class="s1">'footer_address1'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">'#type'</span> <span class="o">=&gt;</span> <span class="s1">'textfield'</span><span class="p">,</span>
  <span class="s1">'#title'</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">t</span><span class="p">(</span><span class="s1">'Address line 1'</span><span class="p">),</span>
  <span class="s1">'#default_value'</span> <span class="o">=&gt;</span> <span class="nv">$address1</span><span class="p">,</span>
<span class="p">];</span>
<span class="nv">$form</span><span class="p">[</span><span class="s1">'footer'</span><span class="p">][</span><span class="s1">'footer_address2'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">'#type'</span> <span class="o">=&gt;</span> <span class="s1">'textfield'</span><span class="p">,</span>
  <span class="s1">'#title'</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">t</span><span class="p">(</span><span class="s1">'Address line 2'</span><span class="p">),</span>
  <span class="s1">'#default_value'</span> <span class="o">=&gt;</span> <span class="nv">$address2</span><span class="p">,</span>
<span class="p">];</span>
</code></pre></div></div><p>In the <code class="language-plaintext highlighter-rouge">submitForm()</code> member, you extract the values from the <code class="language-plaintext highlighter-rouge">$form_state</code>, load an editable config object and <code class="language-plaintext highlighter-rouge">-&gt;set()</code> values and <code class="language-plaintext highlighter-rouge">-&gt;save()</code> them.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$config</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">configFactory</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">getEditable</span><span class="p">(</span><span class="s1">'danamod.header_footer_settings'</span><span class="p">);</span>
<span class="nv">$values</span> <span class="o">=</span> <span class="nv">$form_state</span><span class="o">-&gt;</span><span class="nf">getValues</span><span class="p">();</span>
<span class="nv">$address1</span> <span class="o">=</span> <span class="nv">$values</span><span class="p">[</span><span class="s1">'footer_address1'</span><span class="p">];</span>
<span class="nv">$address2</span> <span class="o">=</span> <span class="nv">$values</span><span class="p">[</span><span class="s1">'footer_address2'</span><span class="p">];</span>
<span class="nv">$config</span><span class="o">-&gt;</span><span class="nf">set</span><span class="p">(</span><span class="s1">'footer_address1'</span><span class="p">,</span> <span class="nv">$address1</span><span class="p">);</span>
<span class="nv">$config</span><span class="o">-&gt;</span><span class="nf">set</span><span class="p">(</span><span class="s1">'footer_address2'</span><span class="p">,</span> <span class="nv">$address2</span><span class="p">);</span>

<span class="nv">$config</span><span class="o">-&gt;</span><span class="nf">save</span><span class="p">();</span>

<span class="nc">\Drupal</span><span class="o">::</span><span class="nf">messenger</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">addMessage</span><span class="p">(</span><span class="s1">'Values have been saved.'</span><span class="p">);</span>
</code></pre></div></div><p>And a little shorthand</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$config</span> 
  <span class="o">-&gt;</span><span class="nf">set</span><span class="p">(</span><span class="s1">'display_stars'</span><span class="p">,</span> <span class="nv">$display_stars</span><span class="p">)</span> 
  <span class="o">-&gt;</span><span class="nf">set</span><span class="p">(</span><span class="s1">'display_summary_summative'</span><span class="p">,</span> <span class="nv">$display_summary_summative</span><span class="p">)</span> 
  <span class="o">-&gt;</span><span class="nf">save</span><span class="p">();</span>

<span class="nc">\Drupal</span><span class="o">::</span><span class="nf">messenger</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">addMessage</span><span class="p">(</span><span class="s1">'Values have been saved.'</span><span class="p">);</span>
</code></pre></div></div><h2 id="drush-config-commands"> <a aria-labelledby="drush-config-commands" class="anchor-heading" href="https://selwynpolit.github.io/d9book/config#drush-config-commands"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Drush config commands</h2><p>Drush will provide you with all the tools you need to fiddle with config from the command line. Check out the <a href="https://www.drush.org/latest/commands/all/">drush docs</a></p><h3 id="view-config"> <a aria-labelledby="view-config" class="anchor-heading" href="https://selwynpolit.github.io/d9book/config#view-config"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> View config</h3><p>Note. when you view the value in config, drush cleverly will <strong>ignore values</strong> overidden in settings.php. More below.</p><p><code class="language-plaintext highlighter-rouge">cget</code> is short for <code class="language-plaintext highlighter-rouge">config:get</code>.</p><p>From the <a href="https://www.drush.org/latest/commands/config_get/">drush docs</a></p><ul><li><p><code class="language-plaintext highlighter-rouge">drush config:get system.site</code> - displays the system.site config.</p><li><p><code class="language-plaintext highlighter-rouge">drush config:get system.site page.front</code> - displays what Drupal is using for the front page of the site: e.g.</p></li></li></ul><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>drush config:get system.site page.front
  <span class="s1">'system.site:page.front'</span>: /node
</code></pre></div></div><h3 id="viewing-overridden-config-values"> <a aria-labelledby="viewing-overridden-config-values" class="anchor-heading" href="https://selwynpolit.github.io/d9book/config#viewing-overridden-config-values"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Viewing overridden config values</h3><p>When you view the value in config, drush <code class="language-plaintext highlighter-rouge">cleverly</code> will <strong>ignore values</strong> overidden in settings.php.</p><ul><li>drush cget narcs_infoconnect.imagepath basepath</li></ul><p>This displays the basepath that is in the Drupal database. If you override the basepath in settings.php, you have to use the special flag to see the overridden value.</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>drush cget narcs_infoconnect.imagepath basepath <span class="nt">--include-overridden</span>
</code></pre></div></div><p>Also drush can execute php for a little more fun approach:</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>drush ev <span class="s2">"var_dump(</span><span class="se">\D</span><span class="s2">rupal::configFactory()-&gt;getEditable('system.site')-&gt;get('name'))"</span>
</code></pre></div></div><p>or</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>drush ev <span class="s2">"print </span><span class="se">\D</span><span class="s2">rupal::config('narcs_inferconnect.imagepath')-&gt;get('basepath');"</span>
</code></pre></div></div><h3 id="delete-from-config"> <a aria-labelledby="delete-from-config" class="anchor-heading" href="https://selwynpolit.github.io/d9book/config#delete-from-config"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Delete from config</h3><p>cdel is short for config:delete.</p><ul><li><p><code class="language-plaintext highlighter-rouge">drush \@dev2 cdel migrate_plus.migration.test1</code></p><li><p><code class="language-plaintext highlighter-rouge">drush \@dev2 cdel migrate_plus.migration_group.default</code></p></li></li></ul><h3 id="check-what-has-changed-with-configstatus"> <a aria-labelledby="check-what-has-changed-with-configstatus" class="anchor-heading" href="https://selwynpolit.github.io/d9book/config#check-what-has-changed-with-configstatus"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Check what has changed with config:status</h3><p><code class="language-plaintext highlighter-rouge">cst</code> is short for <code class="language-plaintext highlighter-rouge">config:status</code></p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> drush cst
 <span class="nt">---------------------------------------------</span> <span class="nt">------------</span>
  Name                                          State
 <span class="nt">---------------------------------------------</span> <span class="nt">------------</span>
  admin_toolbar.settings                        Only <span class="k">in </span>DB
  admin_toolbar_tools.settings                  Only <span class="k">in </span>DB
  automated_cron.settings                       Only <span class="k">in </span>DB
  block.block.bartik_account_menu               Only <span class="k">in </span>DB
  block.block.bartik_branding                   Only <span class="k">in </span>DB
  block.block.bartik_breadcrumbs                Only <span class="k">in </span>DB
  block.block.bartik_content                    Only <span class="k">in </span>DB
  ...
</code></pre></div></div><p><code class="language-plaintext highlighter-rouge">Only in DB</code> means the config has not yet been exported. Best practice is to check the config info git for loading onto the production site. Usually you would use <code class="language-plaintext highlighter-rouge">drush cex</code> at this point to export the config and add it to git.</p><p>After exporting drush will report that everything has been exported and that there are no differences between the database and the sync folder.</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>drush cst
 <span class="o">[</span>notice] No differences between DB and <span class="nb">sync </span>directory.
</code></pre></div></div><h3 id="export-entire-config"> <a aria-labelledby="export-entire-config" class="anchor-heading" href="https://selwynpolit.github.io/d9book/config#export-entire-config"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Export entire config</h3><p><code class="language-plaintext highlighter-rouge">cex</code> is short for <code class="language-plaintext highlighter-rouge">config:export</code> This will dump the entire config, a bunch of yml files into the config sync folder which is specified in <code class="language-plaintext highlighter-rouge">settings.php</code> (or <code class="language-plaintext highlighter-rouge">settings.local.php</code>) as</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$settings</span><span class="p">[</span><span class="s1">'config_sync_directory'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'../config/sync'</span><span class="p">;</span>
</code></pre></div></div><ul><li><code class="language-plaintext highlighter-rouge">drush cex -y</code> - export entire config.</li></ul><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>drush cex <span class="nt">-y</span>
 <span class="o">[</span>success] Configuration successfully exported to ../config/sync.
../config/sync
</code></pre></div></div><h3 id="import-config-changes"> <a aria-labelledby="import-config-changes" class="anchor-heading" href="https://selwynpolit.github.io/d9book/config#import-config-changes"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Import config changes</h3><p>If you change the site name (for example) by mistake and want to restore it , you can re-import the values from the last export.</p><p>First check what changed with <code class="language-plaintext highlighter-rouge">drush cst</code> then use <code class="language-plaintext highlighter-rouge">drush cim</code> to restore the config to it’s previous glory. <code class="language-plaintext highlighter-rouge">cim</code> is short for <code class="language-plaintext highlighter-rouge">config:import</code>.</p><p>Drupal cleverly notices which config items have changed and loads only those changes into the database.</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>drush cst
 <span class="nt">-------------</span> <span class="nt">-----------</span>
  Name          State
 <span class="nt">-------------</span> <span class="nt">-----------</span>
  system.site   Different
</code></pre></div></div><p>and</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>drush cim <span class="nt">-y</span>
+------------+-------------+-----------+
| Collection | Config      | Operation |
+------------+-------------+-----------+
|            | system.site | Update    |
+------------+-------------+-----------+

 // Import the listed configuration changes?: yes.

 <span class="o">[</span>notice] Synchronized configuration: update system.site.
 <span class="o">[</span>notice] Finalizing configuration synchronization.
 <span class="o">[</span>success] The configuration was imported successfully.
</code></pre></div></div><hr/> <script async="" crossorigin="anonymous" data-category="Q&amp;A" data-category-id="MDE4OkRpc2N1c3Npb25DYXRlZ29yeTMyMjY2NDE4" data-emit-metadata="0" data-input-position="bottom" data-lang="en" data-mapping="title" data-reactions-enabled="1" data-repo="selwynpolit/d9book" data-repo-id="MDEwOlJlcG9zaXRvcnkzMjUxNTQ1Nzg=" data-strict="0" data-theme="preferred_color_scheme" src="https://giscus.app/client.js"> </script><hr/><footer><p><a href="https://selwynpolit.github.io/d9book/config#top" id="back-to-top">Back to top</a></p><p class="text-small text-grey-dk-100 mb-0"><span xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/"> <a href="http://www.selwynpolit.github.io/d9book" property="dct:title" rel="cc:attributionURL">Drupal at your fingertips</a> by <a href="http://www.drupal.org/u/selwynpolit" property="cc:attributionName" rel="cc:attributionURL dct:creator">Selwyn Polit</a> is licensed under <a href="http://creativecommons.org/licenses/by/4.0/" rel="license noopener noreferrer" target="_blank">CC BY 4.0 <img src="https://mirrors.creativecommons.org/presskit/icons/cc.svg" style="height:16px!important;vertical-align:text-bottom;"/> <img src="https://mirrors.creativecommons.org/presskit/icons/by.svg" style="height:16px!important;vertical-align:text-bottom;"/> </a></span></p><div class="d-flex mt-2"><p class="text-small text-grey-dk-000 mb-0 mr-2"> Page last modified: <span class="d-inline-block">Apr 13 2023</span>.</p><p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/selwynpolit/d9book/tree/gh-pages/book/config.md" id="edit-this-page">Edit this page on GitHub</a></p></div></footer></div></div><div class="search-overlay"></div></div>
</body></link></meta></meta></meta></head></html>