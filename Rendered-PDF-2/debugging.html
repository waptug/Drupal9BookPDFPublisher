<!DOCTYPE html>
<html lang="en-US"><head><meta charset="utf-8"/><meta content="IE=Edge" http-equiv="X-UA-Compatible"/><link href="https://selwynpolit.github.io/d9book/assets/css/just-the-docs-default.css" rel="stylesheet"/> <script async="" src="https://www.googletagmanager.com/gtag/js?id=8V22RQEJ71"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', '8V22RQEJ71', { 'anonymize_ip': true }); </script> <script src="https://selwynpolit.github.io/d9book/assets/js/vendor/lunr.min.js"></script> <script src="https://selwynpolit.github.io/d9book/assets/js/just-the-docs.js"></script><meta content="width=device-width, initial-scale=1" name="viewport"/><link href="https://selwynpolit.github.io/d9book/assets/images/favicon.ico" rel="icon" type="image/x-icon"/><title>Debugging | Drupal Book</title><meta content="Jekyll v4.3.2" name="generator"><meta content="Debugging" property="og:title"><meta content="en_US" property="og:locale"><meta content="Drupal at your fingertips" name="description"/><meta content="Drupal at your fingertips" property="og:description"/><link href="https://selwynpolit.github.io/d9book/d9book/debugging" rel="canonical"><meta content="https://selwynpolit.github.io/d9book/d9book/debugging" property="og:url"/><meta content="Drupal Book" property="og:site_name"/><meta content="website" property="og:type"/><meta content="summary" name="twitter:card"/><meta content="Debugging" property="twitter:title"/> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Drupal at your fingertips","headline":"Debugging","url":"https://selwynpolit.github.io/d9book/d9book/debugging"}</script><body> <a class="skip-to-main" href="https://selwynpolit.github.io/d9book/debugging#main-content">Skip to main content</a> <svg class="d-none" xmlns="http://www.w3.org/2000/svg"> <symbol id="svg-link" viewbox="0 0 24 24"><title>Link</title><svg class="feather feather-link" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewbox="0 0 24 24"><title>Menu</title><svg class="feather feather-menu" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><line x1="3" x2="21" y1="12" y2="12"></line><line x1="3" x2="21" y1="6" y2="6"></line><line x1="3" x2="21" y1="18" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewbox="0 0 24 24"><title>Expand</title><svg class="feather feather-chevron-right" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol class="feather feather-external-link" fill="none" height="24" id="svg-external-link" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24"><title id="svg-external-link-title">(external link)</title><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" x2="21" y1="14" y2="3"></line> </symbol> <symbol id="svg-doc" viewbox="0 0 24 24"><title>Document</title><svg class="feather feather-file" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewbox="0 0 24 24"><title>Search</title><svg class="feather feather-search" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"> <circle cx="11" cy="11" r="8"></circle><line x1="21" x2="16.65" y1="21" y2="16.65"></line> </svg> </symbol> <symbol id="svg-copy" viewbox="0 0 16 16"><title>Copy</title><svg class="bi bi-clipboard" fill="currentColor" height="16" viewbox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"></path><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"></path> </svg> </symbol> <symbol id="svg-copied" viewbox="0 0 16 16"><title>Copied</title><svg class="bi bi-clipboard-check-fill" fill="currentColor" height="16" viewbox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"></path><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"></path> </svg> </symbol> </svg><div class="side-bar"><div class="site-header"> <a class="site-title lh-tight" href="https://selwynpolit.github.io/d9book/"> Drupal Book </a> <a class="site-button" href="https://selwynpolit.github.io/d9book/debugging" id="menu-button"> <svg class="icon" viewbox="0 0 24 24"><use xlink:href="#svg-menu"></use></svg> </a></div><nav aria-label="Main" class="site-nav" id="site-nav"><ul class="nav-list"><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/">Home</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/actions">Actions</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/attribution">Attribution</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/bq">Batch and Queue</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/blocks">Blocks</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/caching">Caching</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/composer">Composer</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/config">Config</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/cron">Cron</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/dates">Dates and Times</a><li class="nav-list-item active"><a class="nav-list-link active" href="https://selwynpolit.github.io/d9book/debugging">Debugging</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/development">Development</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/drush">Drush</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/email">Email</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/entities">Entities</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/forms">Forms</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/general">General</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/off-island">Getting off the Island</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/hooks">Hooks</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/learn">Learning</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/links">Links</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/logging">Logging</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/menus">Menus</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/migrate">Migrate</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/modals">Modals</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/nodes-and-fields">Nodes and Fields</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/queries">Queries</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/redirects">Redirects</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/render">Render Arrays</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/routes">Routes</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/security">Security</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/services">Services</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/state">State</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/taxonomy">Taxonomy</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/dtt">Tests</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/twig">Twig</a></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></ul><ul class="nav-list"><li class="nav-list-item external"> <a class="nav-list-link external" href="https://github.com/selwynpolit/d9book/fork"> Fork me on GitHub <svg aria-labelledby="svg-external-link-title" viewbox="0 0 24 24"><use xlink:href="#svg-external-link"></use></svg> </a></li></ul></nav><footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</footer></div><div class="main" id="top"><div class="main-header" id="main-header"><div class="search"><div class="search-input-wrap"> <input aria-label="Search Drupal Book" autocomplete="off" class="search-input" id="search-input" placeholder="Search Drupal Book" tabindex="0" type="text"/> <label class="search-label" for="search-input"><svg class="search-icon" viewbox="0 0 24 24"><use xlink:href="#svg-search"></use></svg></label></div><div class="search-results" id="search-results"></div></div><nav aria-label="Auxiliary" class="aux-nav"><ul class="aux-nav-list"><li class="aux-nav-list-item"> <a class="site-button" href="https://twitter.com/selwynpolit" rel="noopener noreferrer" target="_blank"> <img alt="Twitter logo" src="https://atuin.ru/demo/simple-icons/icons/twitter.svg" style="width: 30px; height: 30px;" title="Author in Twitter"/> </a><li class="aux-nav-list-item"> <a class="site-button" href="https://github.com/selwynpolit/d9book/tree/gh-pages" rel="noopener noreferrer" target="_blank"> <img alt="GitHub logo" src="https://atuin.ru/demo/simple-icons/icons/github.svg" style="width: 30px; height: 30px;" title="D9Book on GitHub"/> </a></li></li></ul></nav></div><div class="main-content-wrap" id="main-content-wrap"><div class="main-content" id="main-content" role="main"><h1 class="no_toc fw-500" id="debugging"> <a aria-labelledby="debugging" class="anchor-heading" href="https://selwynpolit.github.io/d9book/debugging#debugging"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Debugging</h1><h2 class="no_toc text-delta" id="table-of-contents"> <a aria-labelledby="table-of-contents" class="anchor-heading" href="https://selwynpolit.github.io/d9book/debugging#table-of-contents"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Table of contents</h2><ul id="markdown-toc"><li><a href="https://selwynpolit.github.io/d9book/debugging#overview" id="markdown-toc-overview">Overview</a><li><a href="https://selwynpolit.github.io/d9book/debugging#enable-error-reporting" id="markdown-toc-enable-error-reporting">Enable error reporting</a><li><a href="https://selwynpolit.github.io/d9book/debugging#disable-caches-and-enable-twig-debugging" id="markdown-toc-disable-caches-and-enable-twig-debugging">Disable caches and enable Twig debugging</a><li><a href="https://selwynpolit.github.io/d9book/debugging#enabledisable-xdebug" id="markdown-toc-enabledisable-xdebug">Enable/Disable Xdebug</a><li><a href="https://selwynpolit.github.io/d9book/debugging#xdebug-port" id="markdown-toc-xdebug-port">Xdebug Port</a><li><a href="https://selwynpolit.github.io/d9book/debugging#drupal-code-debugging" id="markdown-toc-drupal-code-debugging">Drupal code debugging</a><li><a href="https://selwynpolit.github.io/d9book/debugging#command-line-or-drush-debugging" id="markdown-toc-command-line-or-drush-debugging">Command line or drush debugging</a><li><a href="https://selwynpolit.github.io/d9book/debugging#add-a-breakpoint-in-code" id="markdown-toc-add-a-breakpoint-in-code">Add a breakpoint in code</a><li><a href="https://selwynpolit.github.io/d9book/debugging#troubleshooting-xdebug-with-ddev" id="markdown-toc-troubleshooting-xdebug-with-ddev">Troubleshooting Xdebug with DDEV</a><ul><li><a href="https://selwynpolit.github.io/d9book/debugging#could-not-connect-to-debugging-client" id="markdown-toc-could-not-connect-to-debugging-client">Could not connect to debugging client</a><li><a href="https://selwynpolit.github.io/d9book/debugging#phpstorm-refuses-to-debug" id="markdown-toc-phpstorm-refuses-to-debug">PhpStorm refuses to debug</a><ul><li><a href="https://selwynpolit.github.io/d9book/debugging#curl" id="markdown-toc-curl">Curl</a><li><a href="https://selwynpolit.github.io/d9book/debugging#logs" id="markdown-toc-logs">Logs</a><li><a href="https://selwynpolit.github.io/d9book/debugging#telnet" id="markdown-toc-telnet">Telnet</a><li><a href="https://selwynpolit.github.io/d9book/debugging#is-xdebug-enabled" id="markdown-toc-is-xdebug-enabled">Is Xdebug enabled?</a></li></li></li></li></ul></li></li></ul><li><a href="https://selwynpolit.github.io/d9book/debugging#what-is-listening-on-the-debug-port" id="markdown-toc-what-is-listening-on-the-debug-port">What is listening on the debug port?</a><li><a href="https://selwynpolit.github.io/d9book/debugging#enable-twig-debugging-output-in-source" id="markdown-toc-enable-twig-debugging-output-in-source">Enable twig debugging output in source</a><li><a href="https://selwynpolit.github.io/d9book/debugging#devel-and-devel-kint-extras" id="markdown-toc-devel-and-devel-kint-extras">Devel and Devel Kint Extras</a><ul><li><a href="https://selwynpolit.github.io/d9book/debugging#setup" id="markdown-toc-setup">Setup</a><li><a href="https://selwynpolit.github.io/d9book/debugging#add-kint-to-a-custom-module" id="markdown-toc-add-kint-to-a-custom-module">Add kint to a custom module</a><li><a href="https://selwynpolit.github.io/d9book/debugging#dump-variables-in-a-twig-template" id="markdown-toc-dump-variables-in-a-twig-template">Dump variables in a TWIG template</a><li><a href="https://selwynpolit.github.io/d9book/debugging#kintdump" id="markdown-toc-kintdump">Kint::dump</a><li><a href="https://selwynpolit.github.io/d9book/debugging#set-max-levels-to-avoid-running-out-of-memory" id="markdown-toc-set-max-levels-to-avoid-running-out-of-memory">Set max levels to avoid running out of memory</a></li></li></li></li></li></ul><li><a href="https://selwynpolit.github.io/d9book/debugging#resources" id="markdown-toc-resources">Resources</a></li></li></li></li></li></li></li></li></li></li></li></li></li></ul><p><img alt="views" src="https://api.visitor.plantree.me/visitor-badge/pv?label=views&amp;color=informational&amp;namespace=d9book&amp;key=debugging.md"/></p><hr/><h2 id="overview"> <a aria-labelledby="overview" class="anchor-heading" href="https://selwynpolit.github.io/d9book/debugging#overview"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Overview</h2><p>Using a combination of PhpStorm, DDEV and Xdebug makes debugging a pleasure. PhpStorm is not essential. Xdebug works fine with other IDE's also. In my experience, many Drupal developers have not experienced using a true debugger, but once they do, they wonder how they ever delivered any code without it.</p><h2 id="enable-error-reporting"> <a aria-labelledby="enable-error-reporting" class="anchor-heading" href="https://selwynpolit.github.io/d9book/debugging#enable-error-reporting"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Enable error reporting</h2><p>If you experience a WSOD (White Screen Of Death), enabling verbose error messages can often give you some useful clue:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cd">/**
 * Show all error messages, with backtrace information.
 *
 * In case the error level could not be fetched from the database, as for
 * example the database connection failed, we rely only on this value.
 */</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">'system.logging'</span><span class="p">][</span><span class="s1">'error_level'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'verbose'</span><span class="p">;</span>
</code></pre></div></div><p>For more, check out <a href="https://drupal.stackexchange.com/questions/127182/how-do-i-enable-developer-debug-mode#:~:text=%24config%5B'system.,can%20always%20comment%20them%20out">https://drupal.stackexchange.com/questions/127182/how-do-i-enable-developer-debug-mode#:~:text=%24config%5B'system.,can%20always%20comment%20them%20out</a>. Also in <a href="https://github.com/drupal/drupal/blob/10.1.x/core/includes/bootstrap.inc">https://github.com/drupal/drupal/blob/10.1.x/core/includes/bootstrap.inc</a> Error reporting levels are defined:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cd">/**
 * Error reporting level: display no errors.
 */</span>
<span class="k">const</span> <span class="no">ERROR_REPORTING_HIDE</span> <span class="o">=</span> <span class="s1">'hide'</span><span class="p">;</span>

<span class="cd">/**
 * Error reporting level: display errors and warnings.
 */</span>
<span class="k">const</span> <span class="no">ERROR_REPORTING_DISPLAY_SOME</span> <span class="o">=</span> <span class="s1">'some'</span><span class="p">;</span>

<span class="cd">/**
 * Error reporting level: display all messages.
 */</span>
<span class="k">const</span> <span class="no">ERROR_REPORTING_DISPLAY_ALL</span> <span class="o">=</span> <span class="s1">'all'</span><span class="p">;</span>

<span class="cd">/**
 * Error reporting level: display all messages, plus backtrace information.
 */</span>
<span class="k">const</span> <span class="no">ERROR_REPORTING_DISPLAY_VERBOSE</span> <span class="o">=</span> <span class="s1">'verbose'</span><span class="p">;</span>
</code></pre></div></div><h2 id="disable-caches-and-enable-twig-debugging"> <a aria-labelledby="disable-caches-and-enable-twig-debugging" class="anchor-heading" href="https://selwynpolit.github.io/d9book/debugging#disable-caches-and-enable-twig-debugging"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Disable caches and enable Twig debugging</h2><p>This will cause twig debugging information to be displayed in the HTML code like the following:</p><div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- THEME DEBUG --&gt;</span>
<span class="c">&lt;!-- THEME HOOK: 'toolbar' --&gt;</span>
<span class="c">&lt;!-- BEGIN OUTPUT from 'core/themes/stable/templates/navigation/toolbar.html.twig' --&gt;</span>

</code></pre></div></div><p>and</p><div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- THEME DEBUG --&gt;</span>
<span class="c">&lt;!-- THEME HOOK: 'page' --&gt;</span>
<span class="c">&lt;!-- FILE NAME SUGGESTIONS:
   * page--teks--admin--srp--program--expectation--correlation--vote-all.html.twig
   * page--teks--admin--srp--program--expectation--correlation--852136.html.twig
   * page--teks--admin--srp--program--expectation--correlation--%.html.twig
   * page--teks--admin--srp--program--expectation--correlation.html.twig
   * page--teks--admin--srp--program--expectation--852131.html.twig
   * page--teks--admin--srp--program--expectation--%.html.twig
   * page--teks--admin--srp--program--expectation.html.twig
   * page--teks--admin--srp--program--852061.html.twig
   * page--teks--admin--srp--program--%.html.twig
   * page--teks--admin--srp--program.html.twig
   * page--teks--admin--srp.html.twig
   x page--teks--admin.html.twig
   * page--teks.html.twig
   * page.html.twig
--&gt;</span>
</code></pre></div></div><p>In <code class="language-plaintext highlighter-rouge">sites/default/development.services.yml</code> in the <code class="language-plaintext highlighter-rouge">parameters</code>, <code class="language-plaintext highlighter-rouge">twig.config</code>, set <code class="language-plaintext highlighter-rouge">debug:true</code>. See <code class="language-plaintext highlighter-rouge">core.services.yml</code> for lots of other items to change for development.</p><div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Local development services.</span>
<span class="c1">#</span>
<span class="na">parameters</span><span class="pi">:</span>
  <span class="na">http.response.debug_cacheability_headers</span><span class="pi">:</span> <span class="kc">true</span>
  <span class="na">twig.config</span><span class="pi">:</span>
    <span class="na">debug</span><span class="pi">:</span> <span class="kc">true</span>
    <span class="na">auto_reload</span><span class="pi">:</span> <span class="kc">true</span>
    <span class="na">cache</span><span class="pi">:</span> <span class="kc">false</span>

<span class="c1"># To disable caching, you need this and a few other items</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">cache.backend.null</span><span class="pi">:</span>
    <span class="na">class</span><span class="pi">:</span> <span class="s">Drupal\Core\Cache\NullBackendFactory</span>
</code></pre></div></div><p>You also need this in <code class="language-plaintext highlighter-rouge">settings.local.php</code>:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cd">/**
 * Enable local development services.
 */</span>
<span class="nv">$settings</span><span class="p">[</span><span class="s1">'container_yamls'</span><span class="p">][]</span> <span class="o">=</span> <span class="no">DRUPAL_ROOT</span> <span class="mf">.</span> <span class="s1">'/sites/development.services.yml'</span><span class="p">;</span>
</code></pre></div></div><p>Disable caches in <code class="language-plaintext highlighter-rouge">settings.local.php</code>:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$config</span><span class="p">[</span><span class="s1">'system.performance'</span><span class="p">][</span><span class="s1">'css'</span><span class="p">][</span><span class="s1">'preprocess'</span><span class="p">]</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">'system.performance'</span><span class="p">][</span><span class="s1">'js'</span><span class="p">][</span><span class="s1">'preprocess'</span><span class="p">]</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">;</span>
<span class="nv">$settings</span><span class="p">[</span><span class="s1">'cache'</span><span class="p">][</span><span class="s1">'bins'</span><span class="p">][</span><span class="s1">'render'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'cache.backend.null'</span><span class="p">;</span>
<span class="nv">$settings</span><span class="p">[</span><span class="s1">'cache'</span><span class="p">][</span><span class="s1">'bins'</span><span class="p">][</span><span class="s1">'page'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'cache.backend.null'</span><span class="p">;</span>
<span class="nv">$settings</span><span class="p">[</span><span class="s1">'cache'</span><span class="p">][</span><span class="s1">'bins'</span><span class="p">][</span><span class="s1">'dynamic_page_cache'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'cache.backend.null'</span><span class="p">;</span>
</code></pre></div></div><h2 id="enabledisable-xdebug"> <a aria-labelledby="enabledisable-xdebug" class="anchor-heading" href="https://selwynpolit.github.io/d9book/debugging#enabledisable-xdebug"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Enable/Disable Xdebug</h2><p>To enable or disable Xdebug when using DDEV use:</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ddev xdebug on

<span class="nv">$ </span>ddev xdebug off
</code></pre></div></div><p>Note. Enabling Xdebug will slow down your app because xdebug has a significant performance impact so be sure to disable it when you are finished debugging.</p><p>Add this to your <code class="language-plaintext highlighter-rouge">.zshrc</code> or <code class="language-plaintext highlighter-rouge">.bash</code> file for `xon` and `xoff` shortcut</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">alias </span><span class="nv">xon</span><span class="o">=</span><span class="s1">'ddev xdebug on'</span>
<span class="nb">alias </span><span class="nv">xoff</span><span class="o">=</span><span class="s1">'ddev xdebug off'</span>
</code></pre></div></div><h2 id="xdebug-port"> <a aria-labelledby="xdebug-port" class="anchor-heading" href="https://selwynpolit.github.io/d9book/debugging#xdebug-port"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Xdebug Port</h2><p>DDEV now sets the default port to 9003. If you want to change it to another port, use the steps below. From <a href="https://ddev.readthedocs.io/en/stable/users/debugging-profiling/step-debugging/#using-xdebug-on-a-port-other-than-the-default-9003">https://ddev.readthedocs.io/en/stable/users/debugging-profiling/step-debugging/#using-xdebug-on-a-port-other-than-the-default-9003</a>:</p><p>To override the port, add an override file in the project’s <code class="language-plaintext highlighter-rouge">.ddev/php</code> directory. For example, add the file <code class="language-plaintext highlighter-rouge">.ddev/php/xdebug_client_port.ini</code> like this to specify the legacy port 9000:</p><div class="language-ini highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nn">[PHP]</span>

<span class="py">xdebug.client_port</span><span class="p">=</span><span class="s">9000</span>
</code></pre></div></div><h2 id="drupal-code-debugging"> <a aria-labelledby="drupal-code-debugging" class="anchor-heading" href="https://selwynpolit.github.io/d9book/debugging#drupal-code-debugging"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Drupal code debugging</h2><p>Phpstorm and DDEV make this process as painless as possible. Once you enable Xdebug in DDEV, simply click the "start listening for PHP Debug Connections" button.</p><p>To start debugging, open the index.php file and set a breakpoint by clicking on a line number.</p><p><img alt="Click listen for PHP Debug Connections button in PhpStorm" src="https://selwynpolit.github.io/d9book/assets/images/listen_button.png"/></p><p>Select a breakpoint:</p><p><img alt="Set a breakpoint in PhpStorm" src="https://selwynpolit.github.io/d9book/assets/images/breakpoint.png"/></p><p>Next refresh the Drupal home page in a browser</p><p>You should immediately see a dialog pop up in PhpStorm asking you to to configure your local path. Be sure to click the <code class="language-plaintext highlighter-rouge">site/web/index php</code> and click <code class="language-plaintext highlighter-rouge">Accept</code>:</p><p>Note. If you select one of the other lines you will see a different php file pop up and you won't be debugging Drupal, but probably some Symfony file.</p><p><img alt="PhpStorm incoming connection dialog" src="https://selwynpolit.github.io/d9book/assets/images/incoming_connection.png"/></p><p>If you accidentally selected the wrong local path, in PhpStorm, go to Settings, PHP, Servers and delete all servers that are displayed. The correct one will be recreated after you retry the operation above.</p><p><img alt="Breakpoint reached in debugging in PhpStorm" src="https://selwynpolit.github.io/d9book/assets/images/breakpoint_reached.png"/></p><p>Once you accept the local path, you should see a highlighted line indicating the current line. The debug window will appear below showing the call stack</p><p><img alt="PhpStorm debug call stack" src="https://selwynpolit.github.io/d9book/assets/images/debug_call_stack.png"/></p><p>You will also see the variables and watch pane:</p><p><img alt="PhpStorm debug variables and watch pane" src="https://selwynpolit.github.io/d9book/assets/images/debug_variables_watch.png"/></p><h2 id="command-line-or-drush-debugging"> <a aria-labelledby="command-line-or-drush-debugging" class="anchor-heading" href="https://selwynpolit.github.io/d9book/debugging#command-line-or-drush-debugging"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Command line or drush debugging</h2><p>For command line or drush debugging you must run your code from within the DDEV container. This means you must 'ssh' into the DDEV (Docker) container and execute the command you want to debug this way:</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ddev ssh

<span class="nv">$ </span>vendor/bin/drush status
</code></pre></div></div><p>To setup command line debugging, follow the steps above to setup for <a href="https://selwynpolit.github.io/d9book/debugging#drupal-code-debugging">Drupal Code debugging</a> to confirm that you have debugging working. Then look in PhpStorm’s: settings, PHP, Servers, and select the server you set up from the previous steps. Specify the top level path as shown below. Usually it will be <code class="language-plaintext highlighter-rouge">/var/www/html</code></p><p><img alt="PhpStorm debug servers options" src="https://selwynpolit.github.io/d9book/assets/images/php_debug_servers.png"/></p><p>Next open vendor/drush/drush/src/Drush.php and specify a breakpoint like this:</p><p><img alt="Set a breakpoint in PhpStorm in the drush source code" src="https://selwynpolit.github.io/d9book/assets/images/drush_breakpoint.png"/></p><p>Now in the terminal ssh into the DDEV container and execute drush:</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ddev ssh

<span class="nv">$ </span>vendor/bin/drush status
</code></pre></div></div><p>PhpStorm will pop up and display the current line and you can debug to your heart's content:</p><p><img alt="Debugging drush in PhpStorm" src="https://selwynpolit.github.io/d9book/assets/images/phpstorm_debugging_drush.png"/></p><p>More at <a href="https://ddev.readthedocs.io/en/stable/users/debugging-profiling/step-debugging/">https://ddev.readthedocs.io/en/stable/users/debugging-profiling/step-debugging/</a></p><h2 id="add-a-breakpoint-in-code"> <a aria-labelledby="add-a-breakpoint-in-code" class="anchor-heading" href="https://selwynpolit.github.io/d9book/debugging#add-a-breakpoint-in-code"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Add a breakpoint in code</h2><p>To add a breakpoint in code, you can use: xdebug_break()</p><p>more at <a href="https://xdebug.org/docs/all_functions">https://xdebug.org/docs/all_functions</a></p><h2 id="troubleshooting-xdebug-with-ddev"> <a aria-labelledby="troubleshooting-xdebug-with-ddev" class="anchor-heading" href="https://selwynpolit.github.io/d9book/debugging#troubleshooting-xdebug-with-ddev"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Troubleshooting Xdebug with DDEV</h2><h3 id="could-not-connect-to-debugging-client"> <a aria-labelledby="could-not-connect-to-debugging-client" class="anchor-heading" href="https://selwynpolit.github.io/d9book/debugging#could-not-connect-to-debugging-client"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Could not connect to debugging client</h3><p>When debugging command line e.g. drush commands etc. if you see:</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>vendor/bin/drush status

Xdebug: <span class="se">\[</span>Step Debug<span class="se">\]</span> Could not connect to debugging client. Tried: host.docker.internal:9003 <span class="o">(</span>through xdebug.client_host/xdebug.client_port<span class="o">)</span><span class="nb">.</span>
</code></pre></div></div><p>This means you have not clicked the PhpStorm button: "Start listening for PHP Debug Connections". Just click it and try again</p><p><img alt="Click listen for PHP Debug Connections button in PhpStorm" src="https://selwynpolit.github.io/d9book/assets/images/listen_button.png"/></p><h3 id="phpstorm-refuses-to-debug"> <a aria-labelledby="phpstorm-refuses-to-debug" class="anchor-heading" href="https://selwynpolit.github.io/d9book/debugging#phpstorm-refuses-to-debug"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> PhpStorm refuses to debug</h3><p>Here are some steps to try:</p><h4 id="curl"> <a aria-labelledby="curl" class="anchor-heading" href="https://selwynpolit.github.io/d9book/debugging#curl"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Curl</h4><p>Use curl or a browser to create a web request. For example:</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>curl https://d9.ddev.site
</code></pre></div></div><p>Replace d9.ddev.site with the correct URL for your site.</p><h4 id="logs"> <a aria-labelledby="logs" class="anchor-heading" href="https://selwynpolit.github.io/d9book/debugging#logs"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Logs</h4><p>If the IDE doesn't respond, take a look at ddev logs. Use ddev logs to display current logs for the project's web server. See <a href="https://ddev.readthedocs.io/en/stable/users/basics/commands/#logs">https://ddev.readthedocs.io/en/stable/users/basics/commands/#logs</a> for more.</p><p>If you see a message like</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s2">"PHP message: Xdebug: [Step Debug] Could not connect to debugging client. Tried: host.docker.internal:9000 (through xdebug.client_host/xdebug client_port)"</span> 
</code></pre></div></div><p>then php/xdebug (inside the container) is not able to make a connection to port 9000.</p><p>This means you have not clicked the “Start listening for PHP Debug Connections” button in PhpStorm. Just click it and try again.</p><p>Note. Port 9003 is more current.</p><h4 id="telnet"> <a aria-labelledby="telnet" class="anchor-heading" href="https://selwynpolit.github.io/d9book/debugging#telnet"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Telnet</h4><p>With PhpStorm NOT listening for a PHP Debug connection, try to telnet to see what is listening to port 9003 with this:</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>telnet d9book2.ddev.site 9003
</code></pre></div></div><p>You should get connection refused. If you get a connection (see below) something is listening on port 9003 and you should either disable it or use a different port. Note. You must set that in both PhpStorm as well as DDEV.</p><p>This shows a connection succeeding. You can try it with PhpStorm listening for a debug connection:</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>telnet d9book2.ddev.site 9003

Trying 127.0.0.1<span class="se">\.</span>..

Connected to d9book2.ddev.site.

Escape character is <span class="se">\'\^\]\'</span><span class="nb">.</span>
</code></pre></div></div><p>Use Control ] to exit and then type quit to return to exit telnet.</p><p>On a mac, use <code class="language-plaintext highlighter-rouge">sudo lsof -i :9003 -sTCP:LISTEN</code> to find out what is listening on that port and stop it, or change the xdebug port and configure both DDEV and PhpStorm to use the new one .</p><p>More about changing ports at <a href="https://ddev.readthedocs.io/en/stable/users/debugging-profiling/step-debugging/#using-xdebug-on-a-port-other-than-the-default-9003">https://ddev.readthedocs.io/en/stable/users/debugging-profiling/step-debugging/#using-xdebug-on-a-port-other-than-the-default-9003</a></p><p>Note. In the past, php-fpm was likely to be one of the apps using port 9000.</p><h4 id="is-xdebug-enabled"> <a aria-labelledby="is-xdebug-enabled" class="anchor-heading" href="https://selwynpolit.github.io/d9book/debugging#is-xdebug-enabled"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Is Xdebug enabled?</h4><p>• To check to make sure that Xdebug is enabled, you can use <code class="language-plaintext highlighter-rouge">php -i | grep xdebug</code> inside the container. You can also use other techniques to view the output of phpinfo(), including Drupal's <code class="language-plaintext highlighter-rouge">admin/reports/status/php</code>. Below you can see the expected output when Xdebug is enabled assuming you have Xdebug v3.2.0 or later.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>`$ php -i | grep "xdebug.remote_enable"`

xdebug.remote_enable =&gt; (setting renamed in Xdebug 3) =&gt; (setting renamed in Xdebug 3)
</code></pre></div></div><p>See <a href="https://ddev.readthedocs.io/en/stable/users/step-debugging">https://ddev.readthedocs.io/en/stable/users/step-debugging</a></p><h2 id="what-is-listening-on-the-debug-port"> <a aria-labelledby="what-is-listening-on-the-debug-port" class="anchor-heading" href="https://selwynpolit.github.io/d9book/debugging#what-is-listening-on-the-debug-port"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> What is listening on the debug port?</h2><p>To check if something is listening on port 9003, it’s best to use <code class="language-plaintext highlighter-rouge">lsof</code> as it will actually list the name of the process listening.</p><p>i.e. Here we see phpstorm listening:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lsof -i TCP:9003
COMMAND    PID   USER   FD   TYPE             DEVICE SIZE/OFF NODE NAME
phpstorm 78897 selwyn  209u  IPv4 0x4d118c80f54422d7      0t0  TCP *:9003 (LISTEN)

</code></pre></div></div><p>You can also use <code class="language-plaintext highlighter-rouge">nc</code> and <code class="language-plaintext highlighter-rouge">netstat</code> but they is not quite as informative:</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>nc <span class="nt">-z</span> localhost 9003
Connection to localhost port 9003 <span class="o">[</span>tcp/<span class="k">*</span><span class="o">]</span> succeeded!
</code></pre></div></div><p>The message <code class="language-plaintext highlighter-rouge">Connection to localhost port 9003 [tcp/*] succeeded!</code> means that there is a program listening on port 9003. If you get nothing when you type the command, then nothing is listening.</p><p>Here <code class="language-plaintext highlighter-rouge">netstat</code> reports that something is listening on port 9003. Again, if you get nothing when you type the command, then nothing is listening.</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>netstat <span class="nt">-an</span> | <span class="nb">grep </span>9003
tcp4       0      0  <span class="k">*</span>.9003                 <span class="k">*</span>.<span class="k">*</span>                    LISTEN
</code></pre></div></div><p>Here is an example running <code class="language-plaintext highlighter-rouge">lsof</code> and finding php-fpm listening on port 9000</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>lsof <span class="nt">-i</span> TCP:9000

COMMAND PID USER FD TYPE DEVICE SIZE/OFF NODE NAME

php-fpm 732 selwyn 7u IPv4 0x4120ed57a07e871f 0t0 TCP
localhost:cslistener <span class="o">(</span>LISTEN<span class="o">)</span>

php-fpm 764 selwyn 8u IPv4 0x4120ed57a07e871f 0t0 TCP
localhost:cslistener <span class="o">(</span>LISTEN<span class="o">)</span>

php-fpm 765 selwyn 8u IPv4 0x4120ed57a07e871f 0t0 TCP
localhost:cslistener <span class="o">(</span>LISTEN<span class="o">)</span>
</code></pre></div></div><h2 id="enable-twig-debugging-output-in-source"> <a aria-labelledby="enable-twig-debugging-output-in-source" class="anchor-heading" href="https://selwynpolit.github.io/d9book/debugging#enable-twig-debugging-output-in-source"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Enable twig debugging output in source</h2><p>In <code class="language-plaintext highlighter-rouge">sites/default/development.services.yml</code> in the <code class="language-plaintext highlighter-rouge">parameters</code>, <code class="language-plaintext highlighter-rouge">twig.config</code>, set <code class="language-plaintext highlighter-rouge">debug:true</code>. See <code class="language-plaintext highlighter-rouge">core.services.yml</code> for lots of other items to change for development.</p><div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Local development services.</span>
<span class="c1">#</span>
<span class="na">parameters</span><span class="pi">:</span>
  <span class="na">http.response.debug_cacheability_headers</span><span class="pi">:</span> <span class="kc">true</span>
  <span class="na">twig.config</span><span class="pi">:</span>
    <span class="na">debug</span><span class="pi">:</span> <span class="kc">true</span>
    <span class="na">auto_reload</span><span class="pi">:</span> <span class="kc">true</span>
    <span class="na">cache</span><span class="pi">:</span> <span class="kc">false</span>

<span class="c1"># To disable caching, you need this and a few other items</span>
<span class="na">services</span><span class="pi">:</span>
  <span class="na">cache.backend.null</span><span class="pi">:</span>
    <span class="na">class</span><span class="pi">:</span> <span class="s">Drupal\Core\Cache\NullBackendFactory</span>
</code></pre></div></div><p>You also need this in settings.local.php:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cd">/**
 * Enable local development services.
 */</span>
<span class="nv">$settings</span><span class="p">[</span><span class="s1">'container_yamls'</span><span class="p">][]</span> <span class="o">=</span> <span class="no">DRUPAL_ROOT</span> <span class="mf">.</span> <span class="s1">'/sites/development.services.yml'</span><span class="p">;</span>
</code></pre></div></div><p>You also need to disable the render cache in <code class="language-plaintext highlighter-rouge">settings.local.php</code> with:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$settings</span><span class="p">[</span><span class="s1">'cache'</span><span class="p">][</span><span class="s1">'bins'</span><span class="p">][</span><span class="s1">'render'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'cache.backend.null'</span><span class="p">;</span>
</code></pre></div></div><h2 id="devel-and-devel-kint-extras"> <a aria-labelledby="devel-and-devel-kint-extras" class="anchor-heading" href="https://selwynpolit.github.io/d9book/debugging#devel-and-devel-kint-extras"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Devel and Devel Kint Extras</h2><p>From <a href="https://www.webwash.net/how-to-print-variables-using-devel-and-kint-in-drupal/">https://www.webwash.net/how-to-print-variables-using-devel-and-kint-in-drupal/</a></p><h3 id="setup"> <a aria-labelledby="setup" class="anchor-heading" href="https://selwynpolit.github.io/d9book/debugging#setup"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Setup</h3><p>We need both the Devel and Devel Kint Extras module. <a href="https://www.drupal.org/project/devel_kint_extras">Devel Kint Extras</a> ships with the kint-php library so installing this via Composer will take care of it automatically.</p><p>Install using Composer:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>composer require drupal/devel drupal/devel_kint_extras
</code></pre></div></div><p>Enable both with the following Drush command:</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ddev drush en devel_kint_extras <span class="nt">-y</span>
</code></pre></div></div><p>Finally, enable <code class="language-plaintext highlighter-rouge">Kint Extended</code> as the <code class="language-plaintext highlighter-rouge">Variables Dumper</code>. To do this go to:</p><p><code class="language-plaintext highlighter-rouge">admin/config/development/devel</code></p><p>and select <code class="language-plaintext highlighter-rouge">Kint Extender</code> and Save the configuration </p><h3 id="add-kint-to-a-custom-module"> <a aria-labelledby="add-kint-to-a-custom-module" class="anchor-heading" href="https://selwynpolit.github.io/d9book/debugging#add-kint-to-a-custom-module"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Add kint to a custom module</h3><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">custom_kint_preprocess_page</span><span class="p">(</span><span class="o">&amp;</span><span class="nv">$variables</span><span class="p">)</span> <span class="p">{</span> 
  <span class="nf">kint</span><span class="p">(</span><span class="nv">$variables</span><span class="p">[</span><span class="s1">'page'</span><span class="p">]);</span>
 <span class="p">}</span>
</code></pre></div></div><h3 id="dump-variables-in-a-twig-template"> <a aria-labelledby="dump-variables-in-a-twig-template" class="anchor-heading" href="https://selwynpolit.github.io/d9book/debugging#dump-variables-in-a-twig-template"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Dump variables in a TWIG template</h3><p>{{ kint(attributes) }}</p><h3 id="kintdump"> <a aria-labelledby="kintdump" class="anchor-heading" href="https://selwynpolit.github.io/d9book/debugging#kintdump"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Kint::dump</h3><p>From <a href="https://www.drupal.org/project/migrate_devel">Migrate Devel contrib module</a>, in <code class="language-plaintext highlighter-rouge">docroot/modules/contrib/migrate_devel/src/EventSubscriber/MigrationEventSubscriber.php</code></p><p>This is used in migrate to dump the source and destination values.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// We use kint directly here since we want to support variable naming.</span>
<span class="nf">kint_require</span><span class="p">();</span>
<span class="nc">\Kint</span><span class="o">::</span><span class="nf">dump</span><span class="p">(</span><span class="nv">$Source</span><span class="p">,</span> <span class="nv">$Destination</span><span class="p">,</span> <span class="nv">$DestinationIDValues</span><span class="p">);</span>
</code></pre></div></div><h3 id="set-max-levels-to-avoid-running-out-of-memory"> <a aria-labelledby="set-max-levels-to-avoid-running-out-of-memory" class="anchor-heading" href="https://selwynpolit.github.io/d9book/debugging#set-max-levels-to-avoid-running-out-of-memory"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Set max levels to avoid running out of memory</h3><p>Kint can run really slowly so you may have to set maxLevels this way:</p><p>Add this to settings.local.php</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Change kint maxLevels setting:</span>
<span class="k">include_once</span><span class="p">(</span><span class="no">DRUPAL_ROOT</span> <span class="mf">.</span> <span class="s1">'/modules/contrib/devel/kint/kint/Kint.class.php'</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="nb">class_exists</span><span class="p">(</span><span class="s1">'Kint'</span><span class="p">)){</span>
  <span class="c1">// Set the maxlevels to prevent out-of-memory. Currently there doesn't seem to be a cleaner way to set this:</span>
  <span class="nc">Kint</span><span class="o">::</span><span class="nv">$maxLevels</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div><h2 id="resources"> <a aria-labelledby="resources" class="anchor-heading" href="https://selwynpolit.github.io/d9book/debugging#resources"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Resources</h2><ul><li><p><a href="https://ddev.readthedocs.io/en/stable/">DDEV Documentation</a></p><li><p><a href="https://ddev.readthedocs.io/en/stable/users/debugging-profiling/step-debugging">Debugging with Xdebug in DDEV docs</a></p><li><p><a href="https://www.jetbrains.com/help/phpstorm/drupal-support.html#view_drupal_api_documentation">Debug Drush commands with PhpStorm at</a></p><li><p><a href="https://www.drupal.org/docs/develop/development-tools/configuring-phpstorm">Configuring PhpStorm Drupal.org docs updated September 2022</a></p><li><p><a href="https://www.jetbrains.com/help/phpstorm/drupal-support.html#debugging-drush-commands">Debugging Drush commands</a></p><li><p><a href="https://ddev.readthedocs.io/en/stable/users/debugging-profiling/step-debugging/#using-xdebug-on-a-port-other-than-the-default-9003">DDEV docs on using a different port for debugging</a></p><li><p><a href="https://www.altagrade.com/blog/how-install-devel-and-kint-drupal-9">How to setup Devel and Kint on Drupal 9 by Alex Aug 2021</a></p></li></li></li></li></li></li></li></ul><hr/> <script async="" crossorigin="anonymous" data-category="Q&amp;A" data-category-id="MDE4OkRpc2N1c3Npb25DYXRlZ29yeTMyMjY2NDE4" data-emit-metadata="0" data-input-position="bottom" data-lang="en" data-mapping="title" data-reactions-enabled="1" data-repo="selwynpolit/d9book" data-repo-id="MDEwOlJlcG9zaXRvcnkzMjUxNTQ1Nzg=" data-strict="0" data-theme="preferred_color_scheme" src="https://giscus.app/client.js"> </script><hr/><footer><p><a href="https://selwynpolit.github.io/d9book/debugging#top" id="back-to-top">Back to top</a></p><p class="text-small text-grey-dk-100 mb-0"><span xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/"> <a href="http://www.selwynpolit.github.io/d9book" property="dct:title" rel="cc:attributionURL">Drupal at your fingertips</a> by <a href="http://www.drupal.org/u/selwynpolit" property="cc:attributionName" rel="cc:attributionURL dct:creator">Selwyn Polit</a> is licensed under <a href="http://creativecommons.org/licenses/by/4.0/" rel="license noopener noreferrer" target="_blank">CC BY 4.0 <img src="https://mirrors.creativecommons.org/presskit/icons/cc.svg" style="height:16px!important;vertical-align:text-bottom;"/> <img src="https://mirrors.creativecommons.org/presskit/icons/by.svg" style="height:16px!important;vertical-align:text-bottom;"/> </a></span></p><div class="d-flex mt-2"><p class="text-small text-grey-dk-000 mb-0 mr-2"> Page last modified: <span class="d-inline-block">May 14 2023</span>.</p><p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/selwynpolit/d9book/tree/gh-pages/book/debugging.md" id="edit-this-page">Edit this page on GitHub</a></p></div></footer></div></div><div class="search-overlay"></div></div>
</body></link></meta></meta></meta></head></html>