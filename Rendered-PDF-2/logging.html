<!DOCTYPE html>
<html lang="en-US"><head><meta charset="utf-8"/><meta content="IE=Edge" http-equiv="X-UA-Compatible"/><link href="https://selwynpolit.github.io/d9book/assets/css/just-the-docs-default.css" rel="stylesheet"/> <script async="" src="https://www.googletagmanager.com/gtag/js?id=8V22RQEJ71"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', '8V22RQEJ71', { 'anonymize_ip': true }); </script> <script src="https://selwynpolit.github.io/d9book/assets/js/vendor/lunr.min.js"></script> <script src="https://selwynpolit.github.io/d9book/assets/js/just-the-docs.js"></script><meta content="width=device-width, initial-scale=1" name="viewport"/><link href="https://selwynpolit.github.io/d9book/assets/images/favicon.ico" rel="icon" type="image/x-icon"/><title>Logging | Drupal Book</title><meta content="Jekyll v4.3.2" name="generator"><meta content="Logging" property="og:title"><meta content="en_US" property="og:locale"><meta content="Drupal at your fingertips" name="description"/><meta content="Drupal at your fingertips" property="og:description"/><link href="https://selwynpolit.github.io/d9book/d9book/logging" rel="canonical"><meta content="https://selwynpolit.github.io/d9book/d9book/logging" property="og:url"/><meta content="Drupal Book" property="og:site_name"/><meta content="website" property="og:type"/><meta content="summary" name="twitter:card"/><meta content="Logging" property="twitter:title"/> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Drupal at your fingertips","headline":"Logging","url":"https://selwynpolit.github.io/d9book/d9book/logging"}</script><body> <a class="skip-to-main" href="https://selwynpolit.github.io/d9book/logging#main-content">Skip to main content</a> <svg class="d-none" xmlns="http://www.w3.org/2000/svg"> <symbol id="svg-link" viewbox="0 0 24 24"><title>Link</title><svg class="feather feather-link" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewbox="0 0 24 24"><title>Menu</title><svg class="feather feather-menu" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><line x1="3" x2="21" y1="12" y2="12"></line><line x1="3" x2="21" y1="6" y2="6"></line><line x1="3" x2="21" y1="18" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewbox="0 0 24 24"><title>Expand</title><svg class="feather feather-chevron-right" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol class="feather feather-external-link" fill="none" height="24" id="svg-external-link" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24"><title id="svg-external-link-title">(external link)</title><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" x2="21" y1="14" y2="3"></line> </symbol> <symbol id="svg-doc" viewbox="0 0 24 24"><title>Document</title><svg class="feather feather-file" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewbox="0 0 24 24"><title>Search</title><svg class="feather feather-search" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"> <circle cx="11" cy="11" r="8"></circle><line x1="21" x2="16.65" y1="21" y2="16.65"></line> </svg> </symbol> <symbol id="svg-copy" viewbox="0 0 16 16"><title>Copy</title><svg class="bi bi-clipboard" fill="currentColor" height="16" viewbox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"></path><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"></path> </svg> </symbol> <symbol id="svg-copied" viewbox="0 0 16 16"><title>Copied</title><svg class="bi bi-clipboard-check-fill" fill="currentColor" height="16" viewbox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"></path><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"></path> </svg> </symbol> </svg><div class="side-bar"><div class="site-header"> <a class="site-title lh-tight" href="https://selwynpolit.github.io/d9book/"> Drupal Book </a> <a class="site-button" href="https://selwynpolit.github.io/d9book/logging" id="menu-button"> <svg class="icon" viewbox="0 0 24 24"><use xlink:href="#svg-menu"></use></svg> </a></div><nav aria-label="Main" class="site-nav" id="site-nav"><ul class="nav-list"><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/">Home</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/actions">Actions</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/attribution">Attribution</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/bq">Batch and Queue</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/blocks">Blocks</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/caching">Caching</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/composer">Composer</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/config">Config</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/cron">Cron</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/dates">Dates and Times</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/debugging">Debugging</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/development">Development</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/drush">Drush</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/email">Email</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/entities">Entities</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/forms">Forms</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/general">General</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/off-island">Getting off the Island</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/hooks">Hooks</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/learn">Learning</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/links">Links</a><li class="nav-list-item active"><a class="nav-list-link active" href="https://selwynpolit.github.io/d9book/logging">Logging</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/menus">Menus</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/migrate">Migrate</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/modals">Modals</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/nodes-and-fields">Nodes and Fields</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/queries">Queries</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/redirects">Redirects</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/render">Render Arrays</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/routes">Routes</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/security">Security</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/services">Services</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/state">State</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/taxonomy">Taxonomy</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/dtt">Tests</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/twig">Twig</a></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></ul><ul class="nav-list"><li class="nav-list-item external"> <a class="nav-list-link external" href="https://github.com/selwynpolit/d9book/fork"> Fork me on GitHub <svg aria-labelledby="svg-external-link-title" viewbox="0 0 24 24"><use xlink:href="#svg-external-link"></use></svg> </a></li></ul></nav><footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</footer></div><div class="main" id="top"><div class="main-header" id="main-header"><div class="search"><div class="search-input-wrap"> <input aria-label="Search Drupal Book" autocomplete="off" class="search-input" id="search-input" placeholder="Search Drupal Book" tabindex="0" type="text"/> <label class="search-label" for="search-input"><svg class="search-icon" viewbox="0 0 24 24"><use xlink:href="#svg-search"></use></svg></label></div><div class="search-results" id="search-results"></div></div><nav aria-label="Auxiliary" class="aux-nav"><ul class="aux-nav-list"><li class="aux-nav-list-item"> <a class="site-button" href="https://twitter.com/selwynpolit" rel="noopener noreferrer" target="_blank"> <img alt="Twitter logo" src="https://atuin.ru/demo/simple-icons/icons/twitter.svg" style="width: 30px; height: 30px;" title="Author in Twitter"/> </a><li class="aux-nav-list-item"> <a class="site-button" href="https://github.com/selwynpolit/d9book/tree/gh-pages" rel="noopener noreferrer" target="_blank"> <img alt="GitHub logo" src="https://atuin.ru/demo/simple-icons/icons/github.svg" style="width: 30px; height: 30px;" title="D9Book on GitHub"/> </a></li></li></ul></nav></div><div class="main-content-wrap" id="main-content-wrap"><div class="main-content" id="main-content" role="main"><h1 class="no_toc fw-500" id="logging"> <a aria-labelledby="logging" class="anchor-heading" href="https://selwynpolit.github.io/d9book/logging#logging"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Logging</h1><h2 class="no_toc text-delta" id="table-of-contents"> <a aria-labelledby="table-of-contents" class="anchor-heading" href="https://selwynpolit.github.io/d9book/logging#table-of-contents"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Table of contents</h2><ul id="markdown-toc"><li><a href="https://selwynpolit.github.io/d9book/logging#quick-log-to-watchdog" id="markdown-toc-quick-log-to-watchdog">Quick log to watchdog</a><li><a href="https://selwynpolit.github.io/d9book/logging#log-an-email-notification-was-sent-to-the-the-email-address-for-the-site" id="markdown-toc-log-an-email-notification-was-sent-to-the-the-email-address-for-the-site">Log an email notification was sent to the the email address for the site.</a><li><a href="https://selwynpolit.github.io/d9book/logging#logging-from-a-service-using-dependency-injection" id="markdown-toc-logging-from-a-service-using-dependency-injection">Logging from a service using dependency injection</a><li><a href="https://selwynpolit.github.io/d9book/logging#another-example-using-the-logging-via-dependency-injection" id="markdown-toc-another-example-using-the-logging-via-dependency-injection">Another example using the logging via dependency injection</a><li><a href="https://selwynpolit.github.io/d9book/logging#logging-exceptions-from-a-try-catch-block" id="markdown-toc-logging-exceptions-from-a-try-catch-block">Logging exceptions from a try catch block</a><li><a href="https://selwynpolit.github.io/d9book/logging#display-a-message-in-the-notification-area" id="markdown-toc-display-a-message-in-the-notification-area">Display a message in the notification area</a><li><a href="https://selwynpolit.github.io/d9book/logging#display-a-variable-while-debugging" id="markdown-toc-display-a-variable-while-debugging">Display a variable while debugging</a><li><a href="https://selwynpolit.github.io/d9book/logging#reference" id="markdown-toc-reference">Reference</a></li></li></li></li></li></li></li></li></ul><p><img alt="views" src="https://api.visitor.plantree.me/visitor-badge/pv?label=views&amp;color=informational&amp;namespace=d9book&amp;key=logging.md"/></p><hr/><h2 id="quick-log-to-watchdog"> <a aria-labelledby="quick-log-to-watchdog" class="anchor-heading" href="https://selwynpolit.github.io/d9book/logging#quick-log-to-watchdog"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Quick log to watchdog</h2><p>With the Database Logging (dblog) module enabled, you can easily log messages to the database log (watchdog table)</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//Class with method name </span>
<span class="nv">$method</span> <span class="o">=</span> <span class="k">__METHOD__</span><span class="p">;</span> 

<span class="c1">// Function name only.</span>
<span class="nv">$function</span> <span class="o">=</span> <span class="k">__FUNCTION__</span><span class="p">;</span> 

<span class="c1">// Function name, filename, line number.</span>
<span class="nv">$str</span> <span class="o">=</span>  <span class="k">__FUNCTION__</span><span class="mf">.</span><span class="s2">" in "</span><span class="mf">.</span><span class="k">__FILE__</span><span class="mf">.</span><span class="s2">" at "</span><span class="mf">.</span><span class="k">__LINE__</span><span class="p">;</span>

<span class="nc">\Drupal</span><span class="o">::</span><span class="nf">logger</span><span class="p">(</span><span class="s1">'test'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">info</span><span class="p">(</span><span class="s2">"method = </span><span class="nv">$method</span><span class="s2">"</span><span class="p">);</span>
<span class="nc">\Drupal</span><span class="o">::</span><span class="nf">logger</span><span class="p">(</span><span class="s1">'test'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">info</span><span class="p">(</span><span class="s2">"Something goofed up at </span><span class="nv">$str</span><span class="s2">"</span><span class="p">);</span>
<span class="nc">\Drupal</span><span class="o">::</span><span class="nf">logger</span><span class="p">(</span><span class="s1">'test'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">debug</span><span class="p">(</span><span class="s2">"Something goofed up at </span><span class="nv">$str</span><span class="s2">"</span><span class="p">);</span>
<span class="nc">\Drupal</span><span class="o">::</span><span class="nf">logger</span><span class="p">(</span><span class="s1">'test'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">critical</span><span class="p">(</span><span class="s2">"Something goofed up at </span><span class="nv">$str</span><span class="s2">"</span><span class="p">);</span>

<span class="nc">\Drupal</span><span class="o">::</span><span class="nf">service</span><span class="p">(</span><span class="s1">'logger.factory'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s1">'test'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">error</span><span class="p">(</span><span class="s1">'This is my error message'</span><span class="p">);</span>
</code></pre></div></div><p>The parameter “test” used above is typically the module name. It is stored in the “type” field.</p><p>You can call difference methods such as <code class="language-plaintext highlighter-rouge">info</code>, <code class="language-plaintext highlighter-rouge">warning</code> etc. which populate the <code class="language-plaintext highlighter-rouge">severity</code> field with an integer indicating the severity of the issue.</p><p>The methods are defined in Drupal\Core\Logger\RfcLoggerTrait:</p><ul><li><p>emergency($message, $context)</p><li><p>alert($message, $context)</p><li><p>critical($message, $context)</p><li><p>error($message, $context)</p><li><p>warning($message, $context)</p><li><p>notice($message, $context)</p><li><p>info($message, $context)</p><li><p>debug($message, $context)</p></li></li></li></li></li></li></li></li></ul><p>More at <a href="https://www.drupal.org/docs/8/api/logging-api/overview">https://www.drupal.org/docs/8/api/logging-api/overview</a></p><h2 id="log-an-email-notification-was-sent-to-the-the-email-address-for-the-site"> <a aria-labelledby="log-an-email-notification-was-sent-to-the-the-email-address-for-the-site" class="anchor-heading" href="https://selwynpolit.github.io/d9book/logging#log-an-email-notification-was-sent-to-the-the-email-address-for-the-site"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Log an email notification was sent to the the email address for the site.</h2><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$email_config</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">config</span><span class="p">(</span><span class="s1">'system.site'</span><span class="p">);</span>
<span class="nv">$to</span> <span class="o">=</span> <span class="nv">$email_config</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s1">'mail'</span><span class="p">);</span>
<span class="c1">// Display message to screen.</span>
<span class="nv">$messenger</span><span class="o">-&gt;</span><span class="nf">addMessage</span><span class="p">(</span><span class="s2">"sent a message to </span><span class="nv">$to</span><span class="s2">"</span><span class="p">);</span>
<span class="c1">// Log it.</span>
<span class="nc">\Drupal</span><span class="o">::</span><span class="nf">logger</span><span class="p">(</span><span class="s1">'DIR'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">info</span><span class="p">(</span><span class="s2">"Email notification send to </span><span class="nv">$to</span><span class="s2"> succeeded"</span><span class="p">);</span>
</code></pre></div></div><p>Incidentally, calling <code class="language-plaintext highlighter-rouge">\Drupal::logger</code> like this</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">\Drupal</span><span class="o">::</span><span class="nf">logger</span><span class="p">(</span><span class="s1">'my_module'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">error</span><span class="p">(</span><span class="s1">'This is my error message'</span><span class="p">);</span>
</code></pre></div></div><p>actually does this under the covers:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">\Drupal</span><span class="o">::</span><span class="nf">service</span><span class="p">(</span><span class="s1">'logger.factory'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s1">'hello_world'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">error</span><span class="p">(</span><span class="s1">'This is my error  message'</span><span class="p">);</span>
</code></pre></div></div><h2 id="logging-from-a-service-using-dependency-injection"> <a aria-labelledby="logging-from-a-service-using-dependency-injection" class="anchor-heading" href="https://selwynpolit.github.io/d9book/logging#logging-from-a-service-using-dependency-injection"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Logging from a service using dependency injection</h2><p>From a controller e.g. WebsphereAddress.php</p><p>In the <code class="language-plaintext highlighter-rouge">websphere_commerce.services.yml</code> specify the <code class="language-plaintext highlighter-rouge">@logger.factory</code> to be passed into the constructor.</p><div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">services</span><span class="pi">:</span>
  <span class="na">websphere_commerce.address</span><span class="pi">:</span>
    <span class="na">class</span><span class="pi">:</span> <span class="s">Drupal\websphere_commerce\WebSphereAddressService</span>
    <span class="na">arguments</span><span class="pi">:</span> <span class="pi">[</span><span class="s1">'</span><span class="s">@config.factory'</span><span class="pi">,</span> <span class="s1">'</span><span class="s">@logger.factory'</span><span class="pi">]</span>
</code></pre></div></div><p>In the WebsphereAddress.php file specify use statements:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">use</span> <span class="nc">Drupal\Core\Logger\LoggerChannelFactory</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Drupal\Core\Logger\LoggerChannelFactoryInterface</span><span class="p">;</span>
</code></pre></div></div><p>Create a protected var to store the logger service:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cd">/**
 * @var Drupal\Core\Logger\LoggerChannelFactory
 */</span>
<span class="k">protected</span> <span class="nv">$logger</span><span class="p">;</span>
</code></pre></div></div><p>Here is the constructor:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cd">/**
 * WebsphereAddress constructor.
 *
 * @param \Drupal\Core\Config\ConfigFactoryInterface $config_factory
 *   Config factory.
 * @param \Drupal\Core\Logger\LoggerChannelFactoryInterface $channel_factory
 *   Logger factory.
 */</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">__construct</span><span class="p">(</span><span class="kt">ConfigFactoryInterface</span> <span class="nv">$config_factory</span><span class="p">,</span> <span class="kt">LoggerChannelFactoryInterface</span> <span class="nv">$channel_factory</span><span class="p">)</span> <span class="p">{</span>
  <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">websphereConfig</span> <span class="o">=</span> <span class="nv">$config_factory</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s1">'websphere_commerce.api_settings'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div><p>Log errors.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nv">$response</span><span class="p">[</span><span class="s1">'status'</span><span class="p">]</span> <span class="o">==</span> <span class="no">API_ERROR</span><span class="p">)</span> <span class="p">{</span>
  <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">logger</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s1">'websphere_commerce'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">alert</span><span class="p">(</span><span class="s2">"Error saving Shipping info to Websphere."</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div><h2 id="another-example-using-the-logging-via-dependency-injection"> <a aria-labelledby="another-example-using-the-logging-via-dependency-injection" class="anchor-heading" href="https://selwynpolit.github.io/d9book/logging#another-example-using-the-logging-via-dependency-injection"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Another example using the logging via dependency injection</h2><p>From the excellent folks at <a href="https://symfonycasts.com/tracks/drupal">symfonycasts.com</a> who have a sweet <a href="https://symfonycasts.com/screencast/drupal8-under-the-hood">Drupal 8 course</a> which is still relevant and worth checking out.</p><p>In your <code class="language-plaintext highlighter-rouge">dino_roar.services.yml</code> file, add the listener and specify the arguments of <code class="language-plaintext highlighter-rouge">['@logger.factory']</code></p><p>Note. You can find the factory info with Drupal console:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ drupal debug:container | grep log
</code></pre></div></div><p>one of the results specifies the factory which you can use below:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>logger.factory               Drupal\\Core\\Logger\\LoggerChannelFactory
</code></pre></div></div><p>or with Drush and devel</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ drush dcs log

- logger.dblog
- logger.drupaltodrush
- logger.factory
</code></pre></div></div><p>So dino_roar.dino_listener will pass the logger.factory service to your DinoListener class.</p><div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">dino_roar.dino_listener</span><span class="pi">:</span>
  <span class="na">class</span><span class="pi">:</span> <span class="s">Drupal\dino_roar\Jurassic\DinoListener</span>
  <span class="na">arguments</span><span class="pi">:</span> <span class="pi">[</span><span class="s1">'</span><span class="s">@logger.factory'</span><span class="pi">]</span>
  <span class="na">tags</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="pi">{</span><span class="nv">name</span><span class="pi">:</span> <span class="nv">event_subscriber</span><span class="pi">}</span>
</code></pre></div></div><p>in your <code class="language-plaintext highlighter-rouge">DinoListener.php</code> specify a constructor argument of <code class="language-plaintext highlighter-rouge">LoggerChannelFactoryInterface</code> and store it.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">namespace</span> <span class="nn">Drupal\dino_roar\Jurassic</span><span class="p">;</span>


<span class="kn">use</span> <span class="nc">Drupal\Core\Logger\LoggerChannelFactoryInterface</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Symfony\Component\EventDispatcher\EventSubscriberInterface</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Symfony\Component\HttpKernel\Event\GetResponseEvent</span><span class="p">;</span>
<span class="kn">use</span> <span class="nc">Symfony\Component\HttpKernel\KernelEvents</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">DinoListener</span> <span class="kd">implements</span> <span class="nc">EventSubscriberInterface</span> <span class="p">{</span>

  <span class="cd">/**
   * @var \Drupal\Core\Logger\LoggerChannelFactoryInterface
   */</span>
  <span class="k">private</span> <span class="nv">$loggerChannelFactory</span><span class="p">;</span>

  <span class="k">public</span> <span class="k">function</span> <span class="n">__construct</span><span class="p">(</span><span class="kt">LoggerChannelFactoryInterface</span> <span class="nv">$loggerChannelFactory</span><span class="p">)</span> <span class="p">{</span>

    <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">loggerChannelFactory</span> <span class="o">=</span> <span class="nv">$loggerChannelFactory</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">public</span> <span class="k">function</span> <span class="n">onKernelRequest</span><span class="p">(</span><span class="kt">GetResponseEvent</span> <span class="nv">$event</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$request</span> <span class="o">=</span> <span class="nv">$event</span><span class="o">-&gt;</span><span class="nf">getRequest</span><span class="p">();</span>
    <span class="nv">$shouldRoar</span> <span class="o">=</span> <span class="nv">$request</span><span class="o">-&gt;</span><span class="n">query</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s1">'roar'</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nv">$shouldRoar</span><span class="p">)</span> <span class="p">{</span>
      <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">loggerChannelFactory</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s1">'default'</span><span class="p">)</span>
        <span class="o">-&gt;</span><span class="nf">debug</span><span class="p">(</span><span class="s1">'Roar Requested ROOOOAAAARRR!'</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">public</span> <span class="k">static</span> <span class="k">function</span> <span class="n">getSubscribedEvents</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span>
      <span class="nc">KernelEvents</span><span class="o">::</span><span class="no">REQUEST</span> <span class="o">=&gt;</span> <span class="s1">'onKernelRequest'</span><span class="p">,</span>
    <span class="p">];</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div><h2 id="logging-exceptions-from-a-try-catch-block"> <a aria-labelledby="logging-exceptions-from-a-try-catch-block" class="anchor-heading" href="https://selwynpolit.github.io/d9book/logging#logging-exceptions-from-a-try-catch-block"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Logging exceptions from a try catch block</h2><p>In this controller, the try block calls the test() method which throws an exception. The catch block catches the exception and logs the message (and for fun displays a message in the notification area also.)</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">public</span> <span class="k">function</span> <span class="n">build</span><span class="p">()</span> <span class="p">{</span>

    <span class="k">try</span> <span class="p">{</span>
      <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">test</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">catch</span> <span class="p">(</span><span class="nc">\Exception</span> <span class="nv">$e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nf">watchdog_exception</span><span class="p">(</span><span class="s1">'nuts_connect'</span><span class="p">,</span> <span class="nv">$e</span><span class="p">);</span>
      <span class="nv">$messenger</span><span class="o">-&gt;</span><span class="nf">addMessage</span><span class="p">(</span><span class="s2">"No, I got caught!"</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="nv">$build</span><span class="p">[</span><span class="s1">'content'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>

      <span class="s1">'#type'</span> <span class="o">=&gt;</span> <span class="s1">'item'</span><span class="p">,</span>
      <span class="s1">'#markup'</span> <span class="o">=&gt;</span> <span class="nv">$str</span><span class="p">,</span>
    <span class="p">];</span>

    <span class="k">return</span> <span class="nv">$build</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">function</span> <span class="n">test</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nc">\Exception</span><span class="p">(</span><span class="s2">"blah"</span><span class="p">,</span> <span class="mi">7</span><span class="p">);</span>
  <span class="p">}</span>
</code></pre></div></div><h2 id="display-a-message-in-the-notification-area"> <a aria-labelledby="display-a-message-in-the-notification-area" class="anchor-heading" href="https://selwynpolit.github.io/d9book/logging#display-a-message-in-the-notification-area"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Display a message in the notification area</h2><p>You can display a message with:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$messenger</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">messenger</span><span class="p">();</span>
<span class="nv">$messenger</span><span class="o">-&gt;</span><span class="nf">addMessage</span><span class="p">(</span><span class="s2">"a message"</span><span class="p">);</span>
<span class="nv">$messenger</span><span class="o">-&gt;</span><span class="nf">addError</span><span class="p">(</span><span class="s2">"error message"</span><span class="p">);</span>
</code></pre></div></div><p>Or</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">\Drupal</span><span class="o">::</span><span class="nf">messenger</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">addError</span><span class="p">(</span><span class="s2">"migration failed"</span><span class="p">);</span>

<span class="nc">\Drupal</span><span class="o">::</span><span class="nf">messenger</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">addMessage</span><span class="p">(</span><span class="nv">$message</span><span class="p">,</span> <span class="nv">$type</span><span class="p">,</span> <span class="nv">$repeat</span><span class="p">);</span>
</code></pre></div></div><p>Use <code class="language-plaintext highlighter-rouge">$repeat = FALSE</code> to suppress duplicate messages.</p><p>Specify <code class="language-plaintext highlighter-rouge">MessengerInterface::TYPE_STATUS</code>,<code class="language-plaintext highlighter-rouge">MessengerInterface::TYPE_WARNING</code>, or <code class="language-plaintext highlighter-rouge">MessengerInterface::TYPE_ERROR</code> to indicate the severity.</p><p>Don’t forget</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">use</span> <span class="nc">Drupal\Core\Messenger\MessengerInterface</span><span class="p">;</span>
</code></pre></div></div><p>Note. <code class="language-plaintext highlighter-rouge">addMessage()</code> adds <code class="language-plaintext highlighter-rouge">class="messages messages--status"</code> to the div surrounding your message while addError adds <code class="language-plaintext highlighter-rouge">class="messages messages--status"</code> . Use these classes to format the message appropriately.</p><p>When you need to display a message in a form, use the <code class="language-plaintext highlighter-rouge">$this-&gt;messenger()</code> that is provided by the Drupal\Core\Messenger\MessengerTrait;</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">messenger</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">addStatus</span><span class="p">(</span><span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">t</span><span class="p">(</span><span class="s1">'Running in Destructive Mode - Changes ARE committed to the database!'</span><span class="p">));</span>
</code></pre></div></div><p>e.g.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">\Drupal</span><span class="o">::</span><span class="nf">messenger</span><span class="p">()</span><span class="o">-&gt;</span><span class="nf">addMessage</span><span class="p">(</span><span class="s1">'Program pending, please assign team and initialize. '</span><span class="p">,</span> <span class="nc">MessengerInterface</span><span class="o">::</span><span class="no">TYPE_WARNING</span><span class="p">);</span>
</code></pre></div></div><h2 id="display-a-variable-while-debugging"> <a aria-labelledby="display-a-variable-while-debugging" class="anchor-heading" href="https://selwynpolit.github.io/d9book/logging#display-a-variable-while-debugging"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Display a variable while debugging</h2><p>You can use var_dump and print_r but sometimes it is difficult to see where they display.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$is_front</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">service</span><span class="p">(</span><span class="s1">'path.matcher'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">isFrontPage</span><span class="p">();</span>
<span class="nv">$is_front</span> <span class="o">=</span> <span class="nv">$is_front</span> <span class="o">==</span> <span class="kc">TRUE</span> <span class="o">?</span> <span class="s2">"YEP"</span> <span class="o">:</span> <span class="s2">"NOPE"</span><span class="p">;</span>
<span class="nv">$messenger</span><span class="o">-&gt;</span><span class="nf">addMessage</span><span class="p">(</span><span class="s2">"is_front = </span><span class="nv">$is_front</span><span class="s2">"</span><span class="p">);</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$is_front</span><span class="p">);</span>
<span class="nb">print_r</span><span class="p">(</span><span class="nv">$is_front</span><span class="p">);</span>
</code></pre></div></div><p><img alt="Displaying var_dump in Drupal" src="https://selwynpolit.github.io/d9book/assets/images/vardump.png"/></p><h2 id="reference"> <a aria-labelledby="reference" class="anchor-heading" href="https://selwynpolit.github.io/d9book/logging#reference"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Reference</h2><ul><li>How to Log Messages in Drupal 8 by Amber Matz of Drupalize.me Updated October 2015 <a href="https://drupalize.me/blog/201510/how-log-messages-drupal-8">https://drupalize.me/blog/201510/how-log-messages-drupal-8</a><li>Logging API updated January 2023 <a href="https://www.drupal.org/docs/8/api/logging-api/overview">https://www.drupal.org/docs/8/api/logging-api/overview</a><li>Drupal APIs <a href="https://www.drupal.org/docs/drupal-apis">https://www.drupal.org/docs/drupal-apis</a></li></li></li></ul><hr/> <script async="" crossorigin="anonymous" data-category="Q&amp;A" data-category-id="MDE4OkRpc2N1c3Npb25DYXRlZ29yeTMyMjY2NDE4" data-emit-metadata="0" data-input-position="bottom" data-lang="en" data-mapping="title" data-reactions-enabled="1" data-repo="selwynpolit/d9book" data-repo-id="MDEwOlJlcG9zaXRvcnkzMjUxNTQ1Nzg=" data-strict="0" data-theme="preferred_color_scheme" src="https://giscus.app/client.js"> </script><hr/><footer><p><a href="https://selwynpolit.github.io/d9book/logging#top" id="back-to-top">Back to top</a></p><p class="text-small text-grey-dk-100 mb-0"><span xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/"> <a href="http://www.selwynpolit.github.io/d9book" property="dct:title" rel="cc:attributionURL">Drupal at your fingertips</a> by <a href="http://www.drupal.org/u/selwynpolit" property="cc:attributionName" rel="cc:attributionURL dct:creator">Selwyn Polit</a> is licensed under <a href="http://creativecommons.org/licenses/by/4.0/" rel="license noopener noreferrer" target="_blank">CC BY 4.0 <img src="https://mirrors.creativecommons.org/presskit/icons/cc.svg" style="height:16px!important;vertical-align:text-bottom;"/> <img src="https://mirrors.creativecommons.org/presskit/icons/by.svg" style="height:16px!important;vertical-align:text-bottom;"/> </a></span></p><div class="d-flex mt-2"><p class="text-small text-grey-dk-000 mb-0 mr-2"> Page last modified: <span class="d-inline-block">Apr 13 2023</span>.</p><p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/selwynpolit/d9book/tree/gh-pages/book/logging.md" id="edit-this-page">Edit this page on GitHub</a></p></div></footer></div></div><div class="search-overlay"></div></div>
</body></link></meta></meta></meta></head></html>