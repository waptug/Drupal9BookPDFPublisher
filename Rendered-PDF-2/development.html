<!DOCTYPE html>
<html lang="en-US"><head><meta charset="utf-8"/><meta content="IE=Edge" http-equiv="X-UA-Compatible"/><link href="https://selwynpolit.github.io/d9book/assets/css/just-the-docs-default.css" rel="stylesheet"/> <script async="" src="https://www.googletagmanager.com/gtag/js?id=8V22RQEJ71"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', '8V22RQEJ71', { 'anonymize_ip': true }); </script> <script src="https://selwynpolit.github.io/d9book/assets/js/vendor/lunr.min.js"></script> <script src="https://selwynpolit.github.io/d9book/assets/js/just-the-docs.js"></script><meta content="width=device-width, initial-scale=1" name="viewport"/><link href="https://selwynpolit.github.io/d9book/assets/images/favicon.ico" rel="icon" type="image/x-icon"/><title>Development | Drupal Book</title><meta content="Jekyll v4.3.2" name="generator"><meta content="Development" property="og:title"><meta content="en_US" property="og:locale"><meta content="Drupal at your fingertips" name="description"/><meta content="Drupal at your fingertips" property="og:description"/><link href="https://selwynpolit.github.io/d9book/d9book/development" rel="canonical"><meta content="https://selwynpolit.github.io/d9book/d9book/development" property="og:url"/><meta content="Drupal Book" property="og:site_name"/><meta content="website" property="og:type"/><meta content="summary" name="twitter:card"/><meta content="Development" property="twitter:title"/> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Drupal at your fingertips","headline":"Development","url":"https://selwynpolit.github.io/d9book/d9book/development"}</script><body> <a class="skip-to-main" href="https://selwynpolit.github.io/d9book/development#main-content">Skip to main content</a> <svg class="d-none" xmlns="http://www.w3.org/2000/svg"> <symbol id="svg-link" viewbox="0 0 24 24"><title>Link</title><svg class="feather feather-link" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewbox="0 0 24 24"><title>Menu</title><svg class="feather feather-menu" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><line x1="3" x2="21" y1="12" y2="12"></line><line x1="3" x2="21" y1="6" y2="6"></line><line x1="3" x2="21" y1="18" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewbox="0 0 24 24"><title>Expand</title><svg class="feather feather-chevron-right" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol class="feather feather-external-link" fill="none" height="24" id="svg-external-link" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24"><title id="svg-external-link-title">(external link)</title><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" x2="21" y1="14" y2="3"></line> </symbol> <symbol id="svg-doc" viewbox="0 0 24 24"><title>Document</title><svg class="feather feather-file" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewbox="0 0 24 24"><title>Search</title><svg class="feather feather-search" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"> <circle cx="11" cy="11" r="8"></circle><line x1="21" x2="16.65" y1="21" y2="16.65"></line> </svg> </symbol> <symbol id="svg-copy" viewbox="0 0 16 16"><title>Copy</title><svg class="bi bi-clipboard" fill="currentColor" height="16" viewbox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"></path><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"></path> </svg> </symbol> <symbol id="svg-copied" viewbox="0 0 16 16"><title>Copied</title><svg class="bi bi-clipboard-check-fill" fill="currentColor" height="16" viewbox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"></path><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"></path> </svg> </symbol> </svg><div class="side-bar"><div class="site-header"> <a class="site-title lh-tight" href="https://selwynpolit.github.io/d9book/"> Drupal Book </a> <a class="site-button" href="https://selwynpolit.github.io/d9book/development" id="menu-button"> <svg class="icon" viewbox="0 0 24 24"><use xlink:href="#svg-menu"></use></svg> </a></div><nav aria-label="Main" class="site-nav" id="site-nav"><ul class="nav-list"><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/">Home</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/actions">Actions</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/attribution">Attribution</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/bq">Batch and Queue</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/blocks">Blocks</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/caching">Caching</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/composer">Composer</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/config">Config</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/cron">Cron</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/dates">Dates and Times</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/debugging">Debugging</a><li class="nav-list-item active"><a class="nav-list-link active" href="https://selwynpolit.github.io/d9book/development">Development</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/drush">Drush</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/email">Email</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/entities">Entities</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/forms">Forms</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/general">General</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/off-island">Getting off the Island</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/hooks">Hooks</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/learn">Learning</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/links">Links</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/logging">Logging</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/menus">Menus</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/migrate">Migrate</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/modals">Modals</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/nodes-and-fields">Nodes and Fields</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/queries">Queries</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/redirects">Redirects</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/render">Render Arrays</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/routes">Routes</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/security">Security</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/services">Services</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/state">State</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/taxonomy">Taxonomy</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/dtt">Tests</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/twig">Twig</a></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></ul><ul class="nav-list"><li class="nav-list-item external"> <a class="nav-list-link external" href="https://github.com/selwynpolit/d9book/fork"> Fork me on GitHub <svg aria-labelledby="svg-external-link-title" viewbox="0 0 24 24"><use xlink:href="#svg-external-link"></use></svg> </a></li></ul></nav><footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</footer></div><div class="main" id="top"><div class="main-header" id="main-header"><div class="search"><div class="search-input-wrap"> <input aria-label="Search Drupal Book" autocomplete="off" class="search-input" id="search-input" placeholder="Search Drupal Book" tabindex="0" type="text"/> <label class="search-label" for="search-input"><svg class="search-icon" viewbox="0 0 24 24"><use xlink:href="#svg-search"></use></svg></label></div><div class="search-results" id="search-results"></div></div><nav aria-label="Auxiliary" class="aux-nav"><ul class="aux-nav-list"><li class="aux-nav-list-item"> <a class="site-button" href="https://twitter.com/selwynpolit" rel="noopener noreferrer" target="_blank"> <img alt="Twitter logo" src="https://atuin.ru/demo/simple-icons/icons/twitter.svg" style="width: 30px; height: 30px;" title="Author in Twitter"/> </a><li class="aux-nav-list-item"> <a class="site-button" href="https://github.com/selwynpolit/d9book/tree/gh-pages" rel="noopener noreferrer" target="_blank"> <img alt="GitHub logo" src="https://atuin.ru/demo/simple-icons/icons/github.svg" style="width: 30px; height: 30px;" title="D9Book on GitHub"/> </a></li></li></ul></nav></div><div class="main-content-wrap" id="main-content-wrap"><div class="main-content" id="main-content" role="main"><h1 class="no_toc fw-500" id="development"> <a aria-labelledby="development" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#development"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Development</h1><h2 class="no_toc text-delta" id="table-of-contents"> <a aria-labelledby="table-of-contents" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#table-of-contents"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Table of contents</h2><ul id="markdown-toc"><li><a href="https://selwynpolit.github.io/d9book/development#local-drupal-site-setup" id="markdown-toc-local-drupal-site-setup">Local Drupal site setup</a><ul><li><a href="https://selwynpolit.github.io/d9book/development#first-option" id="markdown-toc-first-option">First Option</a><li><a href="https://selwynpolit.github.io/d9book/development#second-option" id="markdown-toc-second-option">Second Option</a></li></li></ul><li><a href="https://selwynpolit.github.io/d9book/development#checking-your-permissions" id="markdown-toc-checking-your-permissions">Checking Your Permissions</a><li><a href="https://selwynpolit.github.io/d9book/development#converting-existing-site-non-composer-based-to-use-composer" id="markdown-toc-converting-existing-site-non-composer-based-to-use-composer">Converting existing site (non-composer based) to use composer</a><li><a href="https://selwynpolit.github.io/d9book/development#composer-best-practices-for-drupal-8" id="markdown-toc-composer-best-practices-for-drupal-8">Composer best practices for Drupal 8</a><li><a href="https://selwynpolit.github.io/d9book/development#ddev" id="markdown-toc-ddev">DDEV</a><ul><li><a href="https://selwynpolit.github.io/d9book/development#local-config----your-ddevconfiglocalyaml" id="markdown-toc-local-config----your-ddevconfiglocalyaml">Local config - your .ddev/config.local.yaml</a><ul><li><a href="https://selwynpolit.github.io/d9book/development#nfs" id="markdown-toc-nfs">NFS</a><li><a href="https://selwynpolit.github.io/d9book/development#mutagen" id="markdown-toc-mutagen">Mutagen</a></li></li></ul><li><a href="https://selwynpolit.github.io/d9book/development#setup-aliases-in-ddev" id="markdown-toc-setup-aliases-in-ddev">setup aliases in ddev</a><li><a href="https://selwynpolit.github.io/d9book/development#upgrading-ddev" id="markdown-toc-upgrading-ddev">Upgrading ddev</a><li><a href="https://selwynpolit.github.io/d9book/development#show-others-your-ddev-local-site" id="markdown-toc-show-others-your-ddev-local-site">Show others your ddev local site</a><li><a href="https://selwynpolit.github.io/d9book/development#email-capture-and-review" id="markdown-toc-email-capture-and-review">Email Capture and Review</a><li><a href="https://selwynpolit.github.io/d9book/development#ddev-and-xdebug" id="markdown-toc-ddev-and-xdebug">DDEV and Xdebug</a><li><a href="https://selwynpolit.github.io/d9book/development#command-line-or-drush-debugging" id="markdown-toc-command-line-or-drush-debugging">Command line or drush debugging</a><li><a href="https://selwynpolit.github.io/d9book/development#use-drush-commands-in-your-shell-with-ddev" id="markdown-toc-use-drush-commands-in-your-shell-with-ddev">Use drush commands in your shell with DDEV</a><li><a href="https://selwynpolit.github.io/d9book/development#load-your-data-from-an-acquia-site" id="markdown-toc-load-your-data-from-an-acquia-site">Load your data from an Acquia site</a><li><a href="https://selwynpolit.github.io/d9book/development#cleanup-some-disk-space" id="markdown-toc-cleanup-some-disk-space">Cleanup some disk space</a><li><a href="https://selwynpolit.github.io/d9book/development#accessing-specific-containers" id="markdown-toc-accessing-specific-containers">Accessing specific containers</a></li></li></li></li></li></li></li></li></li></li></li></ul><li><a href="https://selwynpolit.github.io/d9book/development#ddev-troubleshooting" id="markdown-toc-ddev-troubleshooting">DDEV Troubleshooting</a><ul><li><a href="https://selwynpolit.github.io/d9book/development#running-out-of-docker-disk-space" id="markdown-toc-running-out-of-docker-disk-space">Running out of docker disk space</a><li><a href="https://selwynpolit.github.io/d9book/development#ddev-wont-start" id="markdown-toc-ddev-wont-start">DDEV won’t start</a></li></li></ul><li><a href="https://selwynpolit.github.io/d9book/development#phpstorm" id="markdown-toc-phpstorm">PHPStorm</a><ul><li><a href="https://selwynpolit.github.io/d9book/development#setting-up-phpstorm-and-drupal" id="markdown-toc-setting-up-phpstorm-and-drupal">Setting up PHPStorm and Drupal</a><li><a href="https://selwynpolit.github.io/d9book/development#phpstorm-and-xdebug" id="markdown-toc-phpstorm-and-xdebug">PHPStorm and Xdebug</a><ul><li><a href="https://selwynpolit.github.io/d9book/development#add-a-breakpoint-in-code" id="markdown-toc-add-a-breakpoint-in-code">add a breakpoint in code</a></li></ul><li><a href="https://selwynpolit.github.io/d9book/development#collecting-phpstorm-debugging-logs" id="markdown-toc-collecting-phpstorm-debugging-logs">Collecting PhpStorm debugging logs</a></li></li></li></ul><li><a href="https://selwynpolit.github.io/d9book/development#troubleshooting-xdebug-with-ddev" id="markdown-toc-troubleshooting-xdebug-with-ddev">Troubleshooting Xdebug with DDEV</a><li><a href="https://selwynpolit.github.io/d9book/development#what-is-listening-on-port-9000" id="markdown-toc-what-is-listening-on-port-9000">What is listening on port 9000?</a><li><a href="https://selwynpolit.github.io/d9book/development#setup-settingslocalphp-and-disable-cache" id="markdown-toc-setup-settingslocalphp-and-disable-cache">Setup settings.local.php and disable Cache</a><li><a href="https://selwynpolit.github.io/d9book/development#developmentservicesyml" id="markdown-toc-developmentservicesyml">Development.services.yml</a><li><a href="https://selwynpolit.github.io/d9book/development#enable-twig-debugging-output-in-source" id="markdown-toc-enable-twig-debugging-output-in-source">Enable twig debugging output in source</a><li><a href="https://selwynpolit.github.io/d9book/development#kint" id="markdown-toc-kint">Kint</a><ul><li><a href="https://selwynpolit.github.io/d9book/development#setup" id="markdown-toc-setup">Setup</a><li><a href="https://selwynpolit.github.io/d9book/development#add-kint-to-a-custom-module" id="markdown-toc-add-kint-to-a-custom-module">Add kint to a custom module</a><li><a href="https://selwynpolit.github.io/d9book/development#dump-variables-in-a-twig-template" id="markdown-toc-dump-variables-in-a-twig-template">Dump variables in a TWIG template</a><li><a href="https://selwynpolit.github.io/d9book/development#kintdump" id="markdown-toc-kintdump">Kint::dump</a><li><a href="https://selwynpolit.github.io/d9book/development#set-max-levels-to-avoid-running-out-of-memory" id="markdown-toc-set-max-levels-to-avoid-running-out-of-memory">Set max levels to avoid running out of memory</a></li></li></li></li></li></ul><li><a href="https://selwynpolit.github.io/d9book/development#replacing-deprecated-functions" id="markdown-toc-replacing-deprecated-functions">Replacing deprecated functions</a><li><a href="https://selwynpolit.github.io/d9book/development#missing-module" id="markdown-toc-missing-module">Missing module</a><li><a href="https://selwynpolit.github.io/d9book/development#you-have-requested-a-non-existent-service" id="markdown-toc-you-have-requested-a-non-existent-service">You have requested a non-existent service</a><li><a href="https://selwynpolit.github.io/d9book/development#resources" id="markdown-toc-resources">Resources</a></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></ul><p><img alt="views" src="https://api.visitor.plantree.me/visitor-badge/pv?label=views&amp;color=informational&amp;namespace=d9book&amp;key=development.md"/></p><hr/><h2 id="local-drupal-site-setup"> <a aria-labelledby="local-drupal-site-setup" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#local-drupal-site-setup"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Local Drupal site setup</h2><p>Local development is best done using containers and <a href="https://github.com/drud/ddev">DDEV</a>. Setting up a local site is a completely painless process.</p><p>Pick one of these options after installing Docker and Ddev:</p><h4 id="first-option"> <a aria-labelledby="first-option" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#first-option"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> First Option</h4><p>Using the DDEV Quickstart guides to install Drupal, Wordpress, TYPO3, Backdrop, Magento, Laravel etc. at <a href="https://ddev.readthedocs.io/en/stable/users/quickstart/#drupal">https://ddev.readthedocs.io/en/stable/users/quickstart/#drupal</a></p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mkdir my-drupal10-site
cd my-drupal10-site
ddev config --project-type=drupal10 --docroot=web --create-docroot
ddev start
ddev composer create "drupal/recommended-project" --no-install
ddev composer require drush/drush --no-install
ddev composer install
ddev drush site:install -y
ddev drush uli
ddev launch
</code></pre></div></div><p>OR</p><h4 id="second-option"> <a aria-labelledby="second-option" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#second-option"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Second Option</h4><p>From <a href="https://www.drupal.org/docs/official_docs/en/_local_development_guide.html">https://www.drupal.org/docs/official_docs/en/_local_development_guide.html</a></p><p>Start by specifying your SITE_NAME using export:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> export SITE_NAME=d9site 
 export SITE_NAME=clientsite
</code></pre></div></div><p>Here are all the steps:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export SITE_NAME=my-drupal-site
composer create-project drupal/recommended-project $SITE_NAME
cd $SITE_NAME
ddev config --docroot=web --project-name=$SITE_NAME --project-type=drupal9
ddev start
ddev exec drush site-install --account-name=admin --account-pass=admin
</code></pre></div></div><h2 id="checking-your-permissions"> <a aria-labelledby="checking-your-permissions" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#checking-your-permissions"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Checking Your Permissions</h2><p>During the wizard installation, or when your welcome page first loads, you might see a warning about the permissions settings on your <code class="language-plaintext highlighter-rouge">/sites/web/default</code> directory and one file inside that directory: <code class="language-plaintext highlighter-rouge">settings.php</code>.</p><p>After the installation script runs, <a href="https://www.drupal.org/docs/7/install/step-3-create-settingsphp-and-the-files-directory">Drupal will try to set the web/sites/default directory permissions to read and execute for all groups</a>: this is a 555 permissions setting. It will also attempt to set permissions for default/settings.php to read-only, or 444. If you encounter this warning, run these two chmod commands from your project’s root directory. Failure to do so poses a security risk:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>chmod 555 web/sites/default
</code></pre></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>chmod 444 web/sites/default/settings.php
</code></pre></div></div><p>To verify that you have the correct permissions, run this <code class="language-plaintext highlighter-rouge">ls</code> command with the a, l, h, and d switches and check that your permissions match the following output:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ls -alhd web/sites/default web/sites/default/settings.php

dr-xr-xr-x 8 sammy staff 256 Jul 21 12:56 web/sites/default
-r--r--r-- 1 sammy staff 249 Jul 21 12:12 web/sites/default/settings.php
</code></pre></div></div><p>You are now ready to develop a Drupal website on your local machine.</p><h2 id="converting-existing-site-non-composer-based-to-use-composer"> <a aria-labelledby="converting-existing-site-non-composer-based-to-use-composer" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#converting-existing-site-non-composer-based-to-use-composer"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Converting existing site (non-composer based) to use composer</h2><p><a href="https://github.com/grasmash/composerize-drupal">Composerize Drupal</a></p><p>Also for <a href="https://drupalize.me/tutorial/use-composer-your-drupal-project?p=3233">manual steps</a></p><h2 id="composer-best-practices-for-drupal-8"> <a aria-labelledby="composer-best-practices-for-drupal-8" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#composer-best-practices-for-drupal-8"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Composer best practices for Drupal 8</h2><p><a href="https://www.lullabot.com/articles/drupal-8-composer-best-practices">https://www.lullabot.com/articles/drupal-8-composer-best-practices</a></p><h2 id="ddev"> <a aria-labelledby="ddev" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#ddev"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> DDEV</h2><p>For local Docker container development on any platform, there is no better tool than DDEV. This is a <a href="https://ddev.readthedocs.io/en/stable/">well-documented</a>, <a href="https://ddev.readthedocs.io/en/stable/#support-and-user-contributed-documentation">well-supported</a> tool by the Amazing Randy Fay. You can get help from him or some of the other friendly folks on <a href="https://discord.gg/hCZFfAMc5k">Discord</a> almost instantly.</p><p>From the docs:</p><ul><li><p>Lots of built-in help: ddev help and ddev help &lt;command&gt;. You'll find examples and explanations.</p><li><p><a href="https://ddev.readthedocs.io/en/stable/users/faq/">DDEV Documentation</a></p><li><p><a href="https://stackoverflow.com/questions/tagged/ddev">DDEV Stack Overflow</a> for support and frequently asked questions. We respond quite quickly here and the results provide quite a library of user-curated solutions.</p><li><p><a href="https://github.com/drud/ddev/issues">DDEV issue queue</a> for bugs and feature requests</p><li><p>Interactive community support on <a href="https://discord.gg/hCZFfAMc5k">Discord</a> for everybody, plus sub-channels for CMS-specific questions and answers.</p><li><p><a href="https://github.com/drud/ddev-contrib">ddev-contrib</a> repo provides a number of vetted user-contributed recipes for extending and using DDEV. Your contributions are welcome.</p><li><p><a href="https://github.com/drud/awesome-ddev">awesome-ddev</a> repo has loads of external resources, blog posts, recipes, screencasts, and the like. Your contributions are welcome.</p><li><p><a href="https://twitter.com/search?q=%23ddev&amp;src=typd&amp;f=live">Twitter with tag #ddev</a> will get to us, but it's not as good for interactive support, but we'll answer anywhere.</p></li></li></li></li></li></li></li></li></ul><h3 id="local-config----your-ddevconfiglocalyaml"> <a aria-labelledby="local-config----your-ddevconfiglocalyaml" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#local-config----your-ddevconfiglocalyaml"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Local config - your .ddev/config.local.yaml</h3><p>From https://ddev.readthedocs.io/en/stable/users/extend/config_yaml</p><ul><li><p>You can override the config.yaml with extra files named <code class="language-plaintext highlighter-rouge">config.*.yaml\</code>. For example, many teams use <code class="language-plaintext highlighter-rouge">config.local.yaml</code> for configuration that is specific to one environment, and that is not intended to be checked into the team’s default config.yaml.</p><li><p>You could add a <code class="language-plaintext highlighter-rouge">config.selwyn.yaml</code> for Selwyn-specific values.</p><li><p>Use ddev start (or ddev restart) after making changes to get the changes to take effect.</p></li></li></li></ul><p>In the endless quest for speed in local development, try using NFS or Mutagen on MAC OS. Apparently the WSL2 setup on Windows 10/11 is the fastest performer for DDEV at th time of this writing.</p><h4 id="nfs"> <a aria-labelledby="nfs" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#nfs"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> NFS</h4><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">router_http_port</span><span class="pi">:</span> <span class="s">\"80\"</span>
<span class="na">router_https_port</span><span class="pi">:</span> <span class="s">\"443\"</span>
<span class="na">timezone</span><span class="pi">:</span> <span class="s">America/Chicago</span>
<span class="c1"># and for nfs</span>
<span class="na">nfs_mount_enabled</span><span class="pi">:</span> <span class="kc">true</span>
</code></pre></div></div><h4 id="mutagen"> <a aria-labelledby="mutagen" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#mutagen"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Mutagen</h4><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># instead of nfs, use mutagen</span>
<span class="na">nfs_mount_enabled</span><span class="pi">:</span> <span class="kc">false</span>
<span class="na">mutagen_enabled</span><span class="pi">:</span> <span class="kc">true</span>
</code></pre></div></div><h3 id="setup-aliases-in-ddev"> <a aria-labelledby="setup-aliases-in-ddev" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#setup-aliases-in-ddev"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> setup aliases in ddev</h3><p>I love short linux aliases like ll (or just l) for listing files. If you spend time poking around the file system in your containers this makes life so much better. A cool new feature since Ddev v15.1 lets you add aliases using this technique</p><p>Use ddev ssh to “ssh” into the container and then type ll to list the files in a directory.</p><p>Either copy <code class="language-plaintext highlighter-rouge">.ddev/homeadditions/bash_aliases.example</code> to <code class="language-plaintext highlighter-rouge">.ddev/homeadditions/bash_aliases</code> and add them there!</p><p>OR</p><p>Create a file <code class="language-plaintext highlighter-rouge">.ddev/homeadditions/.bash_aliases</code> with these contents: note. those are the letter L lower case (as in lima).</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>alias ll=\"ls -lhAp"
alias l=\"ls -lhAp"
</code></pre></div></div><p>Note. don’t use <code class="language-plaintext highlighter-rouge">.homeadditions</code> - use the <code class="language-plaintext highlighter-rouge">homeadditions</code>.</p><h3 id="upgrading-ddev"> <a aria-labelledby="upgrading-ddev" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#upgrading-ddev"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Upgrading ddev</h3><p>After you install a new version of ddev, run <code class="language-plaintext highlighter-rouge">ddev stop</code> and then <code class="language-plaintext highlighter-rouge">ddev config</code> to reconfigure things for your project. Just press enter for all the questions. It keeps things rolling smoothly. Run <code class="language-plaintext highlighter-rouge">ddev start</code> to start it all back up again</p><h3 id="show-others-your-ddev-local-site"> <a aria-labelledby="show-others-your-ddev-local-site" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#show-others-your-ddev-local-site"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Show others your ddev local site</h3><p>Sharing your DDEV-Local site via a public URL using <code class="language-plaintext highlighter-rouge">ddev share</code> and ngrok. by Mike Anello</p><p>https://www.drupaleasy.com/blogs/ultimike/2019/06/sharing-your-ddev-local-site-public-url-using-ddev-share-and-ngrok</p><h3 id="email-capture-and-review"> <a aria-labelledby="email-capture-and-review" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#email-capture-and-review"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Email Capture and Review</h3><p>MailHog is a mail catcher which is configured to capture and display emails sent by PHP in the development environment.</p><p>After your project is started, access the MailHog web interface at its default port:</p><p>http://mysite.ddev.site:8025</p><p>Please note this will not intercept emails if your application is configured to use SMTP or a 3rd-party ESP integration. If you are using SMTP for outgoing mail handling (Swiftmailer or SMTP modules for example), update your application configuration to use localhost on port 1025 as the SMTP server locally in order to use MailHog.</p><p><code class="language-plaintext highlighter-rouge">ddev launch -m</code> will launch the MailHog UI.</p><h3 id="ddev-and-xdebug"> <a aria-labelledby="ddev-and-xdebug" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#ddev-and-xdebug"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> DDEV and Xdebug</h3><p>This is a magical match made in heaven. To enable or disable Xdebug use</p><p><code class="language-plaintext highlighter-rouge">$ ddev xdebug on</code></p><p>and </p><p><code class="language-plaintext highlighter-rouge">$ ddev xdebug off</code></p><p>Note. This will slow everything down because xdebug has a significant performance impact so be sure to disable it when you are finished with your debugging session.</p><p>In phpstorm, you can uncheck the following settings:</p><ul><li>force break at first line when no path mapping is specified<li>force break at first line when a script is outside the project</li></li></ul><p>Note. we usually use port 9000 for xdebug look in <code class="language-plaintext highlighter-rouge">.ddev/php/xdebug_report_port.ini</code> for the real port settings. Recently for a project I found it set to 11011</p><p>The contents of the file are:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[PHP]

xdebug.remote_port=11011
</code></pre></div></div><p>For phpstorm, if you start listening for a debug connection, it should automatically try to create a debug server config for you. If it doesn’t manually create one</p><p>e.g name: tea.ddev.site</p><p>host tea.ddev.site</p><p>port: 80</p><p>debugger: xdebug</p><p>check use path mappings</p><p>for docroot specify: /var/www/html/docroot (i.e. wherever index.php is)</p><h3 id="command-line-or-drush-debugging"> <a aria-labelledby="command-line-or-drush-debugging" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#command-line-or-drush-debugging"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Command line or drush debugging</h3><p>For command line or drush debugging (xdebug, phpstorm)</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ddev ssh
</code></pre></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export PHP_IDE_CONFIG=\"serverName=d8git.ddev.site\"
</code></pre></div></div><p>or</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export PHP_IDE_CONFIG=\"serverName=inside-mathematics.ddev.site\"
</code></pre></div></div><p>confirm debug is turned on</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>php -i | grep debug
</code></pre></div></div><p>You should see:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>xdebug support =&gt; enabled
</code></pre></div></div><p>Also you can confirm the port</p><p>set a server in phpstorm that matches the name <code class="language-plaintext highlighter-rouge">d8git.ddev.site</code> or <code class="language-plaintext highlighter-rouge">inside-mathematics.ddev.site</code>.</p><p>Configure the server to use path mappings</p><p><code class="language-plaintext highlighter-rouge">/Users/selwyn/Sites/ddev 82 ---&gt; /var/www/html</code></p><p>click listen for debug connections button</p><p>set breakpoint and run</p><p>replace <code class="language-plaintext highlighter-rouge">d8git.ddev.site</code> with the name of your project</p><p>NOTE!!!!. You must execute drush from the vendor dir or you will always be ignored:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>../vendor/drush/drush/drush fixmat
</code></pre></div></div><p>If it doesn’t seem to work, try enable Break at first line in PHP scripts - something will always stop then.</p><p>more at https://stackoverflow.com/questions/50283253/how-can-i-step-debug-a-drush-command-with-ddev-and-phpstorm</p><h3 id="use-drush-commands-in-your-shell-with-ddev"> <a aria-labelledby="use-drush-commands-in-your-shell-with-ddev" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#use-drush-commands-in-your-shell-with-ddev"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Use drush commands in your shell with DDEV</h3><p>If you do local development, you can use syntax like <code class="language-plaintext highlighter-rouge">ddev drush cst</code> to execute drush commands in the container. This is slower than running on your native system because they are executed in the container. I prefer using drush directly on the host computer.</p><p>To do this install PHP as well drush launcher. Once these are working, you can <code class="language-plaintext highlighter-rouge">cd</code> into the project directory and issue commands like <code class="language-plaintext highlighter-rouge">drush cr</code>, <code class="language-plaintext highlighter-rouge">drush cst</code> or <code class="language-plaintext highlighter-rouge">drush cim -y</code> etc. It is <em>so</em> very quick and smooth. (Note. this is the case with MacOS and Linux but I don’t really know how it works on Windows.)</p><p><a href="https://github.com/drush-ops/drush-launcher">Details for Drush Launcher</a></p><p>From <a href="https://www.drush.org/latest/install/">Installation of Drush Launcher</a></p><ul><li>To be able to call drush from anywhere, install the <a href="https://github.com/drush-ops/drush-launcher">Drush Launcher</a>. Launcher is a small program which listens on your $PATH and hands control to a site-local Drush that is in the /vendor directory of your Composer project.</li></ul><p>Luckily, DDEV enables this functionality by default (Thanks Randy!)</p><h3 id="load-your-data-from-an-acquia-site"> <a aria-labelledby="load-your-data-from-an-acquia-site" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#load-your-data-from-an-acquia-site"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Load your data from an Acquia site</h3><p>Using the <a href="https://www.drush.org/latest/site-aliases/">drush aliases</a> assuming the site is called <code class="language-plaintext highlighter-rouge">abc</code> and you want the <code class="language-plaintext highlighter-rouge">prod</code> (production) database:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ drush @abc.prod sql-dump &gt;dbprod.sql
$ gzip dbprod.sql
$ ddev import-db --src=dbprod.sql.gz
</code></pre></div></div><p>Of course this works with any site where you’ve set up your <a href="https://www.drush.org/latest/site-aliases/">drush aliases</a>.</p><h3 id="cleanup-some-disk-space"> <a aria-labelledby="cleanup-some-disk-space" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#cleanup-some-disk-space"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Cleanup some disk space</h3><p>Free up disk space used by previous docker image versions. This does no harm.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ddev delete images
</code></pre></div></div><p>also</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker system prune
</code></pre></div></div><p>and</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker image prune -a
</code></pre></div></div><p>List all docker volumes</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker volume ls
</code></pre></div></div><p><a href="https://github.com/drud/ddev/issues/1465">DDEV General cleanup topic</a></p><h3 id="accessing-specific-containers"> <a aria-labelledby="accessing-specific-containers" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#accessing-specific-containers"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Accessing specific containers</h3><p>To ssh into a specific service e.g. from a docker-composer.chromedriver.yml the service is listed under “services:” like:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>services:
  chromedriver
</code></pre></div></div><p>Use</p><p><code class="language-plaintext highlighter-rouge">ddev ssh -s chromedriver</code></p><p>or for selenium, use:</p><p><code class="language-plaintext highlighter-rouge">ddev ssh -s selenium</code></p><h2 id="ddev-troubleshooting"> <a aria-labelledby="ddev-troubleshooting" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#ddev-troubleshooting"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> DDEV Troubleshooting</h2><h3 id="running-out-of-docker-disk-space"> <a aria-labelledby="running-out-of-docker-disk-space" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#running-out-of-docker-disk-space"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Running out of docker disk space</h3><p>if ddev won’t start and shows:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Creating ddev-router ... done
Failed to start ddev82: db container failed: log=, err=container exited, please use 'ddev logs -s db` to find out why it failed
</code></pre></div></div><p>Looking in the log, you might see:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>preallocating 12582912 bytes for file ./ibtmp1 failed with error 28
2020-03-16 14:27:54 140144158233920 [ERROR] InnoDB: Could not set the file size of './ibtmp1'. Probably out of disk space
</code></pre></div></div><p>That is the clue.</p><p>You can kill off images using</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ddev delete images
</code></pre></div></div><p>or the more drastic</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker rmi -f $(docker images -q)
</code></pre></div></div><p>Q. Deleting the images: Does that mean it will delete the db snapshots? A. No, docker images are the versioned images that come from dockerhub, they're are always replaceable.</p><p>Absolutely nothing you do with ddev will delete your snapshots - you have to remove them manually</p><p>They're stored in .ddev/db_snapshots on the host (under each project)</p><p>also</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker system prune
</code></pre></div></div><p>and</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker system prune --volumes
</code></pre></div></div><p>prunes every single thing, destroys all ddev databases and your composer cache.</p><h3 id="ddev-wont-start"> <a aria-labelledby="ddev-wont-start" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#ddev-wont-start"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> DDEV won’t start</h3><p>ddev pull or ddev start failed with error something like:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Pull failed: db container failed: log=, err=health check timed out: labels map[com.ddev.site-name:inside-mathematics com.docker.compose.service:db] timed out without becoming healthy, status=
</code></pre></div></div><p>Or like this:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ddev start
Starting inside-mathematics... 
Pushing mkcert rootca certs to ddev-global-cache 
Pushed mkcert rootca certs to ddev-global-cache 
Creating ddev-inside-mathematics-db ... done
Creating ddev-inside-mathematics-dba ... done
Creating ddev-inside-mathematics-web ... done
 
Creating ddev-router ... done
 
Failed to start inside-mathematics: db container failed: log=, err=health check timed out: labels map[com.ddev.site-name:inside-mathematics com.docker.compose.service:db] timed out without becoming healthy, status=
</code></pre></div></div><p>This is almost always caused by a corrupted database, most often in a larger database. Since v0.17.0, this is generally only caused by docker being shut down in an ungraceful way. Unfortunately, both Docker for Windows and Docker for Mac shut down without notifying the container during upgrade, with a manual Docker exit, or at system shutdown. It can be avoided by stopping or removing your projects before letting Docker exit.</p><p>To fix, <code class="language-plaintext highlighter-rouge">ddev remove --remove-data</code>, then <code class="language-plaintext highlighter-rouge">ddev start</code>. This may fail and suggest this bazooka version:</p><p><code class="language-plaintext highlighter-rouge">ddev stop --remove-data --omit-snapshot</code></p><h2 id="phpstorm"> <a aria-labelledby="phpstorm" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#phpstorm"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> PHPStorm</h2><p>All the PHPStorm Drupal magic is at <a href="https://www.jetbrains.com/help/phpstorm/drupal-support.html#view_drupal_api_documentation">https://www.jetbrains.com/help/phpstorm/drupal-support.html#view_drupal_api_documentation</a></p><h3 id="setting-up-phpstorm-and-drupal"> <a aria-labelledby="setting-up-phpstorm-and-drupal" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#setting-up-phpstorm-and-drupal"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Setting up PHPStorm and Drupal</h3><p><a href="https://www.drupal.org/docs/develop/development-tools/configuring-phpstorm">https://www.drupal.org/docs/develop/development-tools/configuring-phpstorm</a></p><h3 id="phpstorm-and-xdebug"> <a aria-labelledby="phpstorm-and-xdebug" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#phpstorm-and-xdebug"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> PHPStorm and Xdebug</h3><p>Debugging drush commands at <a href="https://www.jetbrains.com/help/phpstorm/drupal-support.html#debugging-drush-commands">https://www.jetbrains.com/help/phpstorm/drupal-support.html#debugging-drush-commands</a></p><p>PHPStorm has a series of instructions for <a href="https://www.jetbrains.com/help/phpstorm/configuring-xdebug.html#configure-xdebug-wsl">configuring PHPStorm with Xdebug</a> but unfortunately, nothing specifically on using it with DDEV. Fortunately it doesn’t require any special setup for it to work.</p><p>Some settings I use</p><p><img alt="Graphical user interface, text, application, email Description automatically generated" src="https://selwynpolit.github.io/d9book/assets/images/image1-phpstorm.png"/></p><p>And for this project</p><p><img alt="Graphical user interface, text, application, email Description automatically generated" src="https://selwynpolit.github.io/d9book/assets/images/image2-phpstorm.png"/></p><p>If phpstorm doesn’t stop when you set a breakpoint on some code, try deleting the server from the config debug, php, servers.</p><p>Make sure PHPStorm is listening by clicking the listen button</p><p><img alt="Graphical user interface, text, application, Word Description automatically generated" src="https://selwynpolit.github.io/d9book/assets/images/image3-phpstorm.png"/></p><p>When you try again it will be recreated but you will probably need to specify the path (from the image above).</p><h4 id="add-a-breakpoint-in-code"> <a aria-labelledby="add-a-breakpoint-in-code" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#add-a-breakpoint-in-code"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> add a breakpoint in code</h4><p>To add a breakpoint in code, use</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nf">xdebug_break</span><span class="p">()</span>
</code></pre></div></div><p>more at <a href="https://xdebug.org/docs/all_functions">https://xdebug.org/docs/all_functions</a></p><h3 id="collecting-phpstorm-debugging-logs"> <a aria-labelledby="collecting-phpstorm-debugging-logs" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#collecting-phpstorm-debugging-logs"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Collecting PhpStorm debugging logs</h3><ul><li><p>In the Settings/Preferences dialog (⌘ ,) , go to PHP.</p><li><p>From the PHP executable list, choose the relevant PHP interpreter and click  next to it. In the CLI Interpreters dialog that opens, click the Open in Editor link next to the Configuration file: &lt;path to php.ini&gt; file. Close all the dialogs and switch to the tab where the php.ini file is opened.</p><li><p>In the php.ini, enable Xdebug logging by adding the following line:</p><li><p>For Xdebug 3xdebug.log="path_to_log/xdebug.log"The log file contains the raw communication between PhpStorm and Xdebug as well as any warnings or errors:</p><li><p>https://www.jetbrains.com/help/phpstorm/troubleshooting-php-debugging.html#collecting-logs</p></li></li></li></li></li></ul><h2 id="troubleshooting-xdebug-with-ddev"> <a aria-labelledby="troubleshooting-xdebug-with-ddev" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#troubleshooting-xdebug-with-ddev"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Troubleshooting Xdebug with DDEV</h2><p>• Use curl or a browser to create a web request. For example, curl https://d9.ddev.site</p><p>• If the IDE doesn't respond, take a look at ddev logs (<code class="language-plaintext highlighter-rouge">ddev logs</code>). If you see a message like ""PHP message: Xdebug: [Step Debug] Could not connect to debugging client. Tried: host.docker.internal:9000 (through xdebug.client_host/xdebug.client_port)" then php/xdebug (inside the container) is not able to make a connection to port 9000.</p><p>• In PhpStorm, disable the "listen for connections" button so it won’t listen. Or just exit PhpStorm. With another IDE like vscode, stop the debugger from listening.</p><p>• ddev ssh: Can telnet host.docker.internal 9000 connect? If it does, you have something else running on port 9000, probably php-fpm. On the host, use sudo lsof -i :9000 -sTCP:LISTEN to find out what is there and stop it, or change the xdebug port and configure PhpStorm to use the new one . Don’t continue debugging until your telnet command does not connect.</p><p>• Check to make sure that Xdebug is enabled. You can use php -i | grep Xdebug inside the container, or use any other technique you want that gives the output of phpinfo(), including Drupal’s admin/reports/status/php. You should see with Xdebug v2.9.6, Copyright (c) 2002-2020 and php -i | grep "xdebug.remote_enable" should give you xdebug.remote_enable: On.</p><p>https://ddev.readthedocs.io/en/stable/users/step-debugging/</p><h2 id="what-is-listening-on-port-9000"> <a aria-labelledby="what-is-listening-on-port-9000" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#what-is-listening-on-port-9000"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> What is listening on port 9000?</h2><p>To check if something is listening on port 9000 (the default port for xdebug) it’s best to use</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ lsof -i TCP:9000
</code></pre></div></div><p>it will actually list the name of the process listening</p><p>i.e.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>COMMAND    PID   USER   FD   TYPE            DEVICE SIZE/OFF NODE NAME
phpstorm 13361 selwyn   81u  IPv6 0x5d4d30caf0be07d      0t0  TCP *:cslistener (LISTEN)
</code></pre></div></div><p>Another option is</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nc -z localhost 9000
</code></pre></div></div><p>If it says:</p><p>Connection to localhost port 9000 [tcp/cslistener] succeeded!</p><p>this means something is listening. If you get nothing, then nothing is listening.</p><p>You can also run network utility, scan port 9000 to 9003 on 127.0.0.1 (localhost)</p><p>What could be listening on port 9000?</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ netstat -an | grep 9000
</code></pre></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>tcp4 0 0 127.0.0.1.9000 \*.\* LISTEN
</code></pre></div></div><p>Other options include:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ lsof -i TCP:9000
</code></pre></div></div><p>Which reports that <code class="language-plaintext highlighter-rouge">php-fpm</code> is listening.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>COMMAND PID USER FD TYPE DEVICE SIZE/OFF NODE NAME

php-fpm 732 selwyn 7u IPv4 0x4120ed57a07e871f 0t0 TCP
localhost:cslistener (LISTEN)

php-fpm 764 selwyn 8u IPv4 0x4120ed57a07e871f 0t0 TCP
localhost:cslistener (LISTEN)

php-fpm 765 selwyn 8u IPv4 0x4120ed57a07e871f 0t0 TCP
localhost:cslistener (LISTEN)
</code></pre></div></div><h2 id="setup-settingslocalphp-and-disable-cache"> <a aria-labelledby="setup-settingslocalphp-and-disable-cache" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#setup-settingslocalphp-and-disable-cache"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Setup settings.local.php and disable Cache</h2><p>From <a href="https://www.drupal.org/node/2598914">Disabling cache during development</a></p><p>1. Copy, rename, and move the sites/example.settings.local.php to sites/default/settings.local.php:</p><p><code class="language-plaintext highlighter-rouge">$ cp sites/example.settings.local.php sites/default/settings.local.php</code></p><p>2. Open sites/default/settings.php and uncomment these lines:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nb">file_exists</span><span class="p">(</span><span class="nv">$app_root</span> <span class="mf">.</span> <span class="s1">'/'</span> <span class="mf">.</span> <span class="nv">$site_path</span> <span class="mf">.</span> <span class="s1">'/settings.local.php'</span><span class="p">))</span> <span class="p">{</span>
  <span class="k">include</span> <span class="nv">$app_root</span> <span class="mf">.</span> <span class="s1">'/'</span> <span class="mf">.</span> <span class="nv">$site_path</span> <span class="mf">.</span> <span class="s1">'/settings.local.php'</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div><p>This will include the local settings file as part of Drupal's settings file.</p><p>3. Open settings.local.php and make sure development.services.yml is enabled.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$settings</span><span class="p">[</span><span class="s1">'container_yamls'</span><span class="p">][]</span> <span class="o">=</span> <span class="no">DRUPAL_ROOT</span> <span class="mf">.</span> <span class="s1">'/sites/development.services.yml'</span><span class="p">;</span>
</code></pre></div></div><p>By default development.services.yml contains the settings to disable Drupal caching:</p><div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">services</span><span class="pi">:</span>
  <span class="na">cache.backend.null</span><span class="pi">:</span>
    <span class="na">class</span><span class="pi">:</span> <span class="s">Drupal\Core\Cache\NullBackendFactory</span>
</code></pre></div></div><p><strong>NOTE:</strong> Do not create development.services.yml, it exists under /sites</p><p>4. In settings.local.php change the following to be TRUE if you want to work with enabled css- and js-aggregation:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$config</span><span class="p">[</span><span class="s1">'system.performance'</span><span class="p">][</span><span class="s1">'css'</span><span class="p">][</span><span class="s1">'preprocess'</span><span class="p">]</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">;</span>
<span class="nv">$config</span><span class="p">[</span><span class="s1">'system.performance'</span><span class="p">][</span><span class="s1">'js'</span><span class="p">][</span><span class="s1">'preprocess'</span><span class="p">]</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">;</span>
</code></pre></div></div><p>5. Uncomment these lines in settings.local.php to disable the render cache and disable dynamic page cache:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$settings</span><span class="p">[</span><span class="s1">'cache'</span><span class="p">][</span><span class="s1">'bins'</span><span class="p">][</span><span class="s1">'render'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'cache.backend.null'</span><span class="p">;</span>
<span class="nv">$settings</span><span class="p">[</span><span class="s1">'cache'</span><span class="p">][</span><span class="s1">'bins'</span><span class="p">][</span><span class="s1">'dynamic_page_cache'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'cache.backend.null'</span><span class="p">;</span>
</code></pre></div></div><p>Add the following lines to your sites/default/settings.local.php</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$settings</span><span class="p">[</span><span class="s1">'cache'</span><span class="p">][</span><span class="s1">'bins'</span><span class="p">][</span><span class="s1">'page'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'cache.backend.null'</span><span class="p">;</span>
</code></pre></div></div><p>If you do not want to install test modules and themes, set the following to FALSE:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$settings</span><span class="p">[</span><span class="s1">'extension_discovery_scan_tests'</span><span class="p">]</span> <span class="o">=</span> <span class="kc">FALSE</span><span class="p">;</span>
</code></pre></div></div><p>6. Open sites/development.services.yml in the sites folder and add the following block to disable the twig cache and enable twig debugging:</p><div class="language-twig highlighter-rouge"><div class="highlight"><pre class="highlight"><code>parameters:
  twig.config:
    debug: true
    auto_reload: true
    cache: false
</code></pre></div></div><p><em>NOTE: If the parameters section is already present in the development.services.yml file, append the twig.config section to it.</em></p><p>7. Rebuild the Drupal cache (<code class="language-plaintext highlighter-rouge">drush cr</code>) otherwise your website will encounter an unexpected error on page reload.</p><h2 id="developmentservicesyml"> <a aria-labelledby="developmentservicesyml" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#developmentservicesyml"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Development.services.yml</h2><p>I usually develop with this in sites/default/development.services.yml</p><div class="language-twig highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Local development services.
#
# To activate this feature, follow the instructions at the top of the
# 'example.settings.local.php' file, which sits next to this file.
parameters:
  http.response.debug_cacheability_headers: true
  twig.config:
    # Twig debugging:
    #
    # When debugging is enabled:
    # - The markup of each Twig template is surrounded by HTML comments that
    #   contain theming information, such as template file name suggestions.
    # - Note that this debugging markup will cause automated tests that directly
    #   check rendered HTML to fail. When running automated tests, 'debug'
    #   should be set to FALSE.
    # - The dump() function can be used in Twig templates to output information
    #   about template variables.
    # - Twig templates are automatically recompiled whenever the source code
    #   changes (see auto_reload below).
    #
    # For more information about debugging Twig templates, see
    # https://www.drupal.org/node/1906392.
    #
    # Not recommended in production environments
    # @default false
    debug: true
    # Twig auto-reload:
    #
    # Automatically recompile Twig templates whenever the source code changes.
    # If you don't provide a value for auto_reload, it will be determined
    # based on the value of debug.
    #
    # Not recommended in production environments
    # @default null
    #    auto_reload: null
    auto_reload: true
    # Twig cache:
    #
    # By default, Twig templates will be compiled and stored in the filesystem
    # to increase performance. Disabling the Twig cache will recompile the
    # templates from source each time they are used. In most cases the
    # auto_reload setting above should be enabled rather than disabling the
    # Twig cache.
    #
    # Not recommended in production environments
    # @default true
    cache: false
services:
  cache.backend.null:
    class: Drupal\Core\Cache\NullBackendFactory
</code></pre></div></div><p>Make sure the following is in docroot/sites/default/settings.local.php</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cd">/**
 * Enable local development services.
 */</span>
<span class="nv">$settings</span><span class="p">[</span><span class="s1">'container_yamls'</span><span class="p">][]</span> <span class="o">=</span> <span class="no">DRUPAL_ROOT</span> <span class="mf">.</span> <span class="s1">'/sites/development.services.yml'</span><span class="p">;</span>
</code></pre></div></div><h2 id="enable-twig-debugging-output-in-source"> <a aria-labelledby="enable-twig-debugging-output-in-source" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#enable-twig-debugging-output-in-source"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Enable twig debugging output in source</h2><p>In <code class="language-plaintext highlighter-rouge">sites/default/development.services.yml</code> set <code class="language-plaintext highlighter-rouge">twig.config debug:true</code>. See <code class="language-plaintext highlighter-rouge">core.services.yml</code> for lots of other items to change for development</p><div class="language-twig highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Local development services.
#
parameters:
  http.response.debug_cacheability_headers: true
  twig.config:
    debug: true
    auto_reload: true
    cache: false

# To disable caching, you need this and a few other items
services:
  cache.backend.null:
    class: Drupal\Core\Cache\NullBackendFactory
</code></pre></div></div><p>to enable put the following in settings.local.php:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cd">/**
 * Enable local development services.
 */</span>
<span class="nv">$settings</span><span class="p">[</span><span class="s1">'container_yamls'</span><span class="p">][]</span> <span class="o">=</span> <span class="no">DRUPAL_ROOT</span> <span class="mf">.</span> <span class="s1">'/sites/development.services.yml'</span><span class="p">;</span>
</code></pre></div></div><p>You also need to disable the render cache in settings.local.php with:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$settings</span><span class="p">[</span><span class="s1">'cache'</span><span class="p">][</span><span class="s1">'bins'</span><span class="p">][</span><span class="s1">'render'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'cache.backend.null'</span><span class="p">;</span>
</code></pre></div></div><h2 id="kint"> <a aria-labelledby="kint" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#kint"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Kint</h2><p>From <a href="https://www.webwash.net/how-to-print-variables-using-devel-and-kint-in-drupal/">https://www.webwash.net/how-to-print-variables-using-devel-and-kint-in-drupal/</a></p><h3 id="setup"> <a aria-labelledby="setup" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#setup"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Setup</h3><p>We need both the Devel and Devel Kint Extras module. <a href="https://www.drupal.org/project/devel_kint_extras">Devel Kint Extras</a> ships with the kint-php library so installing this via Composer will take care of it automatically.</p><p>Install using Composer:</p><p><code class="language-plaintext highlighter-rouge">$ composer require drupal/devel drupal/devel_kint_extras</code></p><p>Enable both with the following Drush command:</p><p><code class="language-plaintext highlighter-rouge">$ drush en devel_kint_extras -y</code></p><p>Finally, enable Kint Extended as the Variables Dumper. To do this go to <code class="language-plaintext highlighter-rouge">admin/config/development/devel</code> and select Kint Extender and Save the configuration.</p><h3 id="add-kint-to-a-custom-module"> <a aria-labelledby="add-kint-to-a-custom-module" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#add-kint-to-a-custom-module"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Add kint to a custom module</h3><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">function</span> <span class="n">custom_kint_preprocess_page</span><span class="p">(</span><span class="o">&amp;</span><span class="nv">$variables</span><span class="p">)</span> <span class="p">{</span> 
  <span class="nf">kint</span><span class="p">(</span><span class="nv">$variables</span><span class="p">[</span><span class="s1">'page'</span><span class="p">]);</span>
 <span class="p">}</span>
</code></pre></div></div><h3 id="dump-variables-in-a-twig-template"> <a aria-labelledby="dump-variables-in-a-twig-template" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#dump-variables-in-a-twig-template"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Dump variables in a TWIG template</h3><div class="language-twig highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">{{</span> <span class="nv">kint</span><span class="p">(</span><span class="nv">attributes</span><span class="p">)</span> <span class="cp">}}</span>
</code></pre></div></div><h3 id="kintdump"> <a aria-labelledby="kintdump" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#kintdump"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Kint::dump</h3><p>From <a href="https://www.drupal.org/project/migrate_devel">Migrate Devel contrib module</a>, in <code class="language-plaintext highlighter-rouge">/docroot/modules/contrib/migrate_devel/src/EventSubscriber/MigrationEventSubscriber.php</code>.</p><p>This is used in migrate to dump the source and destination values.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// We use kint directly here since we want to support variable naming.</span>
<span class="nf">kint_require</span><span class="p">();</span>
<span class="nc">\Kint</span><span class="o">::</span><span class="nf">dump</span><span class="p">(</span><span class="nv">$Source</span><span class="p">,</span> <span class="nv">$Destination</span><span class="p">,</span> <span class="nv">$DestinationIDValues</span><span class="p">);</span>
</code></pre></div></div><h3 id="set-max-levels-to-avoid-running-out-of-memory"> <a aria-labelledby="set-max-levels-to-avoid-running-out-of-memory" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#set-max-levels-to-avoid-running-out-of-memory"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Set max levels to avoid running out of memory</h3><p>Kint can run really slowly so you may have to set maxLevels this way:</p><p>Add this to settings.local.php</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Change kint maxLevels setting:</span>
<span class="k">include_once</span><span class="p">(</span><span class="no">DRUPAL_ROOT</span> <span class="mf">.</span> <span class="s1">'/modules/contrib/devel/kint/kint/Kint.class.php'</span><span class="p">);</span>
<span class="k">if</span><span class="p">(</span><span class="nb">class_exists</span><span class="p">(</span><span class="s1">'Kint'</span><span class="p">)){</span>
  <span class="c1">// Set the maxlevels to prevent out-of-memory. Currently there doesn't seem to be a cleaner way to set this:</span>
  <span class="nc">Kint</span><span class="o">::</span><span class="nv">$maxLevels</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div><h2 id="replacing-deprecated-functions"> <a aria-labelledby="replacing-deprecated-functions" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#replacing-deprecated-functions"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Replacing deprecated functions</h2><p><a href="https://drupal.stackexchange.com/questions/144147/get-taxonomy-terms">https://drupal.stackexchange.com/questions/144147/get-taxonomy-terms</a></p><h2 id="missing-module"> <a aria-labelledby="missing-module" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#missing-module"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Missing module</h2><p>from: <a href="https://www.drupal.org/node/2487215">https://www.drupal.org/node/2487215</a></p><p>If you see a PHP warning such as <code class="language-plaintext highlighter-rouge">The following module is missing from the file system...</code> (or similar) on your site, You can remove it with:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ drush sql-query "DELETE FROM key_value WHERE name='module_name';"
</code></pre></div></div><h2 id="you-have-requested-a-non-existent-service"> <a aria-labelledby="you-have-requested-a-non-existent-service" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#you-have-requested-a-non-existent-service"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> You have requested a non-existent service</h2><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Symfony\Component\DependencyInjection\Exception\ServiceNotFoundException: You have requested a non-existent service "lingotek.content_translation". in /var/www/vendor/symfony/dependency-injection/ContainerBuilder.php on line 1063 #0 
</code></pre></div></div><p>Sometimes, when drush cr throws errors like that try <code class="language-plaintext highlighter-rouge">drush sqlc</code> and then <code class="language-plaintext highlighter-rouge">truncate cache_bootstrap</code> and <code class="language-plaintext highlighter-rouge">truncate cache_discovery</code>.</p><h2 id="resources"> <a aria-labelledby="resources" class="anchor-heading" href="https://selwynpolit.github.io/d9book/development#resources"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Resources</h2><ul><li><p><a href="https://www.lullabot.com/articles/drupal-8-composer-best-practices">Composer best practices for Drupal 8 from Lullabot Jan 2018</a></p><li><p><a href="https://opensource.com/article/22/12/ddev">Why DDEV by Randy Fay (Author of DDEV) from Dec 2022</a></p><li><p><a href="https://www.altagrade.com/blog/how-install-devel-and-kint-drupal-9">How to setup Devel and Kint on Drupal 9 by Alex Aug 2021</a></p></li></li></li></ul><hr/> <script async="" crossorigin="anonymous" data-category="Q&amp;A" data-category-id="MDE4OkRpc2N1c3Npb25DYXRlZ29yeTMyMjY2NDE4" data-emit-metadata="0" data-input-position="bottom" data-lang="en" data-mapping="title" data-reactions-enabled="1" data-repo="selwynpolit/d9book" data-repo-id="MDEwOlJlcG9zaXRvcnkzMjUxNTQ1Nzg=" data-strict="0" data-theme="preferred_color_scheme" src="https://giscus.app/client.js"> </script><hr/><footer><p><a href="https://selwynpolit.github.io/d9book/development#top" id="back-to-top">Back to top</a></p><p class="text-small text-grey-dk-100 mb-0"><span xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/"> <a href="http://www.selwynpolit.github.io/d9book" property="dct:title" rel="cc:attributionURL">Drupal at your fingertips</a> by <a href="http://www.drupal.org/u/selwynpolit" property="cc:attributionName" rel="cc:attributionURL dct:creator">Selwyn Polit</a> is licensed under <a href="http://creativecommons.org/licenses/by/4.0/" rel="license noopener noreferrer" target="_blank">CC BY 4.0 <img src="https://mirrors.creativecommons.org/presskit/icons/cc.svg" style="height:16px!important;vertical-align:text-bottom;"/> <img src="https://mirrors.creativecommons.org/presskit/icons/by.svg" style="height:16px!important;vertical-align:text-bottom;"/> </a></span></p><div class="d-flex mt-2"><p class="text-small text-grey-dk-000 mb-0 mr-2"> Page last modified: <span class="d-inline-block">May 14 2023</span>.</p><p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/selwynpolit/d9book/tree/gh-pages/book/development.md" id="edit-this-page">Edit this page on GitHub</a></p></div></footer></div></div><div class="search-overlay"></div></div>
</body></link></meta></meta></meta></head></html>