<!DOCTYPE html>
<html lang="en-US"><head><meta charset="utf-8"/><meta content="IE=Edge" http-equiv="X-UA-Compatible"/><link href="https://selwynpolit.github.io/d9book/assets/css/just-the-docs-default.css" rel="stylesheet"/> <script async="" src="https://www.googletagmanager.com/gtag/js?id=8V22RQEJ71"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', '8V22RQEJ71', { 'anonymize_ip': true }); </script> <script src="https://selwynpolit.github.io/d9book/assets/js/vendor/lunr.min.js"></script> <script src="https://selwynpolit.github.io/d9book/assets/js/just-the-docs.js"></script><meta content="width=device-width, initial-scale=1" name="viewport"/><link href="https://selwynpolit.github.io/d9book/assets/images/favicon.ico" rel="icon" type="image/x-icon"/><title>Routes | Drupal Book</title><meta content="Jekyll v4.3.2" name="generator"><meta content="Routes" property="og:title"><meta content="en_US" property="og:locale"><meta content="Drupal at your fingertips" name="description"/><meta content="Drupal at your fingertips" property="og:description"/><link href="https://selwynpolit.github.io/d9book/d9book/routes" rel="canonical"><meta content="https://selwynpolit.github.io/d9book/d9book/routes" property="og:url"/><meta content="Drupal Book" property="og:site_name"/><meta content="website" property="og:type"/><meta content="summary" name="twitter:card"/><meta content="Routes" property="twitter:title"/> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Drupal at your fingertips","headline":"Routes","url":"https://selwynpolit.github.io/d9book/d9book/routes"}</script><body> <a class="skip-to-main" href="https://selwynpolit.github.io/d9book/routes#main-content">Skip to main content</a> <svg class="d-none" xmlns="http://www.w3.org/2000/svg"> <symbol id="svg-link" viewbox="0 0 24 24"><title>Link</title><svg class="feather feather-link" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewbox="0 0 24 24"><title>Menu</title><svg class="feather feather-menu" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><line x1="3" x2="21" y1="12" y2="12"></line><line x1="3" x2="21" y1="6" y2="6"></line><line x1="3" x2="21" y1="18" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewbox="0 0 24 24"><title>Expand</title><svg class="feather feather-chevron-right" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol class="feather feather-external-link" fill="none" height="24" id="svg-external-link" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24"><title id="svg-external-link-title">(external link)</title><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" x2="21" y1="14" y2="3"></line> </symbol> <symbol id="svg-doc" viewbox="0 0 24 24"><title>Document</title><svg class="feather feather-file" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewbox="0 0 24 24"><title>Search</title><svg class="feather feather-search" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"> <circle cx="11" cy="11" r="8"></circle><line x1="21" x2="16.65" y1="21" y2="16.65"></line> </svg> </symbol> <symbol id="svg-copy" viewbox="0 0 16 16"><title>Copy</title><svg class="bi bi-clipboard" fill="currentColor" height="16" viewbox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"></path><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"></path> </svg> </symbol> <symbol id="svg-copied" viewbox="0 0 16 16"><title>Copied</title><svg class="bi bi-clipboard-check-fill" fill="currentColor" height="16" viewbox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"></path><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"></path> </svg> </symbol> </svg><div class="side-bar"><div class="site-header"> <a class="site-title lh-tight" href="https://selwynpolit.github.io/d9book/"> Drupal Book </a> <a class="site-button" href="https://selwynpolit.github.io/d9book/routes" id="menu-button"> <svg class="icon" viewbox="0 0 24 24"><use xlink:href="#svg-menu"></use></svg> </a></div><nav aria-label="Main" class="site-nav" id="site-nav"><ul class="nav-list"><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/">Home</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/actions">Actions</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/attribution">Attribution</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/bq">Batch and Queue</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/blocks">Blocks</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/caching">Caching</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/composer">Composer</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/config">Config</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/cron">Cron</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/dates">Dates and Times</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/debugging">Debugging</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/development">Development</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/drush">Drush</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/email">Email</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/entities">Entities</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/forms">Forms</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/general">General</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/off-island">Getting off the Island</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/hooks">Hooks</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/learn">Learning</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/links">Links</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/logging">Logging</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/menus">Menus</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/migrate">Migrate</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/modals">Modals</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/nodes-and-fields">Nodes and Fields</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/queries">Queries</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/redirects">Redirects</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/render">Render Arrays</a><li class="nav-list-item active"><a class="nav-list-link active" href="https://selwynpolit.github.io/d9book/routes">Routes</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/security">Security</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/services">Services</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/state">State</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/taxonomy">Taxonomy</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/dtt">Tests</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/twig">Twig</a></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></ul><ul class="nav-list"><li class="nav-list-item external"> <a class="nav-list-link external" href="https://github.com/selwynpolit/d9book/fork"> Fork me on GitHub <svg aria-labelledby="svg-external-link-title" viewbox="0 0 24 24"><use xlink:href="#svg-external-link"></use></svg> </a></li></ul></nav><footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</footer></div><div class="main" id="top"><div class="main-header" id="main-header"><div class="search"><div class="search-input-wrap"> <input aria-label="Search Drupal Book" autocomplete="off" class="search-input" id="search-input" placeholder="Search Drupal Book" tabindex="0" type="text"/> <label class="search-label" for="search-input"><svg class="search-icon" viewbox="0 0 24 24"><use xlink:href="#svg-search"></use></svg></label></div><div class="search-results" id="search-results"></div></div><nav aria-label="Auxiliary" class="aux-nav"><ul class="aux-nav-list"><li class="aux-nav-list-item"> <a class="site-button" href="https://twitter.com/selwynpolit" rel="noopener noreferrer" target="_blank"> <img alt="Twitter logo" src="https://atuin.ru/demo/simple-icons/icons/twitter.svg" style="width: 30px; height: 30px;" title="Author in Twitter"/> </a><li class="aux-nav-list-item"> <a class="site-button" href="https://github.com/selwynpolit/d9book/tree/gh-pages" rel="noopener noreferrer" target="_blank"> <img alt="GitHub logo" src="https://atuin.ru/demo/simple-icons/icons/github.svg" style="width: 30px; height: 30px;" title="D9Book on GitHub"/> </a></li></li></ul></nav></div><div class="main-content-wrap" id="main-content-wrap"><div class="main-content" id="main-content" role="main"><h1 class="no_toc fw-500" id="routes-and-controllers"> <a aria-labelledby="routes-and-controllers" class="anchor-heading" href="https://selwynpolit.github.io/d9book/routes#routes-and-controllers"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Routes and Controllers</h1><h2 class="no_toc text-delta" id="table-of-contents"> <a aria-labelledby="table-of-contents" class="anchor-heading" href="https://selwynpolit.github.io/d9book/routes#table-of-contents"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Table of contents</h2><ul id="markdown-toc"><li><a href="https://selwynpolit.github.io/d9book/routes#overview" id="markdown-toc-overview">Overview</a><ul><li><a href="https://selwynpolit.github.io/d9book/routes#route" id="markdown-toc-route">Route</a><li><a href="https://selwynpolit.github.io/d9book/routes#controller" id="markdown-toc-controller">Controller</a><li><a href="https://selwynpolit.github.io/d9book/routes#connecting-to-a-twig-template" id="markdown-toc-connecting-to-a-twig-template">Connecting to a twig template</a></li></li></li></ul><li><a href="https://selwynpolit.github.io/d9book/routes#simple-page-without-arguments" id="markdown-toc-simple-page-without-arguments">Simple page without arguments</a><li><a href="https://selwynpolit.github.io/d9book/routes#page-with-arguments" id="markdown-toc-page-with-arguments">Page with arguments</a><li><a href="https://selwynpolit.github.io/d9book/routes#simple-form" id="markdown-toc-simple-form">Simple form</a><li><a href="https://selwynpolit.github.io/d9book/routes#admin-form-or-settings-form" id="markdown-toc-admin-form-or-settings-form">Admin form (or settings form)</a><li><a href="https://selwynpolit.github.io/d9book/routes#routing-permissions" id="markdown-toc-routing-permissions">Routing permissions</a><ul><li><a href="https://selwynpolit.github.io/d9book/routes#a-specific-permission" id="markdown-toc-a-specific-permission">A specific permission</a><li><a href="https://selwynpolit.github.io/d9book/routes#multiple-permissions" id="markdown-toc-multiple-permissions">Multiple permissions</a></li></li></ul><li><a href="https://selwynpolit.github.io/d9book/routes#set-the-page-title-dynamically" id="markdown-toc-set-the-page-title-dynamically">Set the page title dynamically</a><li><a href="https://selwynpolit.github.io/d9book/routes#disable-caching-on-a-route" id="markdown-toc-disable-caching-on-a-route">Disable caching on a route</a><li><a href="https://selwynpolit.github.io/d9book/routes#generate-route-and-controller-with-drush" id="markdown-toc-generate-route-and-controller-with-drush">Generate route and controller with Drush</a><li><a href="https://selwynpolit.github.io/d9book/routes#finding-routes-with-drush" id="markdown-toc-finding-routes-with-drush">Finding routes with Drush</a><ul><li><a href="https://selwynpolit.github.io/d9book/routes#all-routes" id="markdown-toc-all-routes">All routes</a><li><a href="https://selwynpolit.github.io/d9book/routes#specific-path" id="markdown-toc-specific-path">Specific path</a><li><a href="https://selwynpolit.github.io/d9book/routes#specific-route-name" id="markdown-toc-specific-route-name">Specific route name</a></li></li></li></ul><li><a href="https://selwynpolit.github.io/d9book/routes#getting-some-help-from-chat-gpt" id="markdown-toc-getting-some-help-from-chat-gpt">Getting some help from Chat GPT</a><li><a href="https://selwynpolit.github.io/d9book/routes#resources" id="markdown-toc-resources">Resources</a></li></li></li></li></li></li></li></li></li></li></li></li></ul><p><img alt="views" src="https://api.visitor.plantree.me/visitor-badge/pv?label=views&amp;color=informational&amp;namespace=d9book&amp;key=routes.md"/></p><hr/><h2 id="overview"> <a aria-labelledby="overview" class="anchor-heading" href="https://selwynpolit.github.io/d9book/routes#overview"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Overview</h2><h3 id="route"> <a aria-labelledby="route" class="anchor-heading" href="https://selwynpolit.github.io/d9book/routes#route"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Route</h3><p>A route connects a URL path to a controller. In <code class="language-plaintext highlighter-rouge">hello_world.routing.yml</code> ( e.g. in <code class="language-plaintext highlighter-rouge">modules/custom/hello_world/hello_world.routing.yml</code>) The path <code class="language-plaintext highlighter-rouge">/hello</code> maps to the controller <code class="language-plaintext highlighter-rouge">HelloWorldController</code> and the member function: <code class="language-plaintext highlighter-rouge">helloWorld()</code>. When a user visits <code class="language-plaintext highlighter-rouge">/hello</code>, Drupal checks to see that the user has <code class="language-plaintext highlighter-rouge">access content</code> permission and the <code class="language-plaintext highlighter-rouge">helloWorld()</code> function is executed.</p><div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">hello_world.hello</span><span class="pi">:</span>
   <span class="na">path</span><span class="pi">:</span> <span class="s1">'</span><span class="s">/hello'</span>
   <span class="na">defaults</span><span class="pi">:</span>
     <span class="na">_controller</span><span class="pi">:</span> <span class="s1">'</span><span class="s">\Drupal\hello_world\Controller\HelloWorldController::helloWorld'</span>
     <span class="na">_title</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Our</span><span class="nv"> </span><span class="s">first</span><span class="nv"> </span><span class="s">route'</span>
   <span class="na">requirements</span><span class="pi">:</span>
     <span class="na">_permission</span><span class="pi">:</span> <span class="s1">'</span><span class="s">access</span><span class="nv"> </span><span class="s">content'</span>
</code></pre></div></div><h3 id="controller"> <a aria-labelledby="controller" class="anchor-heading" href="https://selwynpolit.github.io/d9book/routes#controller"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Controller</h3><p>This is the PHP function that takes info from the HTTP request and constructs and returns an HTTP response (as a Symfony ResponseObject). The controller contains your logic to render the content of the page.</p><p>The controller will usually return a render array but they can return an HTML page, an XML document, a serialized JSON array, an image, a redirect, a 404 error or almost anything else.</p><p>A simple render array looks like this:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">return</span> <span class="p">[</span>
  <span class="s1">'#markup'</span> <span class="o">=&gt;</span> <span class="s1">'blah'</span><span class="p">,</span>
<span class="p">]</span>
</code></pre></div></div><h3 id="connecting-to-a-twig-template"> <a aria-labelledby="connecting-to-a-twig-template" class="anchor-heading" href="https://selwynpolit.github.io/d9book/routes#connecting-to-a-twig-template"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Connecting to a twig template</h3><p>Most often, you will have a twig template connected to your controller. You do this by a combination of a <code class="language-plaintext highlighter-rouge">#theme</code> element in the render array and a <code class="language-plaintext highlighter-rouge">hook_theme</code> function in a <code class="language-plaintext highlighter-rouge">.module</code> file.</p><p>In the example below, the controller returns a large render array and the theme is identified as <code class="language-plaintext highlighter-rouge">abc_teks_srp__correlation_voting</code>.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">return</span> <span class="p">[</span>
  <span class="s1">'#theme'</span> <span class="o">=&gt;</span> <span class="s1">'abc_teks_srp__correlation_voting'</span><span class="p">,</span>
  <span class="s1">'#content'</span> <span class="o">=&gt;</span> <span class="nv">$content</span><span class="p">,</span>
  <span class="s1">'#breadcrumbs'</span> <span class="o">=&gt;</span> <span class="nv">$breadcrumbs</span><span class="p">,</span>
  <span class="s1">'#management_links'</span> <span class="o">=&gt;</span> <span class="nv">$management_links</span><span class="p">,</span>
  <span class="s1">'#correlation'</span> <span class="o">=&gt;</span> <span class="nv">$correlation_info</span><span class="p">,</span>
  <span class="s1">'#citations'</span> <span class="o">=&gt;</span> <span class="nv">$citations</span><span class="p">,</span>
<span class="p">];</span>
</code></pre></div></div><p>In a module file, there is a hook_theme function which corresponds to the <code class="language-plaintext highlighter-rouge">abc_teks_srp_theme</code> and identifies the template name as <code class="language-plaintext highlighter-rouge">abc-teks-srp-correlation-voting</code>. Here is the significant part of the <code class="language-plaintext highlighter-rouge">hook_theme()</code> function</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cd">/**
 * Implements hook_theme().
 */</span>
<span class="k">function</span> <span class="n">abc_teks_srp_theme</span><span class="p">()</span> <span class="p">{</span>
  <span class="nv">$variables</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">'abc_teks_srp'</span> <span class="o">=&gt;</span> <span class="p">[</span>
      <span class="s1">'render element'</span> <span class="o">=&gt;</span> <span class="s1">'children'</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="s1">'abc_teks_srp__correlation_voting'</span> <span class="o">=&gt;</span> <span class="p">[</span>
      <span class="s1">'variables'</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">'content'</span> <span class="o">=&gt;</span> <span class="kc">NULL</span><span class="p">,</span>
        <span class="s1">'breadcrumbs'</span> <span class="o">=&gt;</span> <span class="kc">NULL</span><span class="p">,</span>
        <span class="s1">'management_links'</span> <span class="o">=&gt;</span> <span class="kc">NULL</span><span class="p">,</span>
        <span class="s1">'correlation'</span> <span class="o">=&gt;</span> <span class="kc">NULL</span><span class="p">,</span>
        <span class="s1">'citations'</span> <span class="o">=&gt;</span> <span class="kc">NULL</span><span class="p">,</span>
      <span class="p">],</span>
      <span class="s1">'template'</span> <span class="o">=&gt;</span> <span class="s1">'abc-teks-srp--correlation-voting'</span><span class="p">,</span>
    <span class="p">],</span>
</code></pre></div></div><p>The template will therefore be <code class="language-plaintext highlighter-rouge">abc-teks-srp--correlation.voting.yml</code></p><h2 id="simple-page-without-arguments"> <a aria-labelledby="simple-page-without-arguments" class="anchor-heading" href="https://selwynpolit.github.io/d9book/routes#simple-page-without-arguments"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Simple page without arguments</h2><p>This route is for a page with no arguments/parameters.</p><p>In the file page_example.routing.yml (e.g. <code class="language-plaintext highlighter-rouge">web/modules/contrib/examples/page_example/page_example.routing.yml</code> and the controller is at <code class="language-plaintext highlighter-rouge">web/modules/contrib/examples/page_example/src/Controller/PageExampleController.php</code></p><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># If the user accesses https://example.com/?q=examples/page-example/simple,</span>
<span class="c1"># or https://example.com/examples/page-example/simple,</span>
<span class="c1"># the routing system will look for a route with that path. </span>
<span class="c1"># In this case it will find a match, and execute the _controller callback. </span>
<span class="c1"># Access to this path requires "access simple page" permission.</span>
<span class="na">page_example_simple</span><span class="pi">:</span>
  <span class="na">path</span><span class="pi">:</span> <span class="s1">'</span><span class="s">examples/page-example/simple'</span>
  <span class="na">defaults</span><span class="pi">:</span>
    <span class="na">_controller</span><span class="pi">:</span> <span class="s1">'</span><span class="s">\Drupal\page_example\Controller\PageExampleController::simple'</span>
    <span class="na">_title</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Simple</span><span class="nv"> </span><span class="s">-</span><span class="nv"> </span><span class="s">no</span><span class="nv"> </span><span class="s">arguments'</span>
  <span class="na">requirements</span><span class="pi">:</span>
    <span class="na">_permission</span><span class="pi">:</span> <span class="s1">'</span><span class="s">access</span><span class="nv"> </span><span class="s">simple</span><span class="nv"> </span><span class="s">page'</span>
</code></pre></div></div><h2 id="page-with-arguments"> <a aria-labelledby="page-with-arguments" class="anchor-heading" href="https://selwynpolit.github.io/d9book/routes#page-with-arguments"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Page with arguments</h2><p>From <code class="language-plaintext highlighter-rouge">web/modules/contrib/examples/page_example/page_example.routing.yml</code> {first}/{second} are the arguments.</p><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Since the parameters are passed to the function after the match, the</span>
<span class="c1"># function can do additional checking or make use of them before executing</span>
<span class="c1"># the callback function. The placeholder names "first" and "second" are</span>
<span class="c1"># arbitrary but must match the variable names in the callback method, e.g.</span>
<span class="c1"># "$first" and "$second".</span>
<span class="na">page_example_arguments</span><span class="pi">:</span>
  <span class="na">path</span><span class="pi">:</span> <span class="s1">'</span><span class="s">examples/page-example/arguments/{first}/{second}'</span>
  <span class="na">defaults</span><span class="pi">:</span>
    <span class="na">_controller</span><span class="pi">:</span> <span class="s1">'</span><span class="s">\Drupal\page_example\Controller\PageExampleController::arguments'</span>
  <span class="na">requirements</span><span class="pi">:</span>
    <span class="na">_permission</span><span class="pi">:</span> <span class="s1">'</span><span class="s">access</span><span class="nv"> </span><span class="s">arguments</span><span class="nv"> </span><span class="s">page'</span>
</code></pre></div></div><h2 id="simple-form"> <a aria-labelledby="simple-form" class="anchor-heading" href="https://selwynpolit.github.io/d9book/routes#simple-form"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Simple form</h2><p>From <code class="language-plaintext highlighter-rouge">web/modules/custom/rsvp/rsvp.routing.yml</code>. This route will cause Drupal to load the form: <code class="language-plaintext highlighter-rouge">RSVPForm.php</code> so the user can fill it out.</p><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">rsvp.form</span><span class="pi">:</span>
  <span class="na">path</span><span class="pi">:</span> <span class="s1">'</span><span class="s">/rsvplist'</span>
  <span class="na">defaults</span><span class="pi">:</span>
    <span class="na">_form</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Drupal\rsvp\Form\RSVPForm'</span>
    <span class="na">_title</span><span class="pi">:</span> <span class="s1">'</span><span class="s">RSVP</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">this</span><span class="nv"> </span><span class="s">Event'</span>
  <span class="na">requirements</span><span class="pi">:</span>
    <span class="na">_permission</span><span class="pi">:</span> <span class="s1">'</span><span class="s">view</span><span class="nv"> </span><span class="s">rsvplist'</span>
</code></pre></div></div><h2 id="admin-form-or-settings-form"> <a aria-labelledby="admin-form-or-settings-form" class="anchor-heading" href="https://selwynpolit.github.io/d9book/routes#admin-form-or-settings-form"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Admin form (or settings form)</h2><p>From <code class="language-plaintext highlighter-rouge">web/modules/custom/rsvp/rsvp.routing.yml</code> this route loads the admin or settings form <code class="language-plaintext highlighter-rouge">RSVPConfigurationForm</code>.</p><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">rsvp.admin_settings</span><span class="pi">:</span>
  <span class="na">path</span><span class="pi">:</span> <span class="s1">'</span><span class="s">/admin/config/content/rsvp'</span>
  <span class="na">defaults</span><span class="pi">:</span>
    <span class="na">_form</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Drupal\rsvp\Form\RSVPConfigurationForm'</span>
    <span class="na">_title</span><span class="pi">:</span> <span class="s1">'</span><span class="s">RSVP</span><span class="nv"> </span><span class="s">Configuration</span><span class="nv"> </span><span class="s">Settings'</span>
  <span class="na">requirements</span><span class="pi">:</span>
    <span class="na">_permission</span><span class="pi">:</span> <span class="s1">'</span><span class="s">administer</span><span class="nv"> </span><span class="s">rsvplist'</span>
  <span class="na">options</span><span class="pi">:</span>
    <span class="na">_admin_route</span><span class="pi">:</span> <span class="s">TRUE</span>
</code></pre></div></div><h2 id="routing-permissions"> <a aria-labelledby="routing-permissions" class="anchor-heading" href="https://selwynpolit.github.io/d9book/routes#routing-permissions"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Routing permissions</h2><p>These are defined in your <code class="language-plaintext highlighter-rouge">module.permissions.yml</code> e.g. <code class="language-plaintext highlighter-rouge">rsvp.permissions.yml</code>. If you add this file to a module, a cache clear will cause the new permissions to appear on the permissions page.</p><p>This requires the user to be logged in to access this route:</p><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">requirements</span><span class="pi">:</span>
  <span class="na">_user_is_logged_in</span><span class="pi">:</span> <span class="s1">'</span><span class="s">TRUE'</span>
</code></pre></div></div><p>To skip permissions, set <code class="language-plaintext highlighter-rouge">_access</code> to TRUE like this:</p><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">requirements</span><span class="pi">:</span>
  <span class="na">_access</span><span class="pi">:</span> <span class="s1">'</span><span class="s">TRUE'</span>
</code></pre></div></div><h3 id="a-specific-permission"> <a aria-labelledby="a-specific-permission" class="anchor-heading" href="https://selwynpolit.github.io/d9book/routes#a-specific-permission"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> A specific permission</h3><p>To specify a particular permission, use the following. Note. Case is critical!</p><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">requirements</span><span class="pi">:</span>
  <span class="na">_permission</span><span class="pi">:</span> <span class="s1">'</span><span class="s">administer</span><span class="nv"> </span><span class="s">rsvplist'</span>
</code></pre></div></div><h3 id="multiple-permissions"> <a aria-labelledby="multiple-permissions" class="anchor-heading" href="https://selwynpolit.github.io/d9book/routes#multiple-permissions"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Multiple permissions</h3><p>Drupal allows stacking permissions with the plus(<code class="language-plaintext highlighter-rouge">+</code>) sign. Note the <code class="language-plaintext highlighter-rouge">+</code> sign means OR. e.g.</p><div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="na">requirements</span><span class="pi">:</span>
    <span class="na">_permission</span><span class="pi">:</span> <span class="s1">'</span><span class="s">vote</span><span class="nv"> </span><span class="s">on</span><span class="nv"> </span><span class="s">own</span><span class="nv"> </span><span class="s">squishy</span><span class="nv"> </span><span class="s">item+manage</span><span class="nv"> </span><span class="s">squishy</span><span class="nv"> </span><span class="s">process'</span>
</code></pre></div></div><h2 id="set-the-page-title-dynamically"> <a aria-labelledby="set-the-page-title-dynamically" class="anchor-heading" href="https://selwynpolit.github.io/d9book/routes#set-the-page-title-dynamically"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Set the page title dynamically</h2><p>This code shows how to set the title statically in the <code class="language-plaintext highlighter-rouge">module.routing.yml</code> file, as well as how to call a function like <code class="language-plaintext highlighter-rouge">getTitle()</code> to return it so it can be dynamically generated:</p><div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">org_onions_summary</span><span class="pi">:</span>
  <span class="na">path</span><span class="pi">:</span> <span class="s1">'</span><span class="s">onions/{term_id}'</span>
  <span class="na">defaults</span><span class="pi">:</span>
    <span class="na">_controller</span><span class="pi">:</span> <span class="s1">'</span><span class="s">\Drupal\org_onions\Controller\OnionsController::buildOnionsSummary'</span>
<span class="c1">#    Static Title</span>
<span class="c1">#    _title: 'Opinions Summary'</span>
<span class="c1">#    Dynamic Title</span>
    <span class="na">_title_callback</span><span class="pi">:</span> <span class="s1">'</span><span class="s">\Drupal\org_onions\Controller\OnionsController::getTitle'</span>
  <span class="na">requirements</span><span class="pi">:</span>
    <span class="na">_permission</span><span class="pi">:</span> <span class="s1">'</span><span class="s">access</span><span class="nv"> </span><span class="s">content'</span>
</code></pre></div></div><p>In your controller, add the function <code class="language-plaintext highlighter-rouge">getTitle()</code>. This function can actually be called whatever you like.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cd">/**
 * Returns a page title.
 */</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">getTitle</span><span class="p">()</span> <span class="p">{</span>
  <span class="nv">$current_path</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">service</span><span class="p">(</span><span class="s1">'path.current'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">getPath</span><span class="p">();</span>
  <span class="nv">$path_args</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s1">'/'</span><span class="p">,</span> <span class="nv">$current_path</span><span class="p">);</span>
  <span class="nv">$boss_name</span> <span class="o">=</span> <span class="nv">$path_args</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
  <span class="nv">$boss_name</span> <span class="o">=</span> <span class="nb">ucwords</span><span class="p">(</span><span class="nb">str_replace</span><span class="p">(</span><span class="s2">"-"</span><span class="p">,</span> <span class="s2">" "</span><span class="p">,</span> <span class="nv">$boss_name</span><span class="p">));</span>

  <span class="nv">$config</span> <span class="o">=</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">config</span><span class="p">(</span><span class="s1">'system.site'</span><span class="p">);</span>
  <span class="nv">$site_name</span> <span class="o">=</span> <span class="nv">$config</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s1">'name'</span><span class="p">);</span>
  <span class="k">return</span>  <span class="nv">$boss_name</span> <span class="mf">.</span> <span class="s1">' Onions | '</span> <span class="mf">.</span> <span class="nv">$site_name</span><span class="p">;</span>

  <span class="c1">//or</span>
  <span class="k">return</span>  <span class="nv">$boss_name</span> <span class="mf">.</span> <span class="s1">' onions | '</span> <span class="mf">.</span> <span class="nc">\Drupal</span><span class="o">::</span><span class="nf">config</span><span class="p">(</span><span class="s1">'system.site'</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">get</span><span class="p">(</span><span class="s1">'name'</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div><h2 id="disable-caching-on-a-route"> <a aria-labelledby="disable-caching-on-a-route" class="anchor-heading" href="https://selwynpolit.github.io/d9book/routes#disable-caching-on-a-route"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Disable caching on a route</h2><p>This will cause Drupal to rebuild the page internally on each page load but won’t stop browsers or CDN’s from caching. The line: <code class="language-plaintext highlighter-rouge">no_cache: TRUE</code> is all you need to disable caching for this route.</p><div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">requirements</span><span class="pi">:</span>
  <span class="na">_permission</span><span class="pi">:</span> <span class="s1">'</span><span class="s">access</span><span class="nv"> </span><span class="s">content'</span>
<span class="na">options</span><span class="pi">:</span>
  <span class="na">no_cache</span><span class="pi">:</span> <span class="s">TRUE</span>
</code></pre></div></div><h2 id="generate-route-and-controller-with-drush"> <a aria-labelledby="generate-route-and-controller-with-drush" class="anchor-heading" href="https://selwynpolit.github.io/d9book/routes#generate-route-and-controller-with-drush"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Generate route and controller with Drush</h2><p>Drush has the ability to generate code to start you off. Use <code class="language-plaintext highlighter-rouge">drush generate module</code> and or <code class="language-plaintext highlighter-rouge">drush generate controller</code> to get a nice starting point for you to write your own controllers.</p><p>For more, on generating controllers see <a href="https://www.drush.org/latest/generators/controller/">https://www.drush.org/latest/generators/controller/</a></p><p>This is what it looks like to generate a controller:</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>drush generate controller

 Welcome to controller generator!
<span class="nt">----------------------------------</span>

 Module machine name <span class="o">[</span>web]:
 ➤ general

 Class <span class="o">[</span>GeneralController]:
 ➤ ExampleController

 Would you like to inject dependencies? <span class="o">[</span>No]:
 ➤

 Would you like to create a route <span class="k">for </span>this controller? <span class="o">[</span>Yes]:
 ➤

 Route name <span class="o">[</span>general.example]:
 ➤ general.book_example

 Route path <span class="o">[</span>/general/example]:
 ➤ /general/book_example

 Route title <span class="o">[</span>Example]:
 ➤ Book Example

 Route permission <span class="o">[</span>access content]:
 ➤

 The following directories and files have been created or updated:
<span class="nt">-------------------------------------------------------------------</span>
 • /Users/selwyn/Sites/d9book2/web/modules/custom/general/general.routing.yml
 • /Users/selwyn/Sites/d9book2/web/modules/custom/general/src/Controller/ExampleController.php
</code></pre></div></div><p>The file <code class="language-plaintext highlighter-rouge">general.routing.yml</code> will then contain:</p><div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">general.book_example</span><span class="pi">:</span>
  <span class="na">path</span><span class="pi">:</span> <span class="s1">'</span><span class="s">/general/book_example'</span>
  <span class="na">defaults</span><span class="pi">:</span>
    <span class="na">_title</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Book</span><span class="nv"> </span><span class="s">Example'</span>
    <span class="na">_controller</span><span class="pi">:</span> <span class="s1">'</span><span class="s">\Drupal\general\Controller\ExampleController::build'</span>
  <span class="na">requirements</span><span class="pi">:</span>
    <span class="na">_permission</span><span class="pi">:</span> <span class="s1">'</span><span class="s">access</span><span class="nv"> </span><span class="s">content'</span>
</code></pre></div></div><p>The <code class="language-plaintext highlighter-rouge">ExampleController.php</code> file has these contents:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>

<span class="kn">namespace</span> <span class="nn">Drupal\general\Controller</span><span class="p">;</span>

<span class="kn">use</span> <span class="nc">Drupal\Core\Controller\ControllerBase</span><span class="p">;</span>

<span class="cd">/**
 * Returns responses for General routes.
 */</span>
<span class="kd">class</span> <span class="nc">ExampleController</span> <span class="kd">extends</span> <span class="nc">ControllerBase</span> <span class="p">{</span>

  <span class="cd">/**
   * Builds the response.
   */</span>
  <span class="k">public</span> <span class="k">function</span> <span class="n">build</span><span class="p">()</span> <span class="p">{</span>

    <span class="nv">$build</span><span class="p">[</span><span class="s1">'content'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
      <span class="s1">'#type'</span> <span class="o">=&gt;</span> <span class="s1">'item'</span><span class="p">,</span>
      <span class="s1">'#markup'</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">t</span><span class="p">(</span><span class="s1">'It works!'</span><span class="p">),</span>
    <span class="p">];</span>

    <span class="k">return</span> <span class="nv">$build</span><span class="p">;</span>
  <span class="p">}</span>

<span class="p">}</span>
</code></pre></div></div><p>This is a huge timesaver!</p><h2 id="finding-routes-with-drush"> <a aria-labelledby="finding-routes-with-drush" class="anchor-heading" href="https://selwynpolit.github.io/d9book/routes#finding-routes-with-drush"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Finding routes with Drush</h2><p>Drush lets you figure out the controller associated with a route since version 10.5. Here are some of the options:</p><div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>drush route
<span class="nv">$ </span>drush route <span class="nt">--path</span><span class="o">=</span>/user/1
<span class="nv">$ </span>drush route <span class="nt">--name</span><span class="o">=</span>update.status
<span class="nv">$ </span>sh route <span class="nt">--url</span><span class="o">=</span>https://example.com/node/1
</code></pre></div></div><p>more at <a href="https://www.drush.org/latest/commands/core_route/">https://www.drush.org/latest/commands/core_route/</a></p><h3 id="all-routes"> <a aria-labelledby="all-routes" class="anchor-heading" href="https://selwynpolit.github.io/d9book/routes#all-routes"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> All routes</h3><p>Output from drush route. It lists the routes by name and the path they apply to.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ drush route

'&lt;button&gt;': /
'&lt;current&gt;': /&lt;current&gt;
'&lt;front&gt;': /
'&lt;nolink&gt;': /
'&lt;none&gt;': /
admin_toolbar.run.cron: /run-cron
admin_toolbar.settings: /admin/config/user-interface/admin-toolbar
admin_toolbar_tools.cssjs: /admin/flush/cssjs
admin_toolbar_tools.flush: /admin/flush
admin_toolbar_tools.flush_menu: /admin/flush/menu
admin_toolbar_tools.flush_rendercache: /admin/flush/rendercache
admin_toolbar_tools.flush_static: /admin/flush/static-caches
admin_toolbar_tools.flush_twig: /admin/flush/twig
admin_toolbar_tools.flush_views: /admin/flush/views
admin_toolbar_tools.plugin: /admin/flush/plugin
admin_toolbar_tools.settings: /admin/config/user-interface/admin-toolbar-tools
admin_toolbar_tools.theme_rebuild: /admin/flush/theme_rebuild
batch_examples.batch: /batch-examples/batchform
...
</code></pre></div></div><h3 id="specific-path"> <a aria-labelledby="specific-path" class="anchor-heading" href="https://selwynpolit.github.io/d9book/routes#specific-path"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Specific path</h3><p>Output when checking a specific path</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ drush route --path /admin/flush

name: admin_toolbar_tools.flush
path: /admin/flush
defaults:
  _controller: '\Drupal\admin_toolbar_tools\Controller\ToolbarController::flushAll'
  _title: 'Flush all caches'
requirements:
  _permission: 'administer site configuration'
  _csrf_token: 'TRUE'
options:
  _admin_route: true
  _access_checks:
    - access_check.permission
    - access_check.csrf
</code></pre></div></div><h3 id="specific-route-name"> <a aria-labelledby="specific-route-name" class="anchor-heading" href="https://selwynpolit.github.io/d9book/routes#specific-route-name"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Specific route name</h3><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ drush route --name=admin_toolbar_tools.flush

name: admin_toolbar_tools.flush
path: /admin/flush
defaults:
  _controller: '\Drupal\admin_toolbar_tools\Controller\ToolbarController::flushAll'
  _title: 'Flush all caches'
requirements:
  _permission: 'administer site configuration'
  _csrf_token: 'TRUE'
options:
  _admin_route: true
  _access_checks:
    - access_check.permission
    - access_check.csrf
</code></pre></div></div><h2 id="getting-some-help-from-chat-gpt"> <a aria-labelledby="getting-some-help-from-chat-gpt" class="anchor-heading" href="https://selwynpolit.github.io/d9book/routes#getting-some-help-from-chat-gpt"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Getting some help from Chat GPT</h2><p>At the time of this writing, <a href="https://openai.com/">OpenAI</a> has a research release of its ChatGPT available. You could always ask it to generate a controller for you as I did. I was amazed by the result. I asked it to:</p><p><code class="language-plaintext highlighter-rouge">Generate a Drupal 10 controller which displays a table of temperatures from 0 to 100 degrees in both celsius and fahrenheit </code></p><p>To which it replied:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Here is a Drupal 10 controller that generates a table of temperatures from 0 to 100 degrees in both Celsius and Fahrenheit:
</code></pre></div></div><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?php</span>

<span class="kn">namespace</span> <span class="nn">Drupal\mymodule\Controller</span><span class="p">;</span>

<span class="kn">use</span> <span class="nc">Drupal\Core\Controller\ControllerBase</span><span class="p">;</span>

<span class="kd">class</span> <span class="nc">TemperatureController</span> <span class="kd">extends</span> <span class="nc">ControllerBase</span> <span class="p">{</span>

  <span class="cd">/**
   * Display a table of temperatures.
   */</span>
  <span class="k">public</span> <span class="k">function</span> <span class="n">displayTable</span><span class="p">()</span> <span class="p">{</span>
    <span class="nv">$rows</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">for</span> <span class="p">(</span><span class="nv">$i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span> <span class="o">&lt;=</span> <span class="mi">100</span><span class="p">;</span> <span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nv">$rows</span><span class="p">[]</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s1">'celsius'</span> <span class="o">=&gt;</span> <span class="nv">$i</span><span class="p">,</span>
        <span class="s1">'fahrenheit'</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">celsiusToFahrenheit</span><span class="p">(</span><span class="nv">$i</span><span class="p">),</span>
      <span class="p">];</span>
    <span class="p">}</span>
    <span class="nv">$header</span> <span class="o">=</span> <span class="p">[</span>
      <span class="p">[</span><span class="s1">'data'</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">t</span><span class="p">(</span><span class="s1">'Celsius'</span><span class="p">),</span> <span class="s1">'field'</span> <span class="o">=&gt;</span> <span class="s1">'celsius'</span><span class="p">],</span>
      <span class="p">[</span><span class="s1">'data'</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">t</span><span class="p">(</span><span class="s1">'Fahrenheit'</span><span class="p">),</span> <span class="s1">'field'</span> <span class="o">=&gt;</span> <span class="s1">'fahrenheit'</span><span class="p">],</span>
    <span class="p">];</span>
    <span class="nv">$build</span><span class="p">[</span><span class="s1">'table'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
      <span class="s1">'#type'</span> <span class="o">=&gt;</span> <span class="s1">'table'</span><span class="p">,</span>
      <span class="s1">'#header'</span> <span class="o">=&gt;</span> <span class="nv">$header</span><span class="p">,</span>
      <span class="s1">'#rows'</span> <span class="o">=&gt;</span> <span class="nv">$rows</span><span class="p">,</span>
      <span class="s1">'#empty'</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">t</span><span class="p">(</span><span class="s1">'No temperatures to display.'</span><span class="p">),</span>
    <span class="p">];</span>
    <span class="k">return</span> <span class="nv">$build</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="cd">/**
   * Convert a temperature from Celsius to Fahrenheit.
   *
   * @param float $celsius
   *   The temperature in Celsius.
   *
   * @return float
   *   The temperature in Fahrenheit.
   */</span>
  <span class="k">protected</span> <span class="k">function</span> <span class="n">celsiusToFahrenheit</span><span class="p">(</span><span class="nv">$celsius</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="nv">$celsius</span> <span class="o">*</span> <span class="mi">9</span> <span class="o">/</span> <span class="mi">5</span><span class="p">)</span> <span class="o">+</span> <span class="mi">32</span><span class="p">;</span>
  <span class="p">}</span>

<span class="p">}</span>

</code></pre></div></div><p>followed by this thoughtful addition:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>To use this controller, you would need to define a route in your module's routing file that points to the displayTable method. For example:
</code></pre></div></div><div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">mymodule.temperature_table</span><span class="pi">:</span>
  <span class="na">path</span><span class="pi">:</span> <span class="s1">'</span><span class="s">/temperature-table'</span>
  <span class="na">defaults</span><span class="pi">:</span>
    <span class="na">_controller</span><span class="pi">:</span> <span class="s1">'</span><span class="s">\Drupal\mymodule\Controller\TemperatureController::displayTable'</span>
    <span class="na">_title</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Temperature</span><span class="nv"> </span><span class="s">Table'</span>
  <span class="na">requirements</span><span class="pi">:</span>
    <span class="na">_permission</span><span class="pi">:</span> <span class="s1">'</span><span class="s">access</span><span class="nv"> </span><span class="s">content'</span>
</code></pre></div></div><p>It concluded with:</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>This would define a route at the path /temperature-table that displays the table of temperatures when accessed.
</code></pre></div></div><h2 id="resources"> <a aria-labelledby="resources" class="anchor-heading" href="https://selwynpolit.github.io/d9book/routes#resources"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Resources</h2><ul><li><a href="https://www.drupal.org/docs/drupal-apis/routing-system/introductory-drupal-routes-and-controllers-example">Introductory Drupal routes and controllers example from Drupal documentation updated October 2022</a><li><a href="https://www.drupal.org/docs/drupal-apis/routing-system/structure-of-routes">Structure of Routes from Drupal documentation updated September 2022</a><li><a href="https://symfonycasts.com/screencast/drupal8-under-the-hood">Symfonycasts.com excellent course in Drupal 8</a><li><a href="https://drupalize.me/topic/controllers">Controllers article from Drupalize.me updated December 2021</a></li></li></li></li></ul><hr/> <script async="" crossorigin="anonymous" data-category="Q&amp;A" data-category-id="MDE4OkRpc2N1c3Npb25DYXRlZ29yeTMyMjY2NDE4" data-emit-metadata="0" data-input-position="bottom" data-lang="en" data-mapping="title" data-reactions-enabled="1" data-repo="selwynpolit/d9book" data-repo-id="MDEwOlJlcG9zaXRvcnkzMjUxNTQ1Nzg=" data-strict="0" data-theme="preferred_color_scheme" src="https://giscus.app/client.js"> </script><hr/><footer><p><a href="https://selwynpolit.github.io/d9book/routes#top" id="back-to-top">Back to top</a></p><p class="text-small text-grey-dk-100 mb-0"><span xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/"> <a href="http://www.selwynpolit.github.io/d9book" property="dct:title" rel="cc:attributionURL">Drupal at your fingertips</a> by <a href="http://www.drupal.org/u/selwynpolit" property="cc:attributionName" rel="cc:attributionURL dct:creator">Selwyn Polit</a> is licensed under <a href="http://creativecommons.org/licenses/by/4.0/" rel="license noopener noreferrer" target="_blank">CC BY 4.0 <img src="https://mirrors.creativecommons.org/presskit/icons/cc.svg" style="height:16px!important;vertical-align:text-bottom;"/> <img src="https://mirrors.creativecommons.org/presskit/icons/by.svg" style="height:16px!important;vertical-align:text-bottom;"/> </a></span></p><div class="d-flex mt-2"><p class="text-small text-grey-dk-000 mb-0 mr-2"> Page last modified: <span class="d-inline-block">Jul 23 2023</span>.</p><p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/selwynpolit/d9book/tree/gh-pages/book/routes.md" id="edit-this-page">Edit this page on GitHub</a></p></div></footer></div></div><div class="search-overlay"></div></div>
</body></link></meta></meta></meta></head></html>