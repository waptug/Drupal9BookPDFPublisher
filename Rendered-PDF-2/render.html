<!DOCTYPE html>
<html lang="en-US"><head><meta charset="utf-8"/><meta content="IE=Edge" http-equiv="X-UA-Compatible"/><link href="https://selwynpolit.github.io/d9book/assets/css/just-the-docs-default.css" rel="stylesheet"/> <script async="" src="https://www.googletagmanager.com/gtag/js?id=8V22RQEJ71"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', '8V22RQEJ71', { 'anonymize_ip': true }); </script> <script src="https://selwynpolit.github.io/d9book/assets/js/vendor/lunr.min.js"></script> <script src="https://selwynpolit.github.io/d9book/assets/js/just-the-docs.js"></script><meta content="width=device-width, initial-scale=1" name="viewport"/><link href="https://selwynpolit.github.io/d9book/assets/images/favicon.ico" rel="icon" type="image/x-icon"/><title>Render Arrays | Drupal Book</title><meta content="Jekyll v4.3.2" name="generator"><meta content="Render Arrays" property="og:title"><meta content="en_US" property="og:locale"><meta content="Drupal at your fingertips" name="description"/><meta content="Drupal at your fingertips" property="og:description"/><link href="https://selwynpolit.github.io/d9book/d9book/render" rel="canonical"><meta content="https://selwynpolit.github.io/d9book/d9book/render" property="og:url"/><meta content="Drupal Book" property="og:site_name"/><meta content="website" property="og:type"/><meta content="summary" name="twitter:card"/><meta content="Render Arrays" property="twitter:title"/> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Drupal at your fingertips","headline":"Render Arrays","url":"https://selwynpolit.github.io/d9book/d9book/render"}</script><body> <a class="skip-to-main" href="https://selwynpolit.github.io/d9book/render#main-content">Skip to main content</a> <svg class="d-none" xmlns="http://www.w3.org/2000/svg"> <symbol id="svg-link" viewbox="0 0 24 24"><title>Link</title><svg class="feather feather-link" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewbox="0 0 24 24"><title>Menu</title><svg class="feather feather-menu" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><line x1="3" x2="21" y1="12" y2="12"></line><line x1="3" x2="21" y1="6" y2="6"></line><line x1="3" x2="21" y1="18" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewbox="0 0 24 24"><title>Expand</title><svg class="feather feather-chevron-right" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol class="feather feather-external-link" fill="none" height="24" id="svg-external-link" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24"><title id="svg-external-link-title">(external link)</title><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" x2="21" y1="14" y2="3"></line> </symbol> <symbol id="svg-doc" viewbox="0 0 24 24"><title>Document</title><svg class="feather feather-file" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewbox="0 0 24 24"><title>Search</title><svg class="feather feather-search" fill="none" height="24" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"> <circle cx="11" cy="11" r="8"></circle><line x1="21" x2="16.65" y1="21" y2="16.65"></line> </svg> </symbol> <symbol id="svg-copy" viewbox="0 0 16 16"><title>Copy</title><svg class="bi bi-clipboard" fill="currentColor" height="16" viewbox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"></path><path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"></path> </svg> </symbol> <symbol id="svg-copied" viewbox="0 0 16 16"><title>Copied</title><svg class="bi bi-clipboard-check-fill" fill="currentColor" height="16" viewbox="0 0 16 16" width="16" xmlns="http://www.w3.org/2000/svg"><path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"></path><path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"></path> </svg> </symbol> </svg><div class="side-bar"><div class="site-header"> <a class="site-title lh-tight" href="https://selwynpolit.github.io/d9book/"> Drupal Book </a> <a class="site-button" href="https://selwynpolit.github.io/d9book/render" id="menu-button"> <svg class="icon" viewbox="0 0 24 24"><use xlink:href="#svg-menu"></use></svg> </a></div><nav aria-label="Main" class="site-nav" id="site-nav"><ul class="nav-list"><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/">Home</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/actions">Actions</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/attribution">Attribution</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/bq">Batch and Queue</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/blocks">Blocks</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/caching">Caching</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/composer">Composer</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/config">Config</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/cron">Cron</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/dates">Dates and Times</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/debugging">Debugging</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/development">Development</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/drush">Drush</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/email">Email</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/entities">Entities</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/forms">Forms</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/general">General</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/off-island">Getting off the Island</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/hooks">Hooks</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/learn">Learning</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/links">Links</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/logging">Logging</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/menus">Menus</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/migrate">Migrate</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/modals">Modals</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/nodes-and-fields">Nodes and Fields</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/queries">Queries</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/redirects">Redirects</a><li class="nav-list-item active"><a class="nav-list-link active" href="https://selwynpolit.github.io/d9book/render">Render Arrays</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/routes">Routes</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/security">Security</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/services">Services</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/state">State</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/taxonomy">Taxonomy</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/dtt">Tests</a><li class="nav-list-item"><a class="nav-list-link" href="https://selwynpolit.github.io/d9book/twig">Twig</a></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></ul><ul class="nav-list"><li class="nav-list-item external"> <a class="nav-list-link external" href="https://github.com/selwynpolit/d9book/fork"> Fork me on GitHub <svg aria-labelledby="svg-external-link-title" viewbox="0 0 24 24"><use xlink:href="#svg-external-link"></use></svg> </a></li></ul></nav><footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</footer></div><div class="main" id="top"><div class="main-header" id="main-header"><div class="search"><div class="search-input-wrap"> <input aria-label="Search Drupal Book" autocomplete="off" class="search-input" id="search-input" placeholder="Search Drupal Book" tabindex="0" type="text"/> <label class="search-label" for="search-input"><svg class="search-icon" viewbox="0 0 24 24"><use xlink:href="#svg-search"></use></svg></label></div><div class="search-results" id="search-results"></div></div><nav aria-label="Auxiliary" class="aux-nav"><ul class="aux-nav-list"><li class="aux-nav-list-item"> <a class="site-button" href="https://twitter.com/selwynpolit" rel="noopener noreferrer" target="_blank"> <img alt="Twitter logo" src="https://atuin.ru/demo/simple-icons/icons/twitter.svg" style="width: 30px; height: 30px;" title="Author in Twitter"/> </a><li class="aux-nav-list-item"> <a class="site-button" href="https://github.com/selwynpolit/d9book/tree/gh-pages" rel="noopener noreferrer" target="_blank"> <img alt="GitHub logo" src="https://atuin.ru/demo/simple-icons/icons/github.svg" style="width: 30px; height: 30px;" title="D9Book on GitHub"/> </a></li></li></ul></nav></div><div class="main-content-wrap" id="main-content-wrap"><div class="main-content" id="main-content" role="main"><h1 class="no_toc fw-500" id="render-arrays"> <a aria-labelledby="render-arrays" class="anchor-heading" href="https://selwynpolit.github.io/d9book/render#render-arrays"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Render Arrays</h1><h2 class="no_toc text-delta" id="table-of-contents"> <a aria-labelledby="table-of-contents" class="anchor-heading" href="https://selwynpolit.github.io/d9book/render#table-of-contents"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Table of contents</h2><ul id="markdown-toc"><li><a href="https://selwynpolit.github.io/d9book/render#overview" id="markdown-toc-overview">Overview</a><li><a href="https://selwynpolit.github.io/d9book/render#overview-of-the-theme-system-and-render-api" id="markdown-toc-overview-of-the-theme-system-and-render-api">Overview of the Theme system and Render API.</a><li><a href="https://selwynpolit.github.io/d9book/render#caching" id="markdown-toc-caching">Caching</a><li><a href="https://selwynpolit.github.io/d9book/render#properties" id="markdown-toc-properties">Properties</a><li><a href="https://selwynpolit.github.io/d9book/render#image" id="markdown-toc-image">Image</a><li><a href="https://selwynpolit.github.io/d9book/render#simple-text" id="markdown-toc-simple-text">Simple Text</a><li><a href="https://selwynpolit.github.io/d9book/render#text-with-variable-substitution-placeholders" id="markdown-toc-text-with-variable-substitution-placeholders">Text with variable substitution (Placeholders)</a><li><a href="https://selwynpolit.github.io/d9book/render#wrap-an-element-with-a-div-with-a-class" id="markdown-toc-wrap-an-element-with-a-div-with-a-class">Wrap an element with a div with a class</a><li><a href="https://selwynpolit.github.io/d9book/render#prefix-and-suffix" id="markdown-toc-prefix-and-suffix">Prefix and suffix</a><li><a href="https://selwynpolit.github.io/d9book/render#date" id="markdown-toc-date">Date</a><li><a href="https://selwynpolit.github.io/d9book/render#image-1" id="markdown-toc-image-1">Image</a><li><a href="https://selwynpolit.github.io/d9book/render#several-urls" id="markdown-toc-several-urls">Several Url’s.</a><li><a href="https://selwynpolit.github.io/d9book/render#two-paragraphs" id="markdown-toc-two-paragraphs">Two paragraphs</a><li><a href="https://selwynpolit.github.io/d9book/render#a-button-that-opens-a-modal-dialog" id="markdown-toc-a-button-that-opens-a-modal-dialog">A button that opens a modal dialog</a><li><a href="https://selwynpolit.github.io/d9book/render#a-link" id="markdown-toc-a-link">A link</a><li><a href="https://selwynpolit.github.io/d9book/render#a-link-with-a-class" id="markdown-toc-a-link-with-a-class">A link with a class</a><li><a href="https://selwynpolit.github.io/d9book/render#a-link-and-its-twig-template" id="markdown-toc-a-link-and-its-twig-template">A link and its TWIG template</a><li><a href="https://selwynpolit.github.io/d9book/render#a-link-with-parameters-and-a-template-file" id="markdown-toc-a-link-with-parameters-and-a-template-file">A link with parameters and a template file</a><li><a href="https://selwynpolit.github.io/d9book/render#simple-unordered-list" id="markdown-toc-simple-unordered-list">Simple unordered list</a><li><a href="https://selwynpolit.github.io/d9book/render#unordered-list-of-links-for-a-menu" id="markdown-toc-unordered-list-of-links-for-a-menu">Unordered list of links for a menu</a><li><a href="https://selwynpolit.github.io/d9book/render#nested-unordered-list" id="markdown-toc-nested-unordered-list">Nested Unordered List</a><li><a href="https://selwynpolit.github.io/d9book/render#select-dropdown" id="markdown-toc-select-dropdown">Select (dropdown)</a><li><a href="https://selwynpolit.github.io/d9book/render#select-dropdown-ajaxified" id="markdown-toc-select-dropdown-ajaxified">Select (dropdown) Ajaxified</a><li><a href="https://selwynpolit.github.io/d9book/render#limit-allowed-tags-in-markup" id="markdown-toc-limit-allowed-tags-in-markup">Limit allowed tags in markup</a><li><a href="https://selwynpolit.github.io/d9book/render#disable-an-element" id="markdown-toc-disable-an-element">Disable an element</a><li><a href="https://selwynpolit.github.io/d9book/render#resources" id="markdown-toc-resources">Resources</a></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></li></ul><p><img alt="views" src="https://api.visitor.plantree.me/visitor-badge/pv?label=views&amp;color=informational&amp;namespace=d9book&amp;key=render.md"/></p><hr/><h2 id="overview"> <a aria-labelledby="overview" class="anchor-heading" href="https://selwynpolit.github.io/d9book/render#overview"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Overview</h2><p>Render Arrays are the building blocks of a Drupal page. A render array is an associative array which conforms to the standards and data structures used in Drupal's Render API. The Render API is also integrated with the Theme API.</p><p>In many cases, the data used to build a page (and all parts of it) is kept as structured arrays until the final stage of generating a response. This provides enormous flexibility in extending, slightly altering or completely overriding parts of the page.</p><p>Render arrays are nested and thus form a tree. Consider them Drupal's "render tree" — Drupal's equivalent of the DOM.</p><p>Note: While render arrays and arrays used by the Form API share elements, properties and structure, many properties on form elements only have meaning for the Form API, not for the Render API. Form API arrays are transformed into render arrays by FormBuilder. Passing an unprocessed Form API array to the Render API may yield unexpected results.</p><p>Here is a simple render array that displays some text.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$my_render_array</span><span class="p">[</span><span class="s1">'some_item'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">'#type'</span> <span class="o">=&gt;</span> <span class="n">markup</span><span class="p">,</span>
  <span class="s1">'#markup'</span> <span class="o">=&gt;</span> <span class="s2">"This is a test"</span><span class="p">,</span>
<span class="p">];</span>
</code></pre></div></div><p>All forms are Render arrays. This is important when need to use the form API to create forms.</p><p>This is mostly from <a href="https://www.drupal.org/docs/drupal-apis/render-api/render-arrays">https://www.drupal.org/docs/drupal-apis/render-api/render-arrays</a></p><h2 id="overview-of-the-theme-system-and-render-api"> <a aria-labelledby="overview-of-the-theme-system-and-render-api" class="anchor-heading" href="https://selwynpolit.github.io/d9book/render#overview-of-the-theme-system-and-render-api"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Overview of the Theme system and Render API.</h2><p>The main purpose of Drupal's Theme system is to give themes complete control over the appearance of the site, which includes the markup returned from HTTP requests and the CSS files used to style that markup. In order to ensure that a theme can completely customize the markup, module developers should avoid directly writing HTML markup for pages, blocks, and other user-visible output in their modules, and instead return structured "render arrays". Doing this also increases usability, by ensuring that the markup used for similar functionality on different areas of the site is the same, which gives users fewer user interface patterns to learn.</p><p>From the Render API overview at <a href="https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Core%21Render%21theme.api.php/group/theme_render/10.0.x">https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Core%21Render%21theme.api.php/group/theme_render/10.0.x</a></p><h2 id="caching"> <a aria-labelledby="caching" class="anchor-heading" href="https://selwynpolit.github.io/d9book/render#caching"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Caching</h2><p>You can specify caching information when creating render arrays. Cache keys, cache contexts, cache tags and cache max-age can all be defined.</p><p>The Drupal rendering process has the ability to cache rendered output at any level in a render array hierarchy. This allows expensive calculations to be done infrequently, and speeds up page loading. See the <a href="https://api.drupal.org/api/drupal/core%21core.api.php/group/cache/10.0.x">Cache API topic</a> for general information about the cache system.</p><p>In order to make caching possible, the following information needs to be present:</p><ul><li><p><strong>Cache keys</strong>: Identifiers for cacheable portions of render arrays. These should be created and added for portions of a render array that involve expensive calculations in the rendering process.</p><li><p><strong>Cache contexts</strong>: Contexts that may affect rendering, such as user role and language. When no context is specified, it means that the render array does not vary by any context.</p><li><p><strong>Cache tags</strong>: Tags for data that rendering depends on, such as for individual nodes or user accounts, so that when these change the cache can be automatically invalidated. If the data consists of entities, you can use <a href="https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Core%21Cache%21CacheableDependencyInterface.php/function/CacheableDependencyInterface%3A%3AgetCacheTags/10.0.x">\Drupal\Core\Entity\EntityInterface::getCacheTags</a>() to generate appropriate tags; configuration objects have a similar method.</p><li><p><strong>Cache max-age</strong>: The maximum duration for which a render array maybe cached. Defaults to <a href="https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Core%21Cache%21Cache.php/constant/Cache%3A%3APERMANENT/10.0.x">\Drupal\Core\Cache\Cache::PERMANENT</a> (permanently cacheable).</p></li></li></li></li></ul><p>Cache information is provided in the #cache property in a render array. In this property, always supply the cache contexts, tags, and max-age if a render array varies by context, depends on some modifiable data, or depends on information that's only valid for a limited time, respectively. Cache keys should only be set on the portions of a render array that should be cached. Contexts are automatically replaced with the value for the current request (e.g. the current language) and combined with the keys to form a cache ID. The cache contexts, tags, and max-age will be propagated up the render array hierarchy to determine cacheability for containing render array sections.</p><p>Here's an example of what a #cache property might contain:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="s1">'#cache'</span> <span class="o">=&gt;</span> <span class="p">[</span>
    <span class="s1">'keys'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'entity_view'</span><span class="p">,</span> <span class="s1">'node'</span><span class="p">,</span> <span class="nv">$node</span><span class="o">-&gt;</span><span class="nf">id</span><span class="p">()],</span>
    <span class="s1">'contexts'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'languages'</span><span class="p">],</span>
    <span class="s1">'tags'</span> <span class="o">=&gt;</span> <span class="nv">$node</span><span class="o">-&gt;</span><span class="nf">getCacheTags</span><span class="p">(),</span>
    <span class="s1">'max-age'</span> <span class="o">=&gt;</span> <span class="nc">Cache</span><span class="o">::</span><span class="no">PERMANENT</span><span class="p">,</span>
  <span class="p">],</span>
</code></pre></div></div><p>At the response level, you'll see <code class="language-plaintext highlighter-rouge">X-Drupal-Cache-Contexts</code> and <code class="language-plaintext highlighter-rouge">X-Drupal-Cache-Tags</code> headers.</p><p>Reproduced from the Render API overview at <a href="https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Core%21Render%21theme.api.php/group/theme_render/10.0.x">https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Core%21Render%21theme.api.php/group/theme_render/10.0.x</a></p><h2 id="properties"> <a aria-labelledby="properties" class="anchor-heading" href="https://selwynpolit.github.io/d9book/render#properties"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Properties</h2><p>Elements that start with # are properties and can include the following: <code class="language-plaintext highlighter-rouge">#type</code>, <code class="language-plaintext highlighter-rouge">#theme</code>, <code class="language-plaintext highlighter-rouge">#markup</code>, <code class="language-plaintext highlighter-rouge">#prefix</code>, <code class="language-plaintext highlighter-rouge">#suffix</code>, <code class="language-plaintext highlighter-rouge">#plain_text</code> or <code class="language-plaintext highlighter-rouge">#allowed_tags</code>.</p><p>Render arrays (at any level of the hierarchy) will usually have one of the following properties defined:</p><ul><li><p><strong>#type</strong>: Specifies that the array contains data and options for a particular type of "render element" (for example, 'form', for an HTML form; 'textfield', 'submit', for HTML form element types; 'table', for a table with rows, columns, and headers). See <a href="https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Core%21Render%21theme.api.php/group/theme_render/10.0.x#elements">Render elements</a> below for more on render element types.</p><li><p><strong>#theme</strong>: Specifies that the array contains data to be themed by a particular theme hook. Modules define theme hooks by implementing hook_theme(), which specifies the input "variables" used to provide data and options; if a hook_theme() implementation specifies variable 'foo', then in a render array, you would provide this data using property '#foo'. Modules implementing hook_theme() also need to provide a default implementation for each of their theme hooks, normally in a Twig file. For more information and to discover available theme hooks, see the documentation of hook_theme() and the <a href="https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Core%21Render%21theme.api.php/group/themeable/10.0.x">Default theme implementations topic.</a></p><li><p><strong>#markup</strong>: Specifies that the array provides HTML markup directly. Unless the markup is very simple, such as an explanation in a paragraph tag, it is normally preferable to use #theme or #type instead, so that the theme can customize the markup. Note that the value is passed through <a href="https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Component%21Utility%21Xss.php/function/Xss%3A%3AfilterAdmin/10.0.x">\Drupal\Component\Utility\Xss::filterAdmin</a>(), which strips known XSS vectors while allowing a permissive list of HTML tags that are not XSS vectors. (For example, &lt;script&gt; and &lt;style&gt; are not allowed.) See <a href="https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Component%21Utility%21Xss.php/class/Xss/10.0.x">\Drupal\Component\Utility\Xss</a>::$adminTags for the list of allowed tags. If your markup needs any of the tags not in this list, then you can implement a theme hook and/or an asset library. Alternatively, you can use the key #allowed_tags to alter which tags are filtered.</p><li><p><strong>#plain_text</strong>: Specifies that the array provides text that needs to be escaped. This value takes precedence over #markup.</p><li><p><strong>#allowed_tags</strong>: If #markup is supplied, this can be used to change which tags are allowed in the markup. The value is an array of tags that Xss::filter() would accept. If #plain_text is set, this value is ignored.</p></li></li></li></li></li></ul><p>Usage example:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$output</span><span class="p">[</span><span class="s1">'admin_filtered_string'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">'#markup'</span> <span class="o">=&gt;</span> <span class="s1">'&lt;em&gt;This is filtered using the admin tag list&lt;/em&gt;'</span><span class="p">,</span>
<span class="p">];</span>
<span class="nv">$output</span><span class="p">[</span><span class="s1">'filtered_string'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">'#markup'</span> <span class="o">=&gt;</span> <span class="s1">'&lt;video&gt;&lt;source src="v.webm" type="video/webm"&gt;&lt;/video&gt;'</span><span class="p">,</span>
  <span class="s1">'#allowed_tags'</span> <span class="o">=&gt;</span> <span class="p">[</span>
    <span class="s1">'video'</span><span class="p">,</span>
    <span class="s1">'source'</span><span class="p">,</span>
  <span class="p">],</span>
<span class="p">];</span>
<span class="nv">$output</span><span class="p">[</span><span class="s1">'escaped_string'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">'#plain_text'</span> <span class="o">=&gt;</span> <span class="s1">'&lt;em&gt;This is escaped&lt;/em&gt;'</span><span class="p">,</span>
<span class="p">];</span>
</code></pre></div></div><p>JavaScript and CSS assets are specified in the render array using the <code class="language-plaintext highlighter-rouge">#attached</code> property (see <a href="https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Core%21Render%21theme.api.php/group/theme_render/10.0.x#sec_attached">Attaching libraries in render arrays</a>).</p><p>From <a href="https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Core%21Render%21theme.api.php/group/theme_render/10.0.x">https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Core%21Render%21theme.api.php/group/theme_render/10.0.x</a></p><p>And</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$variables</span><span class="p">[</span><span class="s1">'content'</span><span class="p">][</span><span class="s1">'field_image'</span><span class="p">][</span><span class="s1">'#suffix'</span><span class="p">]</span> <span class="o">=</span> <span class="s2">"this is a suffix to the image"</span><span class="p">;</span>
</code></pre></div></div><p>Or</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$variables</span><span class="p">[</span><span class="s1">'content'</span><span class="p">][</span><span class="s1">'custom_field'</span><span class="p">]</span><span class="o">=</span> <span class="p">[</span><span class="s1">'#type'</span><span class="o">=&gt;</span><span class="s1">'markup'</span><span class="p">,</span> <span class="s1">'#markup'</span><span class="o">=&gt;</span><span class="s1">'Hello World'</span><span class="p">];</span>
</code></pre></div></div><p>You can make up your own properties e.g. see the <code class="language-plaintext highlighter-rouge">#selwyn_id</code> below for use elsewhere.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$citation_nid</span> <span class="o">=</span> <span class="mi">25</span><span class="p">;</span>
<span class="nv">$form</span><span class="p">[</span><span class="s1">'actions'</span><span class="p">][</span><span class="s1">'accept'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">'#type'</span> <span class="o">=&gt;</span> <span class="s1">'submit'</span><span class="p">,</span>
  <span class="s1">'#value'</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">t</span><span class="p">(</span><span class="s2">"Accept Citation </span><span class="nv">$citation_nid</span><span class="s2">"</span><span class="p">),</span>
  <span class="s1">'#citation_nid'</span> <span class="o">=&gt;</span> <span class="nv">$citation_nid</span><span class="p">,</span>
  <span class="s1">'#voting_action'</span> <span class="o">=&gt;</span> <span class="s1">'Accept'</span><span class="p">,</span>
  <span class="s1">'#name'</span> <span class="o">=&gt;</span> <span class="s2">"accept_citation_</span><span class="nv">$citation_nid</span><span class="s2">"</span><span class="p">,</span>
  <span class="s1">'#selwyn_id'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'edit-accept-'</span> <span class="mf">.</span> <span class="nv">$citation_nid</span><span class="p">],</span>
  <span class="s1">'#attributes'</span> <span class="o">=&gt;</span> <span class="p">[</span>
    <span class="s1">'class'</span> <span class="o">=&gt;</span> <span class="p">[</span>
      <span class="s1">'hilited-button'</span><span class="p">,</span>
      <span class="s1">'blue-button'</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="s1">'id'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'edit-accept-'</span> <span class="mf">.</span> <span class="nv">$citation_nid</span><span class="p">],</span>
  <span class="p">],</span>
<span class="p">];</span>
</code></pre></div></div><h2 id="image"> <a aria-labelledby="image" class="anchor-heading" href="https://selwynpolit.github.io/d9book/render#image"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Image</h2><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$image</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">'#theme'</span><span class="o">=&gt;</span><span class="s1">'image'</span><span class="p">,</span>
  <span class="s1">'#uri'</span> <span class="o">=&gt;</span> <span class="s1">'public://photo.jpg'</span><span class="p">,</span>
  <span class="s1">'#alt'</span> <span class="o">=&gt;</span> <span class="s1">'hello'</span>
<span class="p">];</span>
</code></pre></div></div><h2 id="simple-text"> <a aria-labelledby="simple-text" class="anchor-heading" href="https://selwynpolit.github.io/d9book/render#simple-text"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Simple Text</h2><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$text_array</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">'#markup'</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">t</span><span class="p">(</span><span class="s1">'Hello world!'</span><span class="p">),</span>
<span class="p">];</span>
</code></pre></div></div><h2 id="text-with-variable-substitution-placeholders"> <a aria-labelledby="text-with-variable-substitution-placeholders" class="anchor-heading" href="https://selwynpolit.github.io/d9book/render#text-with-variable-substitution-placeholders"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Text with variable substitution (Placeholders)</h2><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$render_array</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">'#type'</span> <span class="o">=&gt;</span> <span class="s1">'markup'</span><span class="p">,</span>
  <span class="s1">'#markup'</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">t</span><span class="p">(</span><span class="s1">'You are viewing @title.  Unfortunately there is no image defined for delta: @delta.'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'@title'</span> <span class="o">=&gt;</span> <span class="nv">$node</span><span class="o">-&gt;</span><span class="nf">getTitle</span><span class="p">(),</span> <span class="s1">'@delta'</span> <span class="o">=&gt;</span><span class="nv">$delta</span><span class="p">)],</span>
  <span class="p">];</span>
</code></pre></div></div><p>And from the Render API Overview at <a href="https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Core%21Render%21theme.api.php/group/theme_render/10.0.x">https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Core%21Render%21theme.api.php/group/theme_render/10.0.x</a> :</p><p><strong>Placeholders in render arrays</strong></p><p>Render arrays have a placeholder mechanism, which can be used to add data into the render array late in the rendering process. This works in a similar manner to <a href="https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Component%21Render%21FormattableMarkup.php/function/FormattableMarkup%3A%3AplaceholderFormat/10.0.x">\Drupal\Component\Render\FormattableMarkup::placeholderFormat</a>(), with the text that ends up in the #markup property of the element at the end of the rendering process getting substitutions from placeholders that are stored in the 'placeholders' element of the #attached property.</p><p>For example, after the rest of the rendering process was done, if your render array contained:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$build</span><span class="p">[</span><span class="s1">'my_element'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">'#markup'</span> <span class="o">=&gt;</span> <span class="s1">'Something about @foo'</span><span class="p">,</span>
  <span class="s1">'#attached'</span> <span class="o">=&gt;</span> <span class="p">[</span>
    <span class="s1">'placeholders'</span> <span class="o">=&gt;</span> <span class="p">[</span>
      <span class="s1">'@foo'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'#markup'</span> <span class="o">=&gt;</span> <span class="s1">'replacement'</span><span class="p">],</span>
    <span class="p">],</span>
<span class="p">];</span>
</code></pre></div></div><p>then <code class="language-plaintext highlighter-rouge">#markup</code> would end up containing 'Something about replacement'.</p><p>Note that each placeholder value *must* itself be a render array. It will be rendered, and any cache tags generated during rendering will be added to the cache tags for the markup.</p><h2 id="wrap-an-element-with-a-div-with-a-class"> <a aria-labelledby="wrap-an-element-with-a-div-with-a-class" class="anchor-heading" href="https://selwynpolit.github.io/d9book/render#wrap-an-element-with-a-div-with-a-class"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Wrap an element with a div with a class</h2><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ra</span><span class="p">[</span><span class="s1">'list'</span><span class="p">][</span><span class="nv">$customer</span><span class="p">][</span><span class="s1">'name'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">'#prefix'</span> <span class="o">=&gt;</span> <span class="s1">'&lt;div class="customer-name"&gt;'</span><span class="p">,</span>
  <span class="s1">'#suffix'</span> <span class="o">=&gt;</span> <span class="s1">'&lt;/div&gt;'</span><span class="p">,</span>
  <span class="s1">'#type'</span> <span class="o">=&gt;</span> <span class="s1">'markup'</span><span class="p">,</span>
  <span class="s1">'#markup'</span> <span class="o">=&gt;</span> <span class="nv">$customer</span><span class="p">[</span><span class="s1">'name'</span><span class="p">],</span>
<span class="p">];</span>
</code></pre></div></div><h2 id="prefix-and-suffix"> <a aria-labelledby="prefix-and-suffix" class="anchor-heading" href="https://selwynpolit.github.io/d9book/render#prefix-and-suffix"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Prefix and suffix</h2><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ra</span><span class="p">[</span><span class="s1">'#prefix'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'&lt;div id="option-landing-block"&gt;'</span><span class="p">;</span>
<span class="nv">$ra</span><span class="p">[</span><span class="s1">'#suffix'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'&lt;/div&gt;'</span><span class="p">;</span>
</code></pre></div></div><h2 id="date"> <a aria-labelledby="date" class="anchor-heading" href="https://selwynpolit.github.io/d9book/render#date"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Date</h2><p>To create a date object and return the year in a render array, use this code. Here is the code from a block build method:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">function</span> <span class="n">build</span><span class="p">()</span> <span class="p">{</span>
  <span class="nv">$date</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">\DateTime</span><span class="p">();</span>
  <span class="k">return</span> <span class="p">[</span>
    <span class="s1">'#markup'</span> <span class="o">=&gt;</span> <span class="nf">t</span><span class="p">(</span><span class="s1">'Copyright @year&amp;copy; My Company'</span><span class="p">,</span> <span class="p">[</span>
      <span class="s1">'@year'</span> <span class="o">=&gt;</span> <span class="nv">$date</span><span class="o">-&gt;</span><span class="nf">format</span><span class="p">(</span><span class="s1">'Y'</span><span class="p">),</span>
    <span class="p">]),</span> <span class="p">];</span>
<span class="p">}</span>
</code></pre></div></div><p>This uses Drupal\Core\Datetime\DrupalDateTime which is just a wrapper for \DateTime.</p><h2 id="image-1"> <a aria-labelledby="image-1" class="anchor-heading" href="https://selwynpolit.github.io/d9book/render#image-1"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Image</h2><p>Load an image and display it with the alt text</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">function</span> <span class="n">displayProductImage</span><span class="p">(</span><span class="kt">NodeInterface</span> <span class="nv">$node</span><span class="p">,</span> <span class="nv">$delta</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">isset</span><span class="p">(</span><span class="nv">$node</span><span class="o">-&gt;</span><span class="n">field_product_image</span><span class="p">[</span><span class="nv">$delta</span><span class="p">]))</span> <span class="p">{</span>
    <span class="nv">$imageData</span> <span class="o">=</span> <span class="nv">$node</span><span class="o">-&gt;</span><span class="n">field_product_image</span><span class="p">[</span><span class="nv">$delta</span><span class="p">]</span><span class="o">-&gt;</span><span class="nf">getValue</span><span class="p">();</span>
    <span class="nv">$file</span> <span class="o">=</span> <span class="nc">File</span><span class="o">::</span><span class="nf">load</span><span class="p">(</span><span class="nv">$imageData</span><span class="p">[</span><span class="s1">'target_id'</span><span class="p">]);</span>
    <span class="nv">$render_array</span><span class="p">[</span><span class="s1">'image_data'</span><span class="p">]</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
      <span class="s1">'#theme'</span> <span class="o">=&gt;</span> <span class="s1">'image_style'</span><span class="p">,</span>
      <span class="s1">'#uri'</span> <span class="o">=&gt;</span> <span class="nv">$file</span><span class="o">-&gt;</span><span class="nf">getFileUri</span><span class="p">(),</span>
      <span class="s1">'#style_name'</span> <span class="o">=&gt;</span> <span class="s1">'product_large'</span><span class="p">,</span>
      <span class="s1">'#alt'</span> <span class="o">=&gt;</span> <span class="nv">$imageData</span><span class="p">[</span><span class="s1">'alt'</span><span class="p">],</span>
    <span class="p">);</span>
  <span class="p">}</span>
</code></pre></div></div><h2 id="several-urls"> <a aria-labelledby="several-urls" class="anchor-heading" href="https://selwynpolit.github.io/d9book/render#several-urls"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Several Url’s.</h2><p>This queries for some nodes, generate a list of url’s and returns them as a render array. The '#list_type' =&gt; 'ol' (or ordered list)</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">use</span> <span class="nc">Drupal\Core\Url</span><span class="p">;</span>


<span class="k">public</span> <span class="k">function</span> <span class="n">build</span><span class="p">(){</span>
  <span class="nv">$result</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">nodeStorage</span><span class="o">-&gt;</span><span class="nf">getQuery</span><span class="p">()</span>
    <span class="o">-&gt;</span><span class="nf">accessCheck</span><span class="p">(</span><span class="kc">TRUE</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">condition</span><span class="p">(</span><span class="s1">'type'</span><span class="p">,</span> <span class="s1">'water_action'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">condition</span><span class="p">(</span><span class="s1">'status'</span><span class="p">,</span> <span class="s1">'1'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">configuration</span><span class="p">[</span><span class="s1">'block_count'</span><span class="p">])</span>
    <span class="o">-&gt;</span><span class="nb">sort</span><span class="p">(</span><span class="s1">'title'</span><span class="p">,</span> <span class="s1">'ASC'</span><span class="p">)</span>
    <span class="o">-&gt;</span><span class="nf">execute</span><span class="p">();</span>

  <span class="k">if</span> <span class="p">(</span><span class="nv">$result</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">//Only display block if there are items to show.</span>
    <span class="nv">$items</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">nodeStorage</span><span class="o">-&gt;</span><span class="nf">loadMultiple</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>

    <span class="nv">$build</span><span class="p">[</span><span class="s1">'list'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
      <span class="s1">'#theme'</span> <span class="o">=&gt;</span> <span class="s1">'item_list'</span><span class="p">,</span>
      <span class="s1">'#items'</span> <span class="o">=&gt;</span> <span class="p">[],</span>
    <span class="p">];</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$items</span> <span class="k">as</span> <span class="nv">$item</span><span class="p">)</span> <span class="p">{</span>
  <span class="nv">$translatedItem</span> <span class="o">=</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="n">entityRepository</span><span class="o">-&gt;</span><span class="nf">getTranslationFromContext</span><span class="p">(</span><span class="nv">$item</span><span class="p">);</span>
  <span class="nv">$nid</span> <span class="o">=</span> <span class="nv">$item</span><span class="o">-&gt;</span><span class="nf">id</span><span class="p">();</span>
  <span class="nv">$url</span> <span class="o">=</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromUri</span><span class="p">(</span><span class="s2">"internal:/node/</span><span class="nv">$nid</span><span class="s2">"</span><span class="p">);</span>

  <span class="nv">$build</span><span class="p">[</span><span class="s1">'list'</span><span class="p">][</span><span class="s1">'#items'</span><span class="p">][</span><span class="nv">$item</span><span class="o">-&gt;</span><span class="nf">id</span><span class="p">()]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">'#title'</span> <span class="o">=&gt;</span> <span class="nv">$translatedItem</span><span class="o">-&gt;</span><span class="nf">label</span><span class="p">(),</span>
    <span class="s1">'#type'</span> <span class="o">=&gt;</span> <span class="s1">'link'</span><span class="p">,</span>
    <span class="s1">'#url'</span> <span class="o">=&gt;</span> <span class="nv">$url</span><span class="p">,</span>
  <span class="p">];</span>
<span class="p">}</span>
</code></pre></div></div><h2 id="two-paragraphs"> <a aria-labelledby="two-paragraphs" class="anchor-heading" href="https://selwynpolit.github.io/d9book/render#two-paragraphs"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Two paragraphs</h2><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$rArray</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">'first_para'</span> <span class="o">=&gt;</span> <span class="p">[</span>
    <span class="s1">'#type'</span> <span class="o">=&gt;</span> <span class="s1">'markup'</span><span class="p">,</span>
    <span class="s1">'#markup'</span> <span class="o">=&gt;</span> <span class="s1">'...para 1 here....&lt;br&gt;'</span><span class="p">,</span>
  <span class="p">],</span>
  <span class="s1">'second_para'</span> <span class="o">=&gt;</span> <span class="p">[</span>
    <span class="s1">'#type'</span> <span class="o">=&gt;</span> <span class="s1">'markup'</span><span class="p">,</span>
    <span class="s1">'#markup'</span> <span class="o">=&gt;</span> <span class="s1">'...para 2 here....&lt;br&gt;'</span><span class="p">,</span>

  <span class="p">],</span>
<span class="p">];</span>
<span class="k">return</span> <span class="nv">$rArray</span><span class="p">;</span>
</code></pre></div></div><h2 id="a-button-that-opens-a-modal-dialog"> <a aria-labelledby="a-button-that-opens-a-modal-dialog" class="anchor-heading" href="https://selwynpolit.github.io/d9book/render#a-button-that-opens-a-modal-dialog"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> A button that opens a modal dialog</h2><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">use</span> <span class="nc">Drupal\Core\Url</span><span class="p">;</span>

<span class="k">public</span> <span class="k">function</span> <span class="n">build</span><span class="p">()</span> <span class="p">{</span>
  <span class="nv">$link_url</span> <span class="o">=</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromRoute</span><span class="p">(</span><span class="s1">'custom_modal.modal'</span><span class="p">);</span>
  <span class="nv">$link_url</span><span class="o">-&gt;</span><span class="nf">setOptions</span><span class="p">([</span>
    <span class="s1">'attributes'</span> <span class="o">=&gt;</span> <span class="p">[</span>
      <span class="s1">'class'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'use-ajax'</span><span class="p">,</span> <span class="s1">'button'</span><span class="p">,</span> <span class="s1">'button--small'</span><span class="p">],</span>
      <span class="s1">'data-dialog-type'</span> <span class="o">=&gt;</span> <span class="s1">'modal'</span><span class="p">,</span>
      <span class="s1">'data-dialog-options'</span> <span class="o">=&gt;</span> <span class="nc">Json</span><span class="o">::</span><span class="nf">encode</span><span class="p">([</span><span class="s1">'width'</span> <span class="o">=&gt;</span> <span class="mi">400</span><span class="p">]),</span>
    <span class="p">]</span>
  <span class="p">]);</span>

  <span class="k">return</span> <span class="p">[</span>
    <span class="s1">'#type'</span> <span class="o">=&gt;</span> <span class="s1">'markup'</span><span class="p">,</span>
    <span class="s1">'#markup'</span> <span class="o">=&gt;</span> <span class="nc">Link</span><span class="o">::</span><span class="nf">fromTextAndUrl</span><span class="p">(</span><span class="nf">t</span><span class="p">(</span><span class="s1">'Open modal'</span><span class="p">),</span> <span class="nv">$link_url</span><span class="p">)</span><span class="o">-&gt;</span><span class="nf">toString</span><span class="p">(),</span>
    <span class="s1">'#attached'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'library'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'core/drupal.dialog.ajax'</span><span class="p">]]</span>
  <span class="p">];</span>
</code></pre></div></div><h2 id="a-link"> <a aria-labelledby="a-link" class="anchor-heading" href="https://selwynpolit.github.io/d9book/render#a-link"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> A link</h2><p>Here is a simple link</p><p>use Drupal\Core\Url;</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$form</span><span class="p">[</span><span class="s1">'noaccount'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">'#type'</span> <span class="o">=&gt;</span> <span class="s1">'link'</span><span class="p">,</span>
  <span class="s1">'#title'</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">t</span><span class="p">(</span><span class="s1">'Continue without account'</span><span class="p">),</span>
  <span class="s1">'#url'</span> <span class="o">=&gt;</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromRoute</span><span class="p">(</span><span class="s1">'&lt;front&gt;'</span><span class="p">),</span>
<span class="p">];</span>
</code></pre></div></div><p>Other possible urls:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s1">'#url'</span> <span class="o">=&gt;</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromUri</span><span class="p">(</span><span class="s1">'internal:/dashboard'</span><span class="p">),</span>
<span class="s1">'#url'</span> <span class="o">=&gt;</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromUri</span><span class="p">(</span><span class="s1">'internal:/node/360'</span><span class="p">),</span>
<span class="s1">'#url'</span> <span class="o">=&gt;</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromUri</span><span class="p">(</span><span class="s1">'mailto:'</span> <span class="mf">.</span> <span class="nv">$value</span><span class="p">),</span>
</code></pre></div></div><h2 id="a-link-with-a-class"> <a aria-labelledby="a-link-with-a-class" class="anchor-heading" href="https://selwynpolit.github.io/d9book/render#a-link-with-a-class"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> A link with a class</h2><p>Here we add the #attributes to wrap the link in the classes: <code class="language-plaintext highlighter-rouge">button</code>, <code class="language-plaintext highlighter-rouge">button-action</code>, <code class="language-plaintext highlighter-rouge">button--primary</code>, and <code class="language-plaintext highlighter-rouge">button--small</code>:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$form</span><span class="p">[</span><span class="s1">'button'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">'#type'</span> <span class="o">=&gt;</span> <span class="s1">'link'</span><span class="p">,</span>
  <span class="s1">'#url'</span> <span class="o">=&gt;</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromUri</span><span class="p">(</span><span class="s1">'internal:/dashboard'</span><span class="p">),</span>
  <span class="s1">'#title'</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">t</span><span class="p">(</span><span class="s1">'Go to My Training'</span><span class="p">),</span>
  <span class="s1">'#attributes'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'class'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'button'</span><span class="p">,</span> <span class="s1">'button-action'</span><span class="p">,</span> <span class="s1">'button--primary'</span><span class="p">,</span> <span class="s1">'button--small'</span><span class="p">]],</span>
<span class="p">],</span>
</code></pre></div></div><h2 id="a-link-and-its-twig-template"> <a aria-labelledby="a-link-and-its-twig-template" class="anchor-heading" href="https://selwynpolit.github.io/d9book/render#a-link-and-its-twig-template"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> A link and its TWIG template</h2><p>Here is a link with the details of what you expect to see in the TWIG template:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">use</span> <span class="nc">Drupal\Core\Url</span><span class="p">;</span>

<span class="nv">$back_home_link</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">'#type'</span> <span class="o">=&gt;</span> <span class="s1">'link'</span><span class="p">,</span>
  <span class="s1">'#title'</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">t</span><span class="p">(</span><span class="s1">'Continue without account'</span><span class="p">),</span>
  <span class="s1">'#url'</span> <span class="o">=&gt;</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromRoute</span><span class="p">(</span><span class="s1">'&lt;front&gt;'</span><span class="p">),</span>
<span class="p">];</span>

<span class="nv">$variables</span><span class="p">[</span><span class="s1">'back_home_link'</span><span class="p">]</span> <span class="o">=</span> <span class="nv">$back_home_link</span>
</code></pre></div></div><p>and in the template you would expect to see something like:</p><div class="language-twig highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">{{</span> <span class="nv">content.back_home_link</span> <span class="cp">}}</span>
</code></pre></div></div><h2 id="a-link-with-parameters-and-a-template-file"> <a aria-labelledby="a-link-with-parameters-and-a-template-file" class="anchor-heading" href="https://selwynpolit.github.io/d9book/render#a-link-with-parameters-and-a-template-file"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> A link with parameters and a template file</h2><p>This path takes a 4 parameters. Here is its path as defined in the <code class="language-plaintext highlighter-rouge">routing.yml</code> file:</p><div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">team_abc.correctional_voting</span><span class="pi">:</span>
  <span class="na">path</span><span class="pi">:</span> <span class="s1">'</span><span class="s">/team/abc/admin//program/{program}/expectation/{expectation}/correlation/{correlation}/{action}/{type}'</span>
  <span class="na">defaults</span><span class="pi">:</span>
    <span class="na">_controller</span><span class="pi">:</span> <span class="s1">'</span><span class="s">\Drupal\team_abc\Controller\CorrelationVotingController::content'</span>
    <span class="na">_title</span><span class="pi">:</span> <span class="s1">'</span><span class="s">Correctional</span><span class="nv"> </span><span class="s">Voting'</span>
  <span class="na">requirements</span><span class="pi">:</span>
    <span class="na">_permission</span><span class="pi">:</span> <span class="s1">'</span><span class="s">manage</span><span class="nv"> </span><span class="s">voting</span><span class="nv"> </span><span class="s">process'</span>
  <span class="na">options</span><span class="pi">:</span>
    <span class="na">parameters</span><span class="pi">:</span>
      <span class="na">program</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">entity:node</span>
      <span class="na">expectation</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">entity:node</span>
      <span class="na">correlation</span><span class="pi">:</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">entity:node</span>
    <span class="na">no_cache</span><span class="pi">:</span> <span class="s1">'</span><span class="s">TRUE'</span>
</code></pre></div></div><p>Note the options in the <code class="language-plaintext highlighter-rouge">routing.yml</code> file which automatically convert the node ids to actual entities (Drupal loads the nodes internally) and passes those to the controller.</p><p>Then in the controller, we build a URL, specifying the parameters:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$url</span> <span class="o">=</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromRoute</span><span class="p">(</span><span class="s1">'team_abc.correctional_voting'</span><span class="p">,</span> <span class="p">[</span>
  <span class="s1">'program'</span> <span class="o">=&gt;</span> <span class="nv">$program</span><span class="o">-&gt;</span><span class="nf">id</span><span class="p">(),</span>
  <span class="s1">'expectation'</span> <span class="o">=&gt;</span> <span class="nv">$next_breakout_path_item</span><span class="p">[</span><span class="s1">'expectation_nid'</span><span class="p">],</span>
  <span class="s1">'correlation'</span> <span class="o">=&gt;</span> <span class="nv">$next_breakout_path_item</span><span class="p">[</span><span class="s1">'correlation_nid'</span><span class="p">],</span>
  <span class="s1">'action'</span> <span class="o">=&gt;</span> <span class="s1">'vote'</span><span class="p">,</span>
  <span class="s1">'type'</span> <span class="o">=&gt;</span> <span class="s1">'narrative'</span>
<span class="p">]);</span>
<span class="nv">$next_breakout</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">'#type'</span> <span class="o">=&gt;</span> <span class="s1">'link'</span><span class="p">,</span>
  <span class="s1">'#title'</span> <span class="o">=&gt;</span> <span class="nf">t</span><span class="p">(</span><span class="s1">'Next Breakout'</span><span class="p">),</span>
  <span class="s1">'#url'</span> <span class="o">=&gt;</span> <span class="nv">$url</span><span class="p">,</span>
<span class="p">];</span>

<span class="c1">// ...</span>

<span class="nv">$next_links</span><span class="p">[]</span> <span class="o">=</span> <span class="nv">$next_breakout</span><span class="p">;</span>
</code></pre></div></div><p>Then we wrap up all the variables and send them to buildDetails</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">$content</span> <span class="o">=</span> <span class="p">[</span>
    <span class="c1">// ...</span>
    <span class="s1">'program'</span> <span class="o">=&gt;</span> <span class="nv">$program_info</span><span class="p">,</span>
    <span class="s1">'previous_links'</span> <span class="o">=&gt;</span> <span class="nv">$previous_links</span><span class="p">,</span>
    <span class="s1">'next_links'</span> <span class="o">=&gt;</span> <span class="nv">$next_links</span><span class="p">,</span>
    <span class="s1">'expectation_cfitem_text'</span> <span class="o">=&gt;</span> <span class="nb">strip_tags</span><span class="p">(</span><span class="nv">$expectation_cfitem_text</span><span class="p">),</span>
  <span class="p">];</span>
  <span class="k">return</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">buildDetails</span><span class="p">(</span><span class="nv">$content</span><span class="p">,</span> <span class="nv">$breadcrumbs</span><span class="p">,</span> <span class="nv">$management_links</span><span class="p">,</span> <span class="nv">$correlation_info</span><span class="p">,</span> <span class="nv">$citations</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div><p>Which wraps the content in an array for rendering in twig. Note below that the <code class="language-plaintext highlighter-rouge">#theme</code> property which identifies the template filename. The #theme: <code class="language-plaintext highlighter-rouge">team_abc__correctional_voting</code> translates to the twig template file: <code class="language-plaintext highlighter-rouge">team-abc--correctional-voting.html.twig</code> where the underscores become dashes.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">public</span> <span class="k">function</span> <span class="n">buildDetails</span><span class="p">(</span><span class="kt">array</span> <span class="nv">$content</span><span class="p">,</span> <span class="kt">array</span> <span class="nv">$breadcrumbs</span><span class="p">,</span> <span class="kt">array</span> <span class="nv">$management_links</span><span class="p">,</span> <span class="kt">array</span> <span class="nv">$correlation_info</span><span class="p">,</span> <span class="kt">array</span> <span class="nv">$citations</span><span class="p">):</span> <span class="kt">array</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">[</span>
    <span class="s1">'#theme'</span> <span class="o">=&gt;</span> <span class="s1">'team_abc__correctional_voting'</span><span class="p">,</span>
    <span class="s1">'#content'</span> <span class="o">=&gt;</span> <span class="nv">$content</span><span class="p">,</span>
    <span class="s1">'#breadcrumbs'</span> <span class="o">=&gt;</span> <span class="nv">$breadcrumbs</span><span class="p">,</span>
    <span class="s1">'#management_links'</span> <span class="o">=&gt;</span> <span class="nv">$management_links</span><span class="p">,</span>
    <span class="s1">'#correlation'</span> <span class="o">=&gt;</span> <span class="nv">$correlation_info</span><span class="p">,</span>
    <span class="s1">'#citations'</span> <span class="o">=&gt;</span> <span class="nv">$citations</span><span class="p">,</span>
  <span class="p">];</span>
<span class="p">}</span>
</code></pre></div></div><p>Then in team-abc–correctional-voting.html.twig the <code class="language-plaintext highlighter-rouge">next</code> links are rendered – see ``</p><div class="language-twig highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"cell small-12 medium-6"</span><span class="nt">&gt;</span>
  <span class="cp">{%</span> <span class="k">if</span> <span class="nv">content.next_links</span> <span class="cp">%}</span>
    <span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"no-bullet nav-links prev"</span><span class="nt">&gt;</span>
      <span class="cp">{%</span> <span class="k">for</span> <span class="nv">next_link</span> <span class="ow">in</span> <span class="nv">content.next_links</span> <span class="cp">%}</span>
        Move mouse below for Next invisible links<span class="nt">&lt;li&gt;</span><span class="cp">{{</span> <span class="nv">next_link</span> <span class="cp">}}</span><span class="nt">&lt;/li&gt;</span>
      <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
    <span class="nt">&lt;/ul&gt;</span>
  <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div><p>This example may be a little confusing as it loops through an array of links.</p><h2 id="simple-unordered-list"> <a aria-labelledby="simple-unordered-list" class="anchor-heading" href="https://selwynpolit.github.io/d9book/render#simple-unordered-list"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Simple unordered list</h2><p>From: <a href="https://drupal.stackexchange.com/questions/214928/create-unordered-list-in-render-array">https://drupal.stackexchange.com/questions/214928/create-unordered-list-in-render-array</a></p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$content</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">'#theme'</span> <span class="o">=&gt;</span> <span class="s1">'item_list'</span><span class="p">,</span>
  <span class="s1">'#list_type'</span> <span class="o">=&gt;</span> <span class="s1">'ul'</span><span class="p">,</span>
  <span class="s1">'#title'</span> <span class="o">=&gt;</span> <span class="s1">'My List'</span><span class="p">,</span>
  <span class="s1">'#items'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'item 1'</span><span class="p">,</span> <span class="s1">'item 2'</span><span class="p">],</span>
  <span class="s1">'#attributes'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'class'</span> <span class="o">=&gt;</span> <span class="s1">'mylist'</span><span class="p">],</span>
  <span class="s1">'#wrapper_attributes'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'class'</span> <span class="o">=&gt;</span> <span class="s1">'container'</span><span class="p">],</span>
<span class="p">];</span>
</code></pre></div></div><h2 id="unordered-list-of-links-for-a-menu"> <a aria-labelledby="unordered-list-of-links-for-a-menu" class="anchor-heading" href="https://selwynpolit.github.io/d9book/render#unordered-list-of-links-for-a-menu"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Unordered list of links for a menu</h2><p>Here a list of links is created in a controller:</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$content</span><span class="p">[</span><span class="s1">'tabs'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">'#theme'</span> <span class="o">=&gt;</span> <span class="s1">'item_list'</span><span class="p">,</span>
    <span class="s1">'#list_type'</span> <span class="o">=&gt;</span> <span class="s1">'ul'</span><span class="p">,</span>
    <span class="s1">'#items'</span> <span class="o">=&gt;</span> <span class="p">[</span>
    <span class="p">[</span>
        <span class="s1">'#type'</span> <span class="o">=&gt;</span> <span class="s1">'link'</span><span class="p">,</span>
        <span class="s1">'#title'</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">t</span><span class="p">(</span><span class="s1">'My Plumbing Training'</span><span class="p">),</span>
        <span class="s1">'#url'</span> <span class="o">=&gt;</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromRoute</span><span class="p">(</span><span class="s1">'abc_academy.dashboard_tab'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'tab'</span> <span class="o">=&gt;</span> <span class="s1">'online'</span><span class="p">])</span>
    <span class="p">],</span>
    <span class="p">[</span>
        <span class="s1">'#type'</span> <span class="o">=&gt;</span> <span class="s1">'link'</span><span class="p">,</span>
        <span class="s1">'#title'</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">t</span><span class="p">(</span><span class="s1">'My Enrollment Training'</span><span class="p">),</span>
        <span class="s1">'#url'</span> <span class="o">=&gt;</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromRoute</span><span class="p">(</span><span class="s1">'abc_academy.dashboard_tab'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'tab'</span> <span class="o">=&gt;</span> <span class="s1">'enrollment'</span><span class="p">])</span>
    <span class="p">],</span>
    <span class="p">[</span>
        <span class="s1">'#type'</span> <span class="o">=&gt;</span> <span class="s1">'link'</span><span class="p">,</span>
        <span class="s1">'#title'</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">t</span><span class="p">(</span><span class="s1">'My Transcript'</span><span class="p">),</span>
        <span class="s1">'#url'</span> <span class="o">=&gt;</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromRoute</span><span class="p">(</span><span class="s1">'abc_academy.dashboard_tab'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'tab'</span> <span class="o">=&gt;</span> <span class="s1">'transcript'</span><span class="p">])</span>
    <span class="p">],</span>
    <span class="p">[</span>
        <span class="s1">'#type'</span> <span class="o">=&gt;</span> <span class="s1">'link'</span><span class="p">,</span>
        <span class="s1">'#title'</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">t</span><span class="p">(</span><span class="s1">'My Certificates'</span><span class="p">),</span><span class="o">/</span>          <span class="s1">'#url'</span> <span class="o">=&gt;</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromRoute</span><span class="p">(</span><span class="s1">'abc_academy.dashboard_tab'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'tab'</span> <span class="o">=&gt;</span> <span class="s1">'transcript'</span><span class="p">])</span>
        <span class="s1">'#url'</span> <span class="o">=&gt;</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromUri</span><span class="p">(</span><span class="s1">'internal:/dashboard/certificates'</span><span class="p">),</span>
    <span class="p">],</span>
    <span class="p">]</span>
<span class="p">];</span>

<span class="k">return</span> <span class="nv">$content</span><span class="p">;</span>
</code></pre></div></div><h2 id="nested-unordered-list"> <a aria-labelledby="nested-unordered-list" class="anchor-heading" href="https://selwynpolit.github.io/d9book/render#nested-unordered-list"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Nested Unordered List</h2><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$sidebar</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">'#title'</span> <span class="o">=&gt;</span> <span class="s1">'My List'</span><span class="p">,</span>
  <span class="s1">'#theme'</span> <span class="o">=&gt;</span> <span class="s1">'item_list'</span><span class="p">,</span>
  <span class="s1">'#list_type'</span> <span class="o">=&gt;</span> <span class="s1">'ul'</span><span class="p">,</span>
  <span class="s1">'#attributes'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'class'</span> <span class="o">=&gt;</span> <span class="s1">'mylist'</span><span class="p">],</span>
  <span class="s1">'#wrapper_attributes'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'class'</span> <span class="o">=&gt;</span> <span class="s1">'container'</span><span class="p">],</span>
  <span class="s1">'#items'</span> <span class="o">=&gt;</span> <span class="p">[</span>
    <span class="p">[</span>
      <span class="s1">'#type'</span> <span class="o">=&gt;</span> <span class="s1">'link'</span><span class="p">,</span>
      <span class="s1">'#title'</span> <span class="o">=&gt;</span> <span class="nf">t</span><span class="p">(</span><span class="s1">'My Online Training'</span><span class="p">),</span>
      <span class="s1">'#url'</span> <span class="o">=&gt;</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromUri</span><span class="p">(</span><span class="s1">'internal:/node/1'</span><span class="p">),</span>
    <span class="p">],</span>
    <span class="p">[</span>
      <span class="s1">'#type'</span> <span class="o">=&gt;</span> <span class="s1">'link'</span><span class="p">,</span>
      <span class="s1">'#title'</span> <span class="o">=&gt;</span> <span class="nf">t</span><span class="p">(</span><span class="s1">'My Instructor-led Training'</span><span class="p">),</span>
      <span class="s1">'#url'</span> <span class="o">=&gt;</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromUri</span><span class="p">(</span><span class="s1">'internal:/node/2'</span><span class="p">),</span>
    <span class="p">],</span>
    <span class="p">[</span><span class="s1">'#markup'</span> <span class="o">=&gt;</span> <span class="s1">'&lt;ul&gt;&lt;li&gt;item1&lt;/li&gt;&lt;li&gt;item2&lt;/li&gt;&lt;/ul&gt;'</span><span class="p">,],</span>
    <span class="p">[</span><span class="s1">'#markup'</span> <span class="o">=&gt;</span> <span class="s1">'&lt;ul&gt;&lt;li&gt;item1&lt;/li&gt;&lt;li&gt;item2&lt;/li&gt;&lt;li&gt;item3&lt;/li&gt;&lt;/ul&gt;'</span><span class="p">,],</span>
  <span class="p">],</span>
<span class="p">];</span>
</code></pre></div></div><h2 id="select-dropdown"> <a aria-labelledby="select-dropdown" class="anchor-heading" href="https://selwynpolit.github.io/d9book/render#select-dropdown"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Select (dropdown)</h2><p>To build a select element, fill an array with some keys and text labels. The text labels will appear in the dropdown.</p><p>To set the default value i.e. the value that appears in the dropdown when it is first displayed, specify the key. For example: If the contents of the dropdown are an array like <code class="language-plaintext highlighter-rouge">['aaa', 'vvv', 'zzz']</code> then you can specify <code class="language-plaintext highlighter-rouge">$default=2</code> to display <code class="language-plaintext highlighter-rouge">zzz</code> as the default.</p><p>In the example below, the default is set to <code class="language-plaintext highlighter-rouge">/node/364</code> and the dropdown will display <code class="language-plaintext highlighter-rouge">Above ground pool 1</code>, <code class="language-plaintext highlighter-rouge">Above ground pool 2</code> etc.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Select element.</span>
<span class="nv">$options</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">'/node/360'</span> <span class="o">=&gt;</span><span class="s1">'Above ground pool 1'</span><span class="p">,</span>
  <span class="s1">'/node/362'</span> <span class="o">=&gt;</span><span class="s1">'Above ground pool 2'</span><span class="p">,</span>
  <span class="s1">'/node/364'</span> <span class="o">=&gt;</span><span class="s1">'Underground pool'</span><span class="p">,</span>
  <span class="s1">'/node/359'</span> <span class="o">=&gt;</span><span class="s1">'Patio pool'</span><span class="p">,</span>
  <span class="p">];</span>

<span class="c1">// Set the default value - it must be the key.</span>
<span class="nv">$default</span> <span class="o">=</span> <span class="s1">'/node/364'</span><span class="p">;</span>
<span class="nv">$form</span><span class="p">[</span><span class="s1">'select'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
  <span class="s1">'#type'</span> <span class="o">=&gt;</span> <span class="s1">'select'</span><span class="p">,</span>
  <span class="s1">'#title'</span> <span class="o">=&gt;</span> <span class="nv">$this</span><span class="o">-&gt;</span><span class="nf">t</span><span class="p">(</span><span class="s1">'Select video'</span><span class="p">),</span>
  <span class="s1">'#description'</span> <span class="o">=&gt;</span> <span class="s1">'Test Description'</span><span class="p">,</span>
  <span class="s1">'#default_value'</span> <span class="o">=&gt;</span> <span class="nv">$default</span><span class="p">,</span>
  <span class="s1">'#options'</span> <span class="o">=&gt;</span> <span class="nv">$options</span><span class="p">,</span>
<span class="p">];</span>
</code></pre></div></div><h2 id="select-dropdown-ajaxified"> <a aria-labelledby="select-dropdown-ajaxified" class="anchor-heading" href="https://selwynpolit.github.io/d9book/render#select-dropdown-ajaxified"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Select (dropdown) Ajaxified</h2><p>Often sites need select elements that do some action e.g. redirect when the user makes a selection in the dropdown. Here is one example such a select element. I populate the $options with the result of a database query. When the user changes the selection in the dropdown, it calls the callback <code class="language-plaintext highlighter-rouge">videoSelectChange()</code>. The callback redirects to the URL in question using the <code class="language-plaintext highlighter-rouge">$command = new RedirectComand();</code></p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$form</span><span class="p">[</span><span class="s1">'select'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">'#type'</span> <span class="o">=&gt;</span> <span class="s1">'select'</span><span class="p">,</span>
<span class="c1">//      '#title' =&gt; $this-&gt;t('Select video'),</span>
    <span class="s1">'#description'</span> <span class="o">=&gt;</span> <span class="s1">'Test Description'</span><span class="p">,</span>
    <span class="s1">'#default_value'</span> <span class="o">=&gt;</span> <span class="nv">$default</span><span class="p">,</span>
    <span class="s1">'#options'</span> <span class="o">=&gt;</span> <span class="nv">$options</span><span class="p">,</span>
    <span class="s1">'#ajax'</span> <span class="o">=&gt;</span> <span class="p">[</span>
    <span class="s1">'callback'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="nv">$this</span><span class="p">,</span> <span class="s1">'videoSelectChange'</span><span class="p">],</span>
    <span class="s1">'event'</span> <span class="o">=&gt;</span> <span class="s1">'change'</span><span class="p">,</span>
    <span class="s1">'wrapper'</span> <span class="o">=&gt;</span> <span class="nv">$ajax_wrapper</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">];</span>


<span class="cd">/**
 * Callback function for changes to the select elements.
 *
 */</span>
<span class="k">public</span> <span class="k">function</span> <span class="n">videoSelectChange</span><span class="p">(</span><span class="kt">array</span> <span class="nv">$form</span><span class="p">,</span> <span class="kt">FormStateInterface</span> <span class="nv">$form_state</span><span class="p">)</span> <span class="p">{</span>
  <span class="nv">$values</span> <span class="o">=</span> <span class="nv">$form_state</span><span class="o">-&gt;</span><span class="nf">getValues</span><span class="p">();</span>
  <span class="nv">$elem</span> <span class="o">=</span> <span class="nv">$form_state</span><span class="o">-&gt;</span><span class="nf">getTriggeringElement</span><span class="p">();</span>
  <span class="nv">$response</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AjaxResponse</span><span class="p">();</span>
  <span class="nv">$url</span> <span class="o">=</span> <span class="nc">Url</span><span class="o">::</span><span class="nf">fromUri</span><span class="p">(</span><span class="s1">'internal:'</span> <span class="mf">.</span> <span class="nv">$values</span><span class="p">[</span><span class="nv">$elem</span><span class="p">[</span><span class="s2">"#name"</span><span class="p">]]);</span>
  <span class="nv">$command</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RedirectCommand</span><span class="p">(</span><span class="nv">$url</span><span class="o">-&gt;</span><span class="nf">toString</span><span class="p">());</span>
  <span class="nv">$response</span><span class="o">-&gt;</span><span class="nf">addCommand</span><span class="p">(</span><span class="nv">$command</span><span class="p">);</span>
  <span class="k">return</span> <span class="nv">$response</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div><h2 id="limit-allowed-tags-in-markup"> <a aria-labelledby="limit-allowed-tags-in-markup" class="anchor-heading" href="https://selwynpolit.github.io/d9book/render#limit-allowed-tags-in-markup"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Limit allowed tags in markup</h2><p>Here we allow &lt;i&gt; (italics) tags in the login menu item, and &lt;i&gt; and &lt;sup&gt; (superscript) tags in the logout menu item</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cd">/**
 * Implements hook_preprocess_menu().
 */</span>
<span class="k">function</span> <span class="n">postal_theme_preprocess_menu</span><span class="p">(</span><span class="o">&amp;</span><span class="nv">$vars</span><span class="p">,</span> <span class="nv">$hook</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nv">$hook</span> <span class="o">==</span> <span class="s1">'menu__account'</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$items</span> <span class="o">=</span> <span class="nv">$vars</span><span class="p">[</span><span class="s1">'items'</span><span class="p">];</span>
    <span class="k">foreach</span> <span class="p">(</span><span class="nv">$items</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$item</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nv">$key</span> <span class="o">==</span> <span class="s1">'user.page'</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$vars</span><span class="p">[</span><span class="s1">'items'</span><span class="p">][</span><span class="nv">$key</span><span class="p">][</span><span class="s1">'title'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
          <span class="s1">'#markup'</span> <span class="o">=&gt;</span> <span class="s1">'Log the &lt;i&gt;flock&lt;/i&gt;&lt;sup&gt;TM&lt;/sup&gt; in!'</span><span class="p">,</span>
          <span class="s1">'#allowed_tags'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'i'</span><span class="p">],</span>
        <span class="p">];</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nv">$key</span> <span class="o">==</span> <span class="s1">'user.logout'</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$vars</span><span class="p">[</span><span class="s1">'items'</span><span class="p">][</span><span class="nv">$key</span><span class="p">][</span><span class="s1">'title'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
          <span class="s1">'#markup'</span> <span class="o">=&gt;</span> <span class="s1">'Log the &lt;i&gt;flock&lt;/i&gt; &lt;sup&gt;TM&lt;/sup&gt;out!'</span><span class="p">,</span>
          <span class="s1">'#allowed_tags'</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'i'</span><span class="p">,</span> <span class="s1">'sup'</span><span class="p">],</span>
        <span class="p">];</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div><h2 id="disable-an-element"> <a aria-labelledby="disable-an-element" class="anchor-heading" href="https://selwynpolit.github.io/d9book/render#disable-an-element"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Disable an element</h2><p>In this example the <code class="language-plaintext highlighter-rouge">accept</code> button is disabled when <code class="language-plaintext highlighter-rouge">$my_current_vote</code> is <code class="language-plaintext highlighter-rouge">accepted</code>.</p><div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">$form</span><span class="p">[</span><span class="s1">'accept'</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">'#type'</span> <span class="o">=&gt;</span> <span class="s1">'submit'</span><span class="p">,</span>
    <span class="s1">'#value'</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">,</span>
    <span class="s1">'#name'</span> <span class="o">=&gt;</span> <span class="s2">"accept_</span><span class="nv">$feedback_error_nid</span><span class="s2">"</span><span class="p">,</span>
    <span class="s1">'#voting_action'</span> <span class="o">=&gt;</span> <span class="s1">'accepted'</span><span class="p">,</span>
    <span class="s1">'#prefix'</span> <span class="o">=&gt;</span> <span class="s1">'&lt;div class="srp-vote-form"&gt;'</span><span class="p">,</span>
    <span class="s1">'#id'</span> <span class="o">=&gt;</span> <span class="s1">'edit-accept-'</span> <span class="mf">.</span> <span class="nv">$feedback_error_nid</span><span class="p">,</span>
    <span class="s1">'#attributes'</span> <span class="o">=&gt;</span> <span class="p">[</span>
      <span class="s1">'class'</span> <span class="o">=&gt;</span> <span class="p">[</span>
        <span class="s1">'hilited-button'</span><span class="p">,</span>
        <span class="s1">'blue-button'</span><span class="p">,</span>
        <span class="s1">'accept-button'</span><span class="p">,</span>
      <span class="p">],</span>
    <span class="p">],</span>
  <span class="p">];</span>

  <span class="k">if</span> <span class="p">(</span><span class="nb">strtolower</span><span class="p">(</span><span class="nv">$my_current_vote</span><span class="p">)</span> <span class="o">==</span> <span class="s1">'accepted'</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$form</span><span class="p">[</span><span class="s1">'accept'</span><span class="p">][</span><span class="s1">'#attributes'</span><span class="p">][</span><span class="s1">'class'</span><span class="p">][]</span> <span class="o">=</span> <span class="s1">'selected'</span><span class="p">;</span>
    <span class="nv">$form</span><span class="p">[</span><span class="s1">'reject'</span><span class="p">][</span><span class="s1">'#disabled'</span><span class="p">]</span> <span class="o">=</span> <span class="kc">TRUE</span><span class="p">;</span>
  <span class="p">}</span>

</code></pre></div></div><h2 id="resources"> <a aria-labelledby="resources" class="anchor-heading" href="https://selwynpolit.github.io/d9book/render#resources"><svg aria-hidden="true" viewbox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a> Resources</h2><ul><li><a href="https://api.drupal.org/api/drupal/core%21lib%21Drupal%21Core%21Render%21theme.api.php/group/theme_render/10.0.x">Render API overview for Drupal 10</a><li><a href="https://www.drupal.org/docs/drupal-apis/render-api/render-arrays">Render Arrays from Drupal.org updated August 2022</a></li></li></ul><hr/> <script async="" crossorigin="anonymous" data-category="Q&amp;A" data-category-id="MDE4OkRpc2N1c3Npb25DYXRlZ29yeTMyMjY2NDE4" data-emit-metadata="0" data-input-position="bottom" data-lang="en" data-mapping="title" data-reactions-enabled="1" data-repo="selwynpolit/d9book" data-repo-id="MDEwOlJlcG9zaXRvcnkzMjUxNTQ1Nzg=" data-strict="0" data-theme="preferred_color_scheme" src="https://giscus.app/client.js"> </script><hr/><footer><p><a href="https://selwynpolit.github.io/d9book/render#top" id="back-to-top">Back to top</a></p><p class="text-small text-grey-dk-100 mb-0"><span xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/"> <a href="http://www.selwynpolit.github.io/d9book" property="dct:title" rel="cc:attributionURL">Drupal at your fingertips</a> by <a href="http://www.drupal.org/u/selwynpolit" property="cc:attributionName" rel="cc:attributionURL dct:creator">Selwyn Polit</a> is licensed under <a href="http://creativecommons.org/licenses/by/4.0/" rel="license noopener noreferrer" target="_blank">CC BY 4.0 <img src="https://mirrors.creativecommons.org/presskit/icons/cc.svg" style="height:16px!important;vertical-align:text-bottom;"/> <img src="https://mirrors.creativecommons.org/presskit/icons/by.svg" style="height:16px!important;vertical-align:text-bottom;"/> </a></span></p><div class="d-flex mt-2"><p class="text-small text-grey-dk-000 mb-0 mr-2"> Page last modified: <span class="d-inline-block">Jul 23 2023</span>.</p><p class="text-small text-grey-dk-000 mb-0"> <a href="https://github.com/selwynpolit/d9book/tree/gh-pages/book/render.md" id="edit-this-page">Edit this page on GitHub</a></p></div></footer></div></div><div class="search-overlay"></div></div>
</body></link></meta></meta></meta></head></html>